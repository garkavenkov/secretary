"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[123],{2965:(t,a,e)=>{e.d(a,{Z:()=>n});const n={data:function(){return{errors:{}}},methods:{getError:function(t){return this.errors&&this.errors[t]?this.errors[t][0]:""},hasError:function(t){return!(!this.errors||!this.errors[t])}},created:function(){var t=this,a=this,e=Object.keys(this.formData);this.excludeFiledsFromCreateWatch&&(e=e.filter((function(a){return!t.excludeFiledsFromCreateWatch.includes(a)}))),e.forEach((function(t){var e="formData.".concat(t);a.$watch(e,(function(){this.errors[t]&&delete this.errors[t]}))}))}}},3753:(t,a,e)=>{e.d(a,{Z:()=>n});const n={methods:{submitData:function(){var t=this;"create"==this.action?axios.post(this.apiUrl,this.formData).then((function(a){t.$emit("refreshData"),t.$toast(a.data.message),void 0!==t.clearFormData&&t.clearFormData()})).catch((function(a){var e;t.errors=null===(e=a.response)||void 0===e?void 0:e.data.errors})):"update"==this.action&&axios.patch("".concat(this.apiUrl,"/").concat(this.formData.id),this.formData).then((function(a){t.errors=[],t.$emit("refreshData"),t.$toast(a.data.message)})).catch((function(a){var e;t.errors=null===(e=a.response)||void 0===e?void 0:e.data.errors}))}}}},6287:(t,a,e)=>{e.d(a,{Z:()=>o});var n=e(3645),r=e.n(n)()((function(t){return t[1]}));r.push([t.id,"tr[data-v-4cf46395]{vertical-align:middle}tr.selected[data-v-4cf46395]{background:hsla(220,4%,85%,.22)}.actions[data-v-4cf46395]{display:flex}.actions>div[data-v-4cf46395]{flex:1 0 0;text-align:center}",""]);const o=r},1126:(t,a,e)=>{e.d(a,{Z:()=>o});var n=e(3645),r=e.n(n)()((function(t){return t[1]}));r.push([t.id,".category-name[data-v-33274355]{font-size:1rem}",""]);const o=r},6036:(t,a,e)=>{e.d(a,{Z:()=>m});var n=e(8222),r=["id"],o={class:"modal-header"},i={class:"d-flex align-items-center"},s=["innerHTML"],l={class:"modal-body"},d={key:0,class:"modal-footer justify-content-between"},c=["disabled"];const u={name:"ModalForm",props:{formId:{type:String,required:!0},modalClass:{type:String,required:!1,default:""},modalContentClass:{type:String,required:!1,default:""},showFooter:{type:Boolean,required:!1,default:function(){return!0}},sumbitIsDisabled:{type:Boolean,required:!1,default:function(){return!1}},title:{type:String,required:!1,default:""},submitCaption:{type:String,required:!1,default:""}},inject:{modalTitle:{from:"modalTitle",default:"Новий запис"},modalSubmitCaption:{from:"modalSubmitCaption",default:"Додати"}},data:function(){return{}},computed:{modalFormTitle:function(){return this.title?this.title:this.modalTitle},modalFormSubmitCaption:function(){return this.submitCaption?this.submitCaption:this.modalSubmitCaption}}};const m=(0,e(3744).Z)(u,[["render",function(t,a,e,u,m,f){return(0,n.wg)(),(0,n.iD)("div",{class:"modal fade",id:e.formId,tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[(0,n._)("div",{class:(0,n.C_)(["modal-dialog",e.modalClass])},[(0,n._)("div",{class:(0,n.C_)(["modal-content",e.modalContentClass])},[(0,n._)("div",o,[(0,n._)("div",i,[(0,n._)("h1",{class:"modal-title fs-5",innerHTML:f.modalFormTitle},null,8,s),(0,n.WI)(t.$slots,"modalHeader")]),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:a[0]||(a[0]=function(a){return t.$emit("closeForm")})})]),(0,n._)("div",l,[(0,n.WI)(t.$slots,"default")]),e.showFooter?((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",null,[(0,n.WI)(t.$slots,"footer")]),(0,n._)("div",null,[(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:a[1]||(a[1]=function(a){return t.$emit("closeForm")})},"Відмінити"),(0,n._)("button",{type:"button",class:"btn btn-primary ms-4",onClick:a[2]||(a[2]=function(a){return t.$emit("submitData")}),disabled:e.sumbitIsDisabled},(0,n.zw)(f.modalFormSubmitCaption),9,c)])])):(0,n.kq)("",!0)],2)],2)],8,r)}]])},6850:(t,a,e)=>{e.r(a),e.d(a,{default:()=>kt});var n=e(8222),r=function(t){return(0,n.dD)("data-v-4cf46395"),t=t(),(0,n.Cn)(),t},o={class:"row"},i={class:"col"},s={class:"card"},l={class:"card-header"},d=r((function(){return(0,n._)("div",{class:"dictionary-name__wrapper"},[(0,n._)("span",null,"Категорії додаткових параметрів")],-1)})),c=[r((function(){return(0,n._)("span",{class:"mdi mdi-refresh"},null,-1)}))],u=[r((function(){return(0,n._)("span",{class:"mdi mdi-plus-thick"},null,-1)}))],m={class:"card-body"},f={class:"table table-sm table-bordered"},p=r((function(){return(0,n._)("thead",{class:"table-secondary"},[(0,n._)("tr",null,[(0,n._)("th",null,"Модель"),(0,n._)("th",null,"Назва"),(0,n._)("th")])],-1)})),h=["onClick"],y={class:"text-center"},b=["onClick"],_=[r((function(){return(0,n._)("span",{class:"mdi mdi-pencil"},null,-1)}))],v={class:"col"},g={class:"card"},C={class:"card-header"},D={class:"dictionary-name__wrapper"},w=[r((function(){return(0,n._)("span",{class:"mdi mdi-refresh"},null,-1)}))],k=[r((function(){return(0,n._)("span",{class:"mdi mdi-plus-thick"},null,-1)}))],F={class:"card-body"},P={key:0,class:"table table-sm table-bordered"},x=r((function(){return(0,n._)("thead",{class:"table-secondary"},[(0,n._)("tr",null,[(0,n._)("th",null,"Код"),(0,n._)("th",null,"Назва"),(0,n._)("th",null,"Значення"),(0,n._)("th",{class:"text-center",title:"Системний параметр або параметр користувача"},"Тип"),(0,n._)("th")])],-1)})),T={class:"text-center"},S={key:0,class:"mdi mdi-cog-outline text-danger",title:"Системний параметр"},Z={key:1,class:"mdi mdi-account-outline text-primary",title:"Параментр користувача"},q={class:"actions"},E=["onClick"],I=[r((function(){return(0,n._)("span",{class:"mdi mdi-pencil"},null,-1)}))],A=["onClick"],z=[r((function(){return(0,n._)("span",{class:"mdi mdi-trash-can"},null,-1)}))],V={key:1,class:"text-center text-muted p-3"};var $=e(8877),U={class:"row mb-3"},N={class:"col"},H=(0,n._)("label",{for:"categoryCode",class:"form-label"},"Код",-1),j={id:"categoryCodeValidation",class:"invalid-feedback"},M={class:"row mb-3"},W={class:"col"},B=(0,n._)("label",{for:"categoryName",class:"form-label"},"Назва",-1),Y={id:"categoryNameValidation",class:"invalid-feedback"};var O=e(6036),K=e(3753),L=e(2965);const R={name:"AdditionalParamCategoryForm",mixins:[K.Z,L.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},data:function(){return{apiUrl:"/api/v1/additional-param-categories"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.errors=[]},closeForm:function(){this.clearFormData()}},components:{ModalForm:O.Z}};var G=e(3744);const J=(0,G.Z)(R,[["render",function(t,a,e,r,o,i){var s=(0,n.up)("ModalForm");return(0,n.wg)(),(0,n.j4)(s,{formId:"CategoryForm",onSubmitData:t.submitData,onCloseForm:i.closeForm},{default:(0,n.w5)((function(){return[(0,n._)("div",U,[(0,n._)("div",N,[H,(0,n.wy)((0,n._)("input",{type:"text",class:(0,n.C_)(["form-control",t.hasError("code")?"is-invalid":""]),id:"categoryCode","onUpdate:modelValue":a[0]||(a[0]=function(t){return e.formData.code=t})},null,2),[[n.nr,e.formData.code]]),(0,n._)("div",j,(0,n.zw)(t.getError("code")),1)])]),(0,n._)("div",M,[(0,n._)("div",W,[B,(0,n.wy)((0,n._)("input",{type:"text",class:(0,n.C_)(["form-control",t.hasError("name")?"is-invalid":""]),id:"categoryName","onUpdate:modelValue":a[1]||(a[1]=function(t){return e.formData.name=t})},null,2),[[n.nr,e.formData.name]]),(0,n._)("div",Y,(0,n.zw)(t.getError("name")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]]);var Q=function(t){return(0,n.dD)("data-v-33274355"),t=t(),(0,n.Cn)(),t},X={class:"row mb-3"},tt={class:"col"},at={class:"category-name"},et={class:"row mb-3"},nt={class:"col"},rt=Q((function(){return(0,n._)("label",{for:"paramValueType",class:"form-label"},"Тип значення",-1)})),ot=Q((function(){return(0,n._)("option",{disabled:"",value:"0"},"Оберіть тип значення",-1)})),it=["value"],st={id:"paramValueTypeValidation",class:"invalid-feedback"},lt={class:"row mb-3"},dt={class:"col"},ct=Q((function(){return(0,n._)("label",{for:"paramCode",class:"form-label"},"Код",-1)})),ut={id:"paramCodeValidation",class:"invalid-feedback"},mt={class:"row mb-3"},ft={class:"col"},pt=Q((function(){return(0,n._)("label",{for:"paramName",class:"form-label"},"Назва",-1)})),ht={id:"paramNameValidation",class:"invalid-feedback"};const yt={name:"AdditionalParamForm",mixins:[K.Z,L.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"},category:{type:Object,required:!0},valueTypes:{type:Array,required:!0}},data:function(){return{apiUrl:"/api/v1/additional-params"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.formData.value_type_id=0,this.errors=[]},closeForm:function(){this.clearFormData()}},computed:{readyFodSubmit:function(){return""!==this.formData.name&&""!==this.formData.code}},components:{ModalForm:O.Z}};var bt=e(3379),_t=e.n(bt),vt=e(1126),gt={insert:"head",singleton:!1};_t()(vt.Z,gt);vt.Z.locals;const Ct={name:"AdditionalParams",data:function(){return{categories:[],params:[],valueTypes:[],categoryData:{code:"",name:""},selectedCategory:{},paramData:{category_id:null,code:"",name:"",value_type_id:0},action:"",modalTitle:"",modalSubmitCaption:""}},provide:function(){var t=this;return{modalTitle:(0,n.Fl)((function(){return t.modalTitle})),modalSubmitCaption:(0,n.Fl)((function(){return t.modalSubmitCaption}))}},methods:{fetchAdditionalParamCategories:function(){var t=this;axios.get("/api/v1/additional-param-categories").then((function(a){t.categories=a.data.data}))},fetchAdditionalParams:function(t){var a=this;axios.get("/api/v1/additional-params?category_id=".concat(t)).then((function(t){a.params=t.data.data}))},fetchAdditionalParamValueTypes:function(){var t=this;axios.get("/api/v1/additional-param-value-types").then((function(a){t.valueTypes=a.data.data}))},getCategoryParams:function(t){this.selectedCategory=t,this.paramData.category_id=t.id,this.fetchAdditionalParams(t.id)},newCategory:function(){this.modalTitle="Нова категорія",this.modalSubmitCaption="Додати",this.action="create",new $.u_(document.getElementById("CategoryForm")).show()},newParam:function(){this.modalTitle="Новий параметр",this.modalSubmitCaption="Додати",this.action="create",this.paramData.category_id=this.selectedCategory.id,new $.u_(document.getElementById("ParamForm")).show()},editCategory:function(t){this.modalTitle="Редагування категорії",this.modalSubmitCaption="Зберегти",this.action="update",this.categoryData.id=t.id,this.categoryData.code=t.code,this.categoryData.name=t.name,new $.u_(document.getElementById("CategoryForm")).show()},editParam:function(t){this.modalTitle="Редагування параметру",this.modalSubmitCaption="Зберегти",this.action="update",this.paramData.id=t.id,this.paramData.category_id=t.category_id,this.paramData.code=t.code,this.paramData.name=t.name,this.paramData.value_type_id=t.value_type_id,new $.u_(document.getElementById("ParamForm")).show()},deleteParam:function(t){var a=this;this.$confirmDelete("Ви дійсно бажаєте видалити додатковий параметр","Видалення параметру може призвести до неочікуваних результатів в звітах.").then((function(e){e.isConfirmed&&axios.delete("/api/v1/additional-params/".concat(t.id)).then((function(e){a.$toast(e.data.message),a.fetchAdditionalParams(t.category_id)}))}))}},computed:{selectedCategoryName:function(){var t;return null!==(t=this.selectedCategory)&&void 0!==t&&t.name?'. Категорія: "'.concat(this.selectedCategory.name,'"'):""}},components:{CategoryForm:J,ParamForm:(0,G.Z)(yt,[["render",function(t,a,e,r,o,i){var s=(0,n.up)("ModalForm");return(0,n.wg)(),(0,n.j4)(s,{formId:"ParamForm",onSubmitData:t.submitData,onCloseForm:i.closeForm,sumbitIsDisabled:!i.readyFodSubmit},{default:(0,n.w5)((function(){return[(0,n._)("div",X,[(0,n._)("div",tt,[(0,n._)("span",at,"Категорія: "+(0,n.zw)(e.category.name),1)])]),(0,n._)("div",et,[(0,n._)("div",nt,[rt,(0,n.wy)((0,n._)("select",{class:(0,n.C_)(["form-control",t.hasError("value_type_id")?"is-invalid":""]),id:"paramValueType","onUpdate:modelValue":a[0]||(a[0]=function(t){return e.formData.value_type_id=t})},[ot,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.valueTypes,(function(t){return(0,n.wg)(),(0,n.iD)("option",{value:t.id,key:t.id},(0,n.zw)(t.description),9,it)})),128))],2),[[n.bM,e.formData.value_type_id]]),(0,n._)("div",st,(0,n.zw)(t.getError("value_type_id")),1)])]),(0,n._)("div",lt,[(0,n._)("div",dt,[ct,(0,n.wy)((0,n._)("input",{type:"text",class:(0,n.C_)(["form-control",t.hasError("code")?"is-invalid":""]),id:"paramCode","onUpdate:modelValue":a[1]||(a[1]=function(t){return e.formData.code=t})},null,2),[[n.nr,e.formData.code]]),(0,n._)("div",ut,(0,n.zw)(t.getError("code")),1)])]),(0,n._)("div",mt,[(0,n._)("div",ft,[pt,(0,n.wy)((0,n._)("input",{type:"text",class:(0,n.C_)(["form-control",t.hasError("name")?"is-invalid":""]),id:"paramName","onUpdate:modelValue":a[2]||(a[2]=function(t){return e.formData.name=t})},null,2),[[n.nr,e.formData.name]]),(0,n._)("div",ht,(0,n.zw)(t.getError("name")),1)])])]})),_:1},8,["onSubmitData","onCloseForm","sumbitIsDisabled"])}],["__scopeId","data-v-33274355"]])},created:function(){this.fetchAdditionalParamCategories(),this.fetchAdditionalParamValueTypes()}};var Dt=e(6287),wt={insert:"head",singleton:!1};_t()(Dt.Z,wt);Dt.Z.locals;const kt=(0,G.Z)(Ct,[["render",function(t,a,e,r,$,U){var N=(0,n.up)("breadcrumbs"),H=(0,n.up)("CategoryForm"),j=(0,n.up)("ParamForm");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(N),(0,n._)("div",o,[(0,n._)("div",i,[(0,n._)("div",s,[(0,n._)("div",l,[d,(0,n._)("div",null,[(0,n._)("button",{class:"btn btn-sm btn-outline-secondary btn-transparent me-2",onClick:a[0]||(a[0]=function(){return U.fetchAdditionalParamCategories&&U.fetchAdditionalParamCategories.apply(U,arguments)}),title:"Оновити дані"},c),(0,n._)("button",{class:"btn btn-sm btn-outline-secondary btn-transparent",onClick:a[1]||(a[1]=function(){return U.newCategory&&U.newCategory.apply(U,arguments)}),title:"Додати категорію"},u)])]),(0,n._)("div",m,[(0,n._)("table",f,[p,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)($.categories,(function(t){return(0,n.wg)(),(0,n.iD)("tr",{key:t.id,class:(0,n.C_)({selected:$.selectedCategory.id==t.id})},[(0,n._)("td",null,[(0,n._)("a",{onClick:function(a){return U.getCategoryParams(t)},style:{cursor:"pointer"}},(0,n.zw)(t.code),9,h)]),(0,n._)("td",null,(0,n.zw)(t.name),1),(0,n._)("td",y,[(0,n._)("button",{class:"btn btn-sm btn-outline-warning btn-transparent",title:"Редагувати категорію",onClick:function(a){return U.editCategory(t)}},_,8,b)])],2)})),128))])])])])]),(0,n._)("div",v,[(0,n._)("div",g,[(0,n._)("div",C,[(0,n._)("div",D,[(0,n._)("span",null,"Додаткові параметри"+(0,n.zw)(U.selectedCategoryName),1)]),(0,n._)("div",null,[""!==U.selectedCategoryName?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-sm btn-outline-secondary btn-transparent me-2",onClick:a[2]||(a[2]=function(t){return U.fetchAdditionalParams($.selectedCategory.id)}),title:"Оновити дані"},w)):(0,n.kq)("",!0),""!==U.selectedCategoryName?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-sm btn-outline-secondary btn-transparent",onClick:a[3]||(a[3]=function(){return U.newParam&&U.newParam.apply(U,arguments)}),title:"Додати параметр"},k)):(0,n.kq)("",!0)])]),(0,n._)("div",F,[$.params.length>0?((0,n.wg)(),(0,n.iD)("table",P,[x,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)($.params,(function(t){return(0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",null,(0,n.zw)(t.code),1),(0,n._)("td",null,(0,n.zw)(t.name),1),(0,n._)("td",null,(0,n.zw)(t.value_type.name),1),(0,n._)("td",T,[t.is_system?((0,n.wg)(),(0,n.iD)("span",S)):((0,n.wg)(),(0,n.iD)("span",Z))]),(0,n._)("td",q,[(0,n._)("div",null,[(0,n._)("button",{class:"btn btn-sm btn-outline-warning btn-transparent",title:"Редагувати параметр",onClick:function(a){return U.editParam(t)}},I,8,E)]),(0,n._)("div",null,[t.is_system?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-sm btn-outline-danger btn-transparent",title:"Видалити параметр",onClick:function(a){return U.deleteParam(t)}},z,8,A))])])])})),128))])])):((0,n.wg)(),(0,n.iD)("div",V,[$.selectedCategory.id?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)(" Параметри в даній категорії відсутні ")],64)):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.Uk)(" Оберіть категорію для відображення параметрів ")],64))]))])])])]),(0,n.Wm)(H,{formData:$.categoryData,action:$.action,onRefreshData:U.fetchAdditionalParamCategories},null,8,["formData","action","onRefreshData"]),(0,n.Wm)(j,{formData:$.paramData,category:$.selectedCategory,action:$.action,valueTypes:$.valueTypes,onRefreshData:a[4]||(a[4]=function(t){return U.fetchAdditionalParams($.paramData.category_id)})},null,8,["formData","category","action","valueTypes"])],64)}],["__scopeId","data-v-4cf46395"]])}}]);