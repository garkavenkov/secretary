"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[123],{6287:(a,t,e)=>{e.d(t,{Z:()=>i});var n=e(3645),r=e.n(n)()((function(a){return a[1]}));r.push([a.id,"tr[data-v-4cf46395]{vertical-align:middle}tr.selected[data-v-4cf46395]{background:hsla(220,4%,85%,.22)}.actions[data-v-4cf46395]{display:flex}.actions>div[data-v-4cf46395]{flex:1 0 0;text-align:center}",""]);const i=r},1126:(a,t,e)=>{e.d(t,{Z:()=>i});var n=e(3645),r=e.n(n)()((function(a){return a[1]}));r.push([a.id,".category-name[data-v-33274355]{font-size:1rem}",""]);const i=r},6850:(a,t,e)=>{e.r(t),e.d(t,{default:()=>ka});var n=e(8222),r=function(a){return(0,n.dD)("data-v-4cf46395"),a=a(),(0,n.Cn)(),a},i={class:"row"},o={class:"col"},l={class:"card"},s={class:"card-header"},d=r((function(){return(0,n._)("div",{class:"dictionary-name__wrapper"},[(0,n._)("span",null,"Категорії додаткових параметрів")],-1)})),c=[r((function(){return(0,n._)("span",{class:"mdi mdi-refresh"},null,-1)}))],m=[r((function(){return(0,n._)("span",{class:"mdi mdi-plus-thick"},null,-1)}))],u={class:"card-body"},p={class:"table table-sm table-bordered"},f=r((function(){return(0,n._)("thead",{class:"table-secondary"},[(0,n._)("tr",null,[(0,n._)("th",null,"Модель"),(0,n._)("th",null,"Назва"),(0,n._)("th")])],-1)})),_=["onClick"],y={class:"text-center"},g=["onClick"],h=[r((function(){return(0,n._)("span",{class:"mdi mdi-pencil"},null,-1)}))],b={class:"col"},v={class:"card"},D={class:"card-header"},C={class:"dictionary-name__wrapper"},w=[r((function(){return(0,n._)("span",{class:"mdi mdi-refresh"},null,-1)}))],k=[r((function(){return(0,n._)("span",{class:"mdi mdi-plus-thick"},null,-1)}))],F={class:"card-body"},P={key:0,class:"table table-sm table-bordered"},x=r((function(){return(0,n._)("thead",{class:"table-secondary"},[(0,n._)("tr",null,[(0,n._)("th",null,"Код"),(0,n._)("th",null,"Назва"),(0,n._)("th",null,"Значення"),(0,n._)("th",{class:"text-center",title:"Системний параметр або параметр користувача"},"Тип"),(0,n._)("th")])],-1)})),T={class:"text-center"},A={key:0,class:"mdi mdi-cog-outline text-danger",title:"Системний параметр"},S={key:1,class:"mdi mdi-account-outline text-primary",title:"Параментр користувача"},V={class:"actions"},Z=["onClick"],z=[r((function(){return(0,n._)("span",{class:"mdi mdi-pencil"},null,-1)}))],E=["onClick"],I=[r((function(){return(0,n._)("span",{class:"mdi mdi-trash-can"},null,-1)}))],N={key:1,class:"text-center text-muted p-3"};var q=e(8877),U={class:"row mb-3"},H={class:"col"},Y=(0,n._)("label",{for:"categoryCode",class:"form-label"},"Код",-1),j={id:"categoryCodeValidation",class:"invalid-feedback"},M={class:"row mb-3"},B={class:"col"},K=(0,n._)("label",{for:"categoryName",class:"form-label"},"Назва",-1),O={id:"categoryNameValidation",class:"invalid-feedback"};var R=e(6036),W=e(3753),$=e(2965);const G={name:"AdditionalParamCategoryForm",mixins:[W.Z,$.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},data:function(){return{apiUrl:"/api/v1/additional-param-categories"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.errors=[]},closeForm:function(){this.clearFormData()}},components:{ModalForm:R.Z}};var J=e(3744);const L=(0,J.Z)(G,[["render",function(a,t,e,r,i,o){var l=(0,n.up)("ModalForm");return(0,n.wg)(),(0,n.j4)(l,{formId:"CategoryForm",onSubmitData:a.submitData,onCloseForm:o.closeForm},{default:(0,n.w5)((function(){return[(0,n._)("div",U,[(0,n._)("div",H,[Y,(0,n.wy)((0,n._)("input",{type:"text",class:(0,n.C_)(["form-control",a.hasError("code")?"is-invalid":""]),id:"categoryCode","onUpdate:modelValue":t[0]||(t[0]=function(a){return e.formData.code=a})},null,2),[[n.nr,e.formData.code]]),(0,n._)("div",j,(0,n.zw)(a.getError("code")),1)])]),(0,n._)("div",M,[(0,n._)("div",B,[K,(0,n.wy)((0,n._)("input",{type:"text",class:(0,n.C_)(["form-control",a.hasError("name")?"is-invalid":""]),id:"categoryName","onUpdate:modelValue":t[1]||(t[1]=function(a){return e.formData.name=a})},null,2),[[n.nr,e.formData.name]]),(0,n._)("div",O,(0,n.zw)(a.getError("name")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]]);var Q=function(a){return(0,n.dD)("data-v-33274355"),a=a(),(0,n.Cn)(),a},X={class:"row mb-3"},aa={class:"col"},ta={class:"category-name"},ea={class:"row mb-3"},na={class:"col"},ra=Q((function(){return(0,n._)("label",{for:"paramValueType",class:"form-label"},"Тип значення",-1)})),ia=Q((function(){return(0,n._)("option",{disabled:"",value:"0"},"Оберіть тип значення",-1)})),oa=["value"],la={id:"paramValueTypeValidation",class:"invalid-feedback"},sa={class:"row mb-3"},da={class:"col"},ca=Q((function(){return(0,n._)("label",{for:"paramCode",class:"form-label"},"Код",-1)})),ma={id:"paramCodeValidation",class:"invalid-feedback"},ua={class:"row mb-3"},pa={class:"col"},fa=Q((function(){return(0,n._)("label",{for:"paramName",class:"form-label"},"Назва",-1)})),_a={id:"paramNameValidation",class:"invalid-feedback"};const ya={name:"AdditionalParamForm",mixins:[W.Z,$.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"},category:{type:Object,required:!0},valueTypes:{type:Array,required:!0}},data:function(){return{apiUrl:"/api/v1/additional-params"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.formData.value_type_id=0,this.errors=[]},closeForm:function(){this.clearFormData()}},computed:{readyFodSubmit:function(){return""!==this.formData.name&&""!==this.formData.code}},components:{ModalForm:R.Z}};var ga=e(3379),ha=e.n(ga),ba=e(1126),va={insert:"head",singleton:!1};ha()(ba.Z,va);ba.Z.locals;const Da={name:"AdditionalParams",data:function(){return{categories:[],params:[],valueTypes:[],categoryData:{code:"",name:""},selectedCategory:{},paramData:{category_id:null,code:"",name:"",value_type_id:0},action:"",modalTitle:"",modalSubmitCaption:""}},provide:function(){var a=this;return{modalTitle:(0,n.Fl)((function(){return a.modalTitle})),modalSubmitCaption:(0,n.Fl)((function(){return a.modalSubmitCaption}))}},methods:{fetchAdditionalParamCategories:function(){var a=this;axios.get("/api/v1/additional-param-categories").then((function(t){a.categories=t.data.data}))},fetchAdditionalParams:function(a){var t=this;axios.get("/api/v1/additional-params?category_id=".concat(a)).then((function(a){t.params=a.data.data}))},fetchAdditionalParamValueTypes:function(){var a=this;axios.get("/api/v1/additional-param-value-types").then((function(t){a.valueTypes=t.data.data}))},getCategoryParams:function(a){this.selectedCategory=a,this.paramData.category_id=a.id,this.fetchAdditionalParams(a.id)},newCategory:function(){this.modalTitle="Нова категорія",this.modalSubmitCaption="Додати",this.action="create",new q.u_(document.getElementById("CategoryForm")).show()},newParam:function(){this.modalTitle="Новий параметр",this.modalSubmitCaption="Додати",this.action="create",this.paramData.category_id=this.selectedCategory.id,new q.u_(document.getElementById("ParamForm")).show()},editCategory:function(a){this.modalTitle="Редагування категорії",this.modalSubmitCaption="Зберегти",this.action="update",this.categoryData.id=a.id,this.categoryData.code=a.code,this.categoryData.name=a.name,new q.u_(document.getElementById("CategoryForm")).show()},editParam:function(a){this.modalTitle="Редагування параметру",this.modalSubmitCaption="Зберегти",this.action="update",this.paramData.id=a.id,this.paramData.category_id=a.category_id,this.paramData.code=a.code,this.paramData.name=a.name,this.paramData.value_type_id=a.value_type_id,new q.u_(document.getElementById("ParamForm")).show()},deleteParam:function(a){var t=this;this.$confirmDelete("Ви дійсно бажаєте видалити додатковий параметр","Видалення параметру може призвести до неочікуваних результатів в звітах.").then((function(e){e.isConfirmed&&axios.delete("/api/v1/additional-params/".concat(a.id)).then((function(e){t.$toast(e.data.message),t.fetchAdditionalParams(a.category_id)}))}))}},computed:{selectedCategoryName:function(){var a;return null!==(a=this.selectedCategory)&&void 0!==a&&a.name?'. Категорія: "'.concat(this.selectedCategory.name,'"'):""}},components:{CategoryForm:L,ParamForm:(0,J.Z)(ya,[["render",function(a,t,e,r,i,o){var l=(0,n.up)("ModalForm");return(0,n.wg)(),(0,n.j4)(l,{formId:"ParamForm",onSubmitData:a.submitData,onCloseForm:o.closeForm,sumbitIsDisabled:!o.readyFodSubmit},{default:(0,n.w5)((function(){return[(0,n._)("div",X,[(0,n._)("div",aa,[(0,n._)("span",ta,"Категорія: "+(0,n.zw)(e.category.name),1)])]),(0,n._)("div",ea,[(0,n._)("div",na,[ra,(0,n.wy)((0,n._)("select",{class:(0,n.C_)(["form-control",a.hasError("value_type_id")?"is-invalid":""]),id:"paramValueType","onUpdate:modelValue":t[0]||(t[0]=function(a){return e.formData.value_type_id=a})},[ia,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.valueTypes,(function(a){return(0,n.wg)(),(0,n.iD)("option",{value:a.id,key:a.id},(0,n.zw)(a.description),9,oa)})),128))],2),[[n.bM,e.formData.value_type_id]]),(0,n._)("div",la,(0,n.zw)(a.getError("value_type_id")),1)])]),(0,n._)("div",sa,[(0,n._)("div",da,[ca,(0,n.wy)((0,n._)("input",{type:"text",class:(0,n.C_)(["form-control",a.hasError("code")?"is-invalid":""]),id:"paramCode","onUpdate:modelValue":t[1]||(t[1]=function(a){return e.formData.code=a})},null,2),[[n.nr,e.formData.code]]),(0,n._)("div",ma,(0,n.zw)(a.getError("code")),1)])]),(0,n._)("div",ua,[(0,n._)("div",pa,[fa,(0,n.wy)((0,n._)("input",{type:"text",class:(0,n.C_)(["form-control",a.hasError("name")?"is-invalid":""]),id:"paramName","onUpdate:modelValue":t[2]||(t[2]=function(a){return e.formData.name=a})},null,2),[[n.nr,e.formData.name]]),(0,n._)("div",_a,(0,n.zw)(a.getError("name")),1)])])]})),_:1},8,["onSubmitData","onCloseForm","sumbitIsDisabled"])}],["__scopeId","data-v-33274355"]])},created:function(){this.fetchAdditionalParamCategories(),this.fetchAdditionalParamValueTypes()}};var Ca=e(6287),wa={insert:"head",singleton:!1};ha()(Ca.Z,wa);Ca.Z.locals;const ka=(0,J.Z)(Da,[["render",function(a,t,e,r,q,U){var H=(0,n.up)("breadcrumbs"),Y=(0,n.up)("CategoryForm"),j=(0,n.up)("ParamForm");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(H),(0,n._)("div",i,[(0,n._)("div",o,[(0,n._)("div",l,[(0,n._)("div",s,[d,(0,n._)("div",null,[(0,n._)("button",{class:"btn btn-sm btn-outline-secondary btn-transparent me-2",onClick:t[0]||(t[0]=function(){return U.fetchAdditionalParamCategories&&U.fetchAdditionalParamCategories.apply(U,arguments)}),title:"Оновити дані"},c),(0,n._)("button",{class:"btn btn-sm btn-outline-secondary btn-transparent",onClick:t[1]||(t[1]=function(){return U.newCategory&&U.newCategory.apply(U,arguments)}),title:"Додати категорію"},m)])]),(0,n._)("div",u,[(0,n._)("table",p,[f,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(q.categories,(function(a){return(0,n.wg)(),(0,n.iD)("tr",{key:a.id,class:(0,n.C_)({selected:q.selectedCategory.id==a.id})},[(0,n._)("td",null,[(0,n._)("a",{onClick:function(t){return U.getCategoryParams(a)},style:{cursor:"pointer"}},(0,n.zw)(a.code),9,_)]),(0,n._)("td",null,(0,n.zw)(a.name),1),(0,n._)("td",y,[(0,n._)("button",{class:"btn btn-sm btn-outline-warning btn-transparent",title:"Редагувати категорію",onClick:function(t){return U.editCategory(a)}},h,8,g)])],2)})),128))])])])])]),(0,n._)("div",b,[(0,n._)("div",v,[(0,n._)("div",D,[(0,n._)("div",C,[(0,n._)("span",null,"Додаткові параметри"+(0,n.zw)(U.selectedCategoryName),1)]),(0,n._)("div",null,[""!==U.selectedCategoryName?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-sm btn-outline-secondary btn-transparent me-2",onClick:t[2]||(t[2]=function(a){return U.fetchAdditionalParams(q.selectedCategory.id)}),title:"Оновити дані"},w)):(0,n.kq)("",!0),""!==U.selectedCategoryName?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-sm btn-outline-secondary btn-transparent",onClick:t[3]||(t[3]=function(){return U.newParam&&U.newParam.apply(U,arguments)}),title:"Додати параметр"},k)):(0,n.kq)("",!0)])]),(0,n._)("div",F,[q.params.length>0?((0,n.wg)(),(0,n.iD)("table",P,[x,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(q.params,(function(a){return(0,n.wg)(),(0,n.iD)("tr",{key:a.id},[(0,n._)("td",null,(0,n.zw)(a.code),1),(0,n._)("td",null,(0,n.zw)(a.name),1),(0,n._)("td",null,(0,n.zw)(a.value_type.name),1),(0,n._)("td",T,[a.is_system?((0,n.wg)(),(0,n.iD)("span",A)):((0,n.wg)(),(0,n.iD)("span",S))]),(0,n._)("td",V,[(0,n._)("div",null,[(0,n._)("button",{class:"btn btn-sm btn-outline-warning btn-transparent",title:"Редагувати параметр",onClick:function(t){return U.editParam(a)}},z,8,Z)]),(0,n._)("div",null,[a.is_system?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-sm btn-outline-danger btn-transparent",title:"Видалити параметр",onClick:function(t){return U.deleteParam(a)}},I,8,E))])])])})),128))])])):((0,n.wg)(),(0,n.iD)("div",N,[q.selectedCategory.id?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)(" Параметри в даній категорії відсутні ")],64)):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.Uk)(" Оберіть категорію для відображення параметрів ")],64))]))])])])]),(0,n.Wm)(Y,{formData:q.categoryData,action:q.action,onRefreshData:U.fetchAdditionalParamCategories},null,8,["formData","action","onRefreshData"]),(0,n.Wm)(j,{formData:q.paramData,category:q.selectedCategory,action:q.action,valueTypes:q.valueTypes,onRefreshData:t[4]||(t[4]=function(a){return U.fetchAdditionalParams(q.paramData.category_id)})},null,8,["formData","category","action","valueTypes"])],64)}],["__scopeId","data-v-4cf46395"]])}}]);