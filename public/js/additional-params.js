"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[123],{4168:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(3645),n=a.n(o)()((function(e){return e[1]}));n.push([e.id,"tr[data-v-016b1dc4]{vertical-align:middle}th.actions[data-v-016b1dc4]{width:100px}td.actions[data-v-016b1dc4]{display:flex}",""]);const r=n},1126:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(3645),n=a.n(o)()((function(e){return e[1]}));n.push([e.id,".category-name[data-v-33274355]{font-size:1rem}",""]);const r=n},6788:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ge});var o=a(8222),n=function(e){return(0,o.pushScopeId)("data-v-016b1dc4"),e=e(),(0,o.popScopeId)(),e},r={class:"row"},l={class:"col-md-5"},i={class:"card"},c={class:"card-header"},d=n((function(){return(0,o.createElementVNode)("div",{class:"dictionary-name__wrapper"},[(0,o.createElementVNode)("span",null,"Категорії додаткових параметрів")],-1)})),s={class:"d-flex"},m={class:"card-body"},u={class:"table table-sm table-bordered"},p=n((function(){return(0,o.createElementVNode)("thead",{class:"table-secondary"},[(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("th",null,"Модель"),(0,o.createElementVNode)("th",null,"Назва"),(0,o.createElementVNode)("th",{class:"actions"})])],-1)})),y=["onClick"],f={class:"actions"},h={class:"col-md-7"},v={class:"card"},g={class:"card-header"},V={class:"dictionary-name__wrapper"},E={class:"d-flex"},b={class:"card-body"},C={key:0,class:"table table-sm table-bordered"},N=n((function(){return(0,o.createElementVNode)("thead",{class:"table-secondary"},[(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("th",null,"Код"),(0,o.createElementVNode)("th",null,"Назва"),(0,o.createElementVNode)("th",null,"Значення"),(0,o.createElementVNode)("th",{class:"text-center",title:"Системний параметр або параметр користувача"},"Тип"),(0,o.createElementVNode)("th",{class:"actions"})])],-1)})),D={class:"text-center"},k={key:0,title:"Системний параметр"},B={key:1,title:"Параментр користувача"},_={class:"actions"},S={key:1,class:"text-center text-muted p-3"};var F=a(8877),w=a(6196),P=a(5317),x={class:"row mb-3"},T={class:"col"},I=(0,o.createElementVNode)("label",{for:"categoryCode",class:"form-label"},"Код",-1),Z={id:"categoryCodeValidation",class:"invalid-feedback"},A={class:"row mb-3"},M={class:"col"},z=(0,o.createElementVNode)("label",{for:"categoryName",class:"form-label"},"Назва",-1),U={id:"categoryNameValidation",class:"invalid-feedback"};var q=a(4170),R=a(3753),j=a(2965);const L={name:"AdditionalParamCategoryForm",mixins:[R.Z,j.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},data:function(){return{apiUrl:"/api/v1/additional-param-categories"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.errors=[]},closeForm:function(){this.clearFormData()}},components:{ModalForm:q.Z}};var O=a(3744);const $=(0,O.Z)(L,[["render",function(e,t,a,n,r,l){var i=(0,o.resolveComponent)("ModalForm");return(0,o.openBlock)(),(0,o.createBlock)(i,{formId:"CategoryForm",onSubmitData:e.submitData,onCloseForm:l.closeForm},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",x,[(0,o.createElementVNode)("div",T,[I,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("code")?"is-invalid":""]),id:"categoryCode","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.formData.code=e})},null,2),[[o.vModelText,a.formData.code]]),(0,o.createElementVNode)("div",Z,(0,o.toDisplayString)(e.getError("code")),1)])]),(0,o.createElementVNode)("div",A,[(0,o.createElementVNode)("div",M,[z,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"categoryName","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.formData.name=e})},null,2),[[o.vModelText,a.formData.name]]),(0,o.createElementVNode)("div",U,(0,o.toDisplayString)(e.getError("name")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]]);var Y=function(e){return(0,o.pushScopeId)("data-v-33274355"),e=e(),(0,o.popScopeId)(),e},G={class:"row mb-3"},H={class:"col"},J={class:"category-name"},K={class:"row mb-3"},Q={class:"col"},W=Y((function(){return(0,o.createElementVNode)("label",{for:"paramValueType",class:"form-label"},"Тип значення",-1)})),X=Y((function(){return(0,o.createElementVNode)("option",{disabled:"",value:"0"},"Оберіть тип значення",-1)})),ee=["value"],te={id:"paramValueTypeValidation",class:"invalid-feedback"},ae={class:"row mb-3"},oe={class:"col"},ne=Y((function(){return(0,o.createElementVNode)("label",{for:"paramCode",class:"form-label"},"Код",-1)})),re={id:"paramCodeValidation",class:"invalid-feedback"},le={class:"row mb-3"},ie={class:"col"},ce=Y((function(){return(0,o.createElementVNode)("label",{for:"paramName",class:"form-label"},"Назва",-1)})),de={id:"paramNameValidation",class:"invalid-feedback"};const se={name:"AdditionalParamForm",mixins:[R.Z,j.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"},category:{type:Object,required:!0},valueTypes:{type:Array,required:!0}},data:function(){return{apiUrl:"/api/v1/additional-params"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.formData.value_type_id=0,this.errors=[]},closeForm:function(){this.clearFormData()}},computed:{readyFodSubmit:function(){return""!==this.formData.name&&""!==this.formData.code}},components:{ModalForm:q.Z}};var me=a(3379),ue=a.n(me),pe=a(1126),ye={insert:"head",singleton:!1};ue()(pe.Z,ye);pe.Z.locals;const fe={name:"AdditionalParams",data:function(){return{categories:[],params:[],valueTypes:[],categoryData:{code:"",name:""},selectedCategory:{},paramData:{category_id:null,code:"",name:"",value_type_id:0},action:"",modalTitle:"",modalSubmitCaption:"",pathSystemParamIcon:P.eYM,pathUserParamIcon:P.jiR}},provide:function(){var e=this;return{modalTitle:(0,o.computed)((function(){return e.modalTitle})),modalSubmitCaption:(0,o.computed)((function(){return e.modalSubmitCaption}))}},methods:{fetchAdditionalParamCategories:function(){var e=this;axios.get("/api/v1/additional-param-categories").then((function(t){e.categories=t.data.data}))},fetchAdditionalParams:function(e){var t=this;axios.get("/api/v1/additional-params?category_id=".concat(e)).then((function(e){t.params=e.data.data}))},fetchAdditionalParamValueTypes:function(){var e=this;axios.get("/api/v1/additional-param-value-types").then((function(t){e.valueTypes=t.data.data}))},getCategoryParams:function(e){this.selectedCategory=e,this.paramData.category_id=e.id,this.fetchAdditionalParams(e.id)},newCategory:function(){this.modalTitle="Нова категорія",this.modalSubmitCaption="Додати",this.action="create",new F.u_(document.getElementById("CategoryForm")).show()},newParam:function(){this.modalTitle="Новий параметр",this.modalSubmitCaption="Додати",this.action="create",this.paramData.category_id=this.selectedCategory.id,new F.u_(document.getElementById("ParamForm")).show()},editCategory:function(e){this.modalTitle="Редагування категорії",this.modalSubmitCaption="Зберегти",this.action="update",this.categoryData.id=e.id,this.categoryData.code=e.code,this.categoryData.name=e.name,new F.u_(document.getElementById("CategoryForm")).show()},editParam:function(e){this.modalTitle="Редагування параметру",this.modalSubmitCaption="Зберегти",this.action="update",this.paramData.id=e.id,this.paramData.category_id=e.category_id,this.paramData.code=e.code,this.paramData.name=e.name,this.paramData.value_type_id=e.value_type_id,new F.u_(document.getElementById("ParamForm")).show()},deleteParam:function(e){var t=this;this.$confirmDelete("Ви дійсно бажаєте видалити додатковий параметр","Видалення параметру може призвести до неочікуваних результатів в звітах.").then((function(a){a.isConfirmed&&axios.delete("/api/v1/additional-params/".concat(e.id)).then((function(a){t.$toast(a.data.message),t.fetchAdditionalParams(e.category_id)}))}))}},computed:{selectedCategoryName:function(){var e;return null!==(e=this.selectedCategory)&&void 0!==e&&e.name?'. Категорія: "'.concat(this.selectedCategory.name,'"'):""}},components:{CategoryForm:$,ParamForm:(0,O.Z)(se,[["render",function(e,t,a,n,r,l){var i=(0,o.resolveComponent)("ModalForm");return(0,o.openBlock)(),(0,o.createBlock)(i,{formId:"ParamForm",onSubmitData:e.submitData,onCloseForm:l.closeForm,sumbitIsDisabled:!l.readyFodSubmit},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",G,[(0,o.createElementVNode)("div",H,[(0,o.createElementVNode)("span",J,"Категорія: "+(0,o.toDisplayString)(a.category.name),1)])]),(0,o.createElementVNode)("div",K,[(0,o.createElementVNode)("div",Q,[W,(0,o.withDirectives)((0,o.createElementVNode)("select",{class:(0,o.normalizeClass)(["form-control",e.hasError("value_type_id")?"is-invalid":""]),id:"paramValueType","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.formData.value_type_id=e})},[X,((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.valueTypes,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e.id,key:e.id},(0,o.toDisplayString)(e.description),9,ee)})),128))],2),[[o.vModelSelect,a.formData.value_type_id]]),(0,o.createElementVNode)("div",te,(0,o.toDisplayString)(e.getError("value_type_id")),1)])]),(0,o.createElementVNode)("div",ae,[(0,o.createElementVNode)("div",oe,[ne,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("code")?"is-invalid":""]),id:"paramCode","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.formData.code=e})},null,2),[[o.vModelText,a.formData.code]]),(0,o.createElementVNode)("div",re,(0,o.toDisplayString)(e.getError("code")),1)])]),(0,o.createElementVNode)("div",le,[(0,o.createElementVNode)("div",ie,[ce,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"paramName","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.formData.name=e})},null,2),[[o.vModelText,a.formData.name]]),(0,o.createElementVNode)("div",de,(0,o.toDisplayString)(e.getError("name")),1)])])]})),_:1},8,["onSubmitData","onCloseForm","sumbitIsDisabled"])}],["__scopeId","data-v-33274355"]]),ButtonRefreshData:a(5796).Z,SvgIcon:w.Z},created:function(){this.fetchAdditionalParamCategories(),this.fetchAdditionalParamValueTypes()}};var he=a(4168),ve={insert:"head",singleton:!1};ue()(he.Z,ve);he.Z.locals;const ge=(0,O.Z)(fe,[["render",function(e,t,a,n,F,w){var P=(0,o.resolveComponent)("ButtonAdd"),x=(0,o.resolveComponent)("ButtonRefreshData"),T=(0,o.resolveComponent)("ButtonEdit"),I=(0,o.resolveComponent)("ButtonDelete"),Z=(0,o.resolveComponent)("SvgIcon"),A=(0,o.resolveComponent)("CategoryForm"),M=(0,o.resolveComponent)("ParamForm");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("div",c,[d,(0,o.createElementVNode)("div",s,[(0,o.createVNode)(P,{buttonClass:"btn-outline-secondary btn-transparent p-2",onClick:w.newCategory,title:"Додати категорію"},null,8,["onClick"]),(0,o.createVNode)(x,{buttonClass:"btn-outline-secondary btn-transparent ms-2 p-2",onClick:w.fetchAdditionalParamCategories},null,8,["onClick"])])]),(0,o.createElementVNode)("div",m,[(0,o.createElementVNode)("table",u,[p,(0,o.createElementVNode)("tbody",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(F.categories,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("tr",{key:e.id,class:(0,o.normalizeClass)({selected:F.selectedCategory.id==e.id})},[(0,o.createElementVNode)("td",null,[(0,o.createElementVNode)("a",{onClick:function(t){return w.getCategoryParams(e)},style:{cursor:"pointer"}},(0,o.toDisplayString)(e.code),9,y)]),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.name),1),(0,o.createElementVNode)("td",f,[(0,o.createVNode)(T,{onClick:function(t){return w.editCategory(e)},title:"Редагувати категорію",buttonClass:"btn-outline-warning btn-transparent p-2"},null,8,["onClick"]),(0,o.createVNode)(I,{buttonClass:"btn-outline-danger btn-transparent ms-3 p-2",title:"Видалити категорію",onClick:t[0]||(t[0]=function(){})})])],2)})),128))])])])])]),(0,o.createElementVNode)("div",h,[(0,o.createElementVNode)("div",v,[(0,o.createElementVNode)("div",g,[(0,o.createElementVNode)("div",V,[(0,o.createElementVNode)("span",null,"Додаткові параметри"+(0,o.toDisplayString)(w.selectedCategoryName),1)]),(0,o.createElementVNode)("div",E,[(0,o.createVNode)(x,{disabled:""==w.selectedCategoryName,buttonClass:"btn-outline-secondary btn-transparent me-2 p-2",onClick:t[1]||(t[1]=function(e){return w.fetchAdditionalParams(F.selectedCategory.id)})},null,8,["disabled"]),""!==w.selectedCategoryName?((0,o.openBlock)(),(0,o.createBlock)(P,{key:0,buttonClass:"btn btn-sm btn-outline-secondary btn-transparent p-2",onClick:w.newParam,title:"Додати параметр"},null,8,["onClick"])):(0,o.createCommentVNode)("",!0)])]),(0,o.createElementVNode)("div",b,[F.params.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("table",C,[N,(0,o.createElementVNode)("tbody",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(F.params,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("tr",{key:e.id},[(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.code),1),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.name),1),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.value_type.name),1),(0,o.createElementVNode)("td",D,[e.is_system?((0,o.openBlock)(),(0,o.createElementBlock)("span",k,[(0,o.createVNode)(Z,{type:"mdi",size:16,path:F.pathSystemParamIcon,class:"mdi mdi-cog-outline text-danger"},null,8,["path"])])):((0,o.openBlock)(),(0,o.createElementBlock)("span",B,[(0,o.createVNode)(Z,{type:"mdi",path:F.pathUserParamIcon,size:16,class:"mdi mdi-account-outline text-primary"},null,8,["path"])]))]),(0,o.createElementVNode)("td",_,[(0,o.createVNode)(T,{onClick:function(t){return w.editParam(e)},title:"Редагувати параметр",buttonClass:"btn-outline-warning btn-transparent p-2"},null,8,["onClick"]),e.is_system?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(I,{key:0,buttonClass:"btn-outline-danger btn-transparent ms-3 p-2",title:"Видалити параметр",onClick:function(t){return w.deleteParam(e)}},null,8,["onClick"]))])])})),128))])])):((0,o.openBlock)(),(0,o.createElementBlock)("div",S,[F.selectedCategory.id?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createTextVNode)(" Параметри в даній категорії відсутні ")],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createTextVNode)(" Оберіть категорію для відображення параметрів ")],64))]))])])])]),(0,o.createVNode)(A,{formData:F.categoryData,action:F.action,onRefreshData:w.fetchAdditionalParamCategories},null,8,["formData","action","onRefreshData"]),(0,o.createVNode)(M,{formData:F.paramData,category:F.selectedCategory,action:F.action,valueTypes:F.valueTypes,onRefreshData:t[2]||(t[2]=function(e){return w.fetchAdditionalParams(F.paramData.category_id)})},null,8,["formData","category","action","valueTypes"])],64)}],["__scopeId","data-v-016b1dc4"]])}}]);