"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[123],{2965:(e,t,a)=>{a.d(t,{Z:()=>o});const o={data:function(){return{errors:{}}},methods:{getError:function(e){return this.errors&&this.errors[e]?this.errors[e][0]:""},hasError:function(e){return!(!this.errors||!this.errors[e])}},created:function(){var e=this,t=this,a=Object.keys(this.formData);this.excludeFiledsFromCreateWatch&&(a=a.filter((function(t){return!e.excludeFiledsFromCreateWatch.includes(t)}))),a.forEach((function(e){var a="formData.".concat(e);t.$watch(a,(function(){this.errors[e]&&delete this.errors[e]}))}))}}},3753:(e,t,a)=>{a.d(t,{Z:()=>o});const o={methods:{submitData:function(){var e=this;"create"==this.action?axios.post(this.apiUrl,this.formData).then((function(t){e.$emit("refreshData"),e.$toast(t.data.message),void 0!==e.clearFormData&&e.clearFormData()})).catch((function(t){var a;e.errors=null===(a=t.response)||void 0===a?void 0:a.data.errors})):"update"==this.action&&axios.patch("".concat(this.apiUrl,"/").concat(this.formData.id),this.formData).then((function(t){e.errors=[],e.$emit("refreshData"),e.$toast(t.data.message)})).catch((function(t){var a;e.errors=null===(a=t.response)||void 0===a?void 0:a.data.errors}))}}}},4168:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(3645),n=a.n(o)()((function(e){return e[1]}));n.push([e.id,"tr[data-v-016b1dc4]{vertical-align:middle}th.actions[data-v-016b1dc4]{width:100px}td.actions[data-v-016b1dc4]{display:flex}",""]);const r=n},1126:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(3645),n=a.n(o)()((function(e){return e[1]}));n.push([e.id,".category-name[data-v-33274355]{font-size:1rem}",""]);const r=n},5796:(e,t,a)=>{a.d(t,{Z:()=>i});var o=a(8222);var n=a(7341),r=a(5317);const l={name:"ButtonRefreshData",props:{size:{type:Number,required:!1,default:18},title:{type:String,required:!1,default:"Оновити дані"},buttonClass:{type:String,required:!1,default:""}},emits:["click"],data:function(){return{path:r.jcD}},components:{IconButton:n.Z}};const i=(0,a(3744).Z)(l,[["render",function(e,t,a,n,r,l){var i=(0,o.resolveComponent)("IconButton");return(0,o.openBlock)(),(0,o.createBlock)(i,{class:(0,o.normalizeClass)(a.buttonClass),title:a.title,size:a.size,mdiPath:r.path,onClick:t[0]||(t[0]=function(t){return e.$emit("click",t)})},{default:(0,o.withCtx)((function(){return[(0,o.renderSlot)(e.$slots,"default")]})),_:3},8,["class","title","size","mdiPath"])}]])},4170:(e,t,a)=>{a.d(t,{Z:()=>u});var o=a(8222),n=["id"],r={class:"modal-header"},l={class:"d-flex align-items-center"},i=["innerHTML"],c={class:"modal-body"},d={key:0,class:"modal-footer justify-content-between"},s=["disabled"];const m={name:"ModalForm",props:{formId:{type:String,required:!0},modalClass:{type:String,required:!1,default:""},modalContentClass:{type:String,required:!1,default:""},showFooter:{type:Boolean,required:!1,default:function(){return!0}},sumbitIsDisabled:{type:Boolean,required:!1,default:function(){return!1}},title:{type:String,required:!1,default:""},submitCaption:{type:String,required:!1,default:""}},inject:{modalTitle:{from:"modalTitle",default:"Новий запис"},modalSubmitCaption:{from:"modalSubmitCaption",default:"Додати"}},data:function(){return{}},computed:{modalFormTitle:function(){return this.title?this.title:this.modalTitle},modalFormSubmitCaption:function(){return this.submitCaption?this.submitCaption:this.modalSubmitCaption}}};const u=(0,a(3744).Z)(m,[["render",function(e,t,a,m,u,p){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"modal fade",id:a.formId,tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["modal-dialog",a.modalClass])},[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["modal-content",a.modalContentClass])},[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("h1",{class:"modal-title fs-5",innerHTML:p.modalFormTitle},null,8,i),(0,o.renderSlot)(e.$slots,"modalHeader")]),(0,o.createElementVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=function(t){return e.$emit("closeForm")})})]),(0,o.createElementVNode)("div",c,[(0,o.renderSlot)(e.$slots,"default")]),a.showFooter?((0,o.openBlock)(),(0,o.createElementBlock)("div",d,[(0,o.createElementVNode)("div",null,[(0,o.renderSlot)(e.$slots,"footer")]),(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=function(t){return e.$emit("closeForm")})}," Відмінити "),(0,o.createElementVNode)("button",{type:"button",class:(0,o.normalizeClass)(["ms-4 btn",[a.sumbitIsDisabled?"btn-outline-primary":"btn-primary"]]),onClick:t[2]||(t[2]=function(t){return e.$emit("submitData")}),disabled:a.sumbitIsDisabled},(0,o.toDisplayString)(p.modalFormSubmitCaption),11,s)])])):(0,o.createCommentVNode)("",!0)],2)],2)],8,n)}]])},6788:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ve});var o=a(8222),n=function(e){return(0,o.pushScopeId)("data-v-016b1dc4"),e=e(),(0,o.popScopeId)(),e},r={class:"row"},l={class:"col-md-5"},i={class:"card"},c={class:"card-header"},d=n((function(){return(0,o.createElementVNode)("div",{class:"dictionary-name__wrapper"},[(0,o.createElementVNode)("span",null,"Категорії додаткових параметрів")],-1)})),s={class:"d-flex"},m={class:"card-body"},u={class:"table table-sm table-bordered"},p=n((function(){return(0,o.createElementVNode)("thead",{class:"table-secondary"},[(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("th",null,"Модель"),(0,o.createElementVNode)("th",null,"Назва"),(0,o.createElementVNode)("th",{class:"actions"})])],-1)})),f=["onClick"],h={class:"actions"},y={class:"col-md-7"},b={class:"card"},v={class:"card-header"},C={class:"dictionary-name__wrapper"},g={class:"d-flex"},E={class:"card-body"},V={key:0,class:"table table-sm table-bordered"},N=n((function(){return(0,o.createElementVNode)("thead",{class:"table-secondary"},[(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("th",null,"Код"),(0,o.createElementVNode)("th",null,"Назва"),(0,o.createElementVNode)("th",null,"Значення"),(0,o.createElementVNode)("th",{class:"text-center",title:"Системний параметр або параметр користувача"},"Тип"),(0,o.createElementVNode)("th",{class:"actions"})])],-1)})),D={class:"text-center"},k={key:0,title:"Системний параметр"},B={key:1,title:"Параментр користувача"},S={class:"actions"},F={key:1,class:"text-center text-muted p-3"};var _=a(8877),w=a(6196),x=a(5317),P={class:"row mb-3"},T={class:"col"},I=(0,o.createElementVNode)("label",{for:"categoryCode",class:"form-label"},"Код",-1),Z={id:"categoryCodeValidation",class:"invalid-feedback"},z={class:"row mb-3"},q={class:"col"},A=(0,o.createElementVNode)("label",{for:"categoryName",class:"form-label"},"Назва",-1),$={id:"categoryNameValidation",class:"invalid-feedback"};var M=a(4170),U=a(3753),j=a(2965);const R={name:"AdditionalParamCategoryForm",mixins:[U.Z,j.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},data:function(){return{apiUrl:"/api/v1/additional-param-categories"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.errors=[]},closeForm:function(){this.clearFormData()}},components:{ModalForm:M.Z}};var L=a(3744);const O=(0,L.Z)(R,[["render",function(e,t,a,n,r,l){var i=(0,o.resolveComponent)("ModalForm");return(0,o.openBlock)(),(0,o.createBlock)(i,{formId:"CategoryForm",onSubmitData:e.submitData,onCloseForm:l.closeForm},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",P,[(0,o.createElementVNode)("div",T,[I,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("code")?"is-invalid":""]),id:"categoryCode","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.formData.code=e})},null,2),[[o.vModelText,a.formData.code]]),(0,o.createElementVNode)("div",Z,(0,o.toDisplayString)(e.getError("code")),1)])]),(0,o.createElementVNode)("div",z,[(0,o.createElementVNode)("div",q,[A,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"categoryName","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.formData.name=e})},null,2),[[o.vModelText,a.formData.name]]),(0,o.createElementVNode)("div",$,(0,o.toDisplayString)(e.getError("name")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]]);var H=function(e){return(0,o.pushScopeId)("data-v-33274355"),e=e(),(0,o.popScopeId)(),e},W={class:"row mb-3"},Y={class:"col"},G={class:"category-name"},J={class:"row mb-3"},K={class:"col"},Q=H((function(){return(0,o.createElementVNode)("label",{for:"paramValueType",class:"form-label"},"Тип значення",-1)})),X=H((function(){return(0,o.createElementVNode)("option",{disabled:"",value:"0"},"Оберіть тип значення",-1)})),ee=["value"],te={id:"paramValueTypeValidation",class:"invalid-feedback"},ae={class:"row mb-3"},oe={class:"col"},ne=H((function(){return(0,o.createElementVNode)("label",{for:"paramCode",class:"form-label"},"Код",-1)})),re={id:"paramCodeValidation",class:"invalid-feedback"},le={class:"row mb-3"},ie={class:"col"},ce=H((function(){return(0,o.createElementVNode)("label",{for:"paramName",class:"form-label"},"Назва",-1)})),de={id:"paramNameValidation",class:"invalid-feedback"};const se={name:"AdditionalParamForm",mixins:[U.Z,j.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"},category:{type:Object,required:!0},valueTypes:{type:Array,required:!0}},data:function(){return{apiUrl:"/api/v1/additional-params"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.formData.value_type_id=0,this.errors=[]},closeForm:function(){this.clearFormData()}},computed:{readyFodSubmit:function(){return""!==this.formData.name&&""!==this.formData.code}},components:{ModalForm:M.Z}};var me=a(3379),ue=a.n(me),pe=a(1126),fe={insert:"head",singleton:!1};ue()(pe.Z,fe);pe.Z.locals;const he={name:"AdditionalParams",data:function(){return{categories:[],params:[],valueTypes:[],categoryData:{code:"",name:""},selectedCategory:{},paramData:{category_id:null,code:"",name:"",value_type_id:0},action:"",modalTitle:"",modalSubmitCaption:"",pathSystemParamIcon:x.eYM,pathUserParamIcon:x.jiR}},provide:function(){var e=this;return{modalTitle:(0,o.computed)((function(){return e.modalTitle})),modalSubmitCaption:(0,o.computed)((function(){return e.modalSubmitCaption}))}},methods:{fetchAdditionalParamCategories:function(){var e=this;axios.get("/api/v1/additional-param-categories").then((function(t){e.categories=t.data.data}))},fetchAdditionalParams:function(e){var t=this;axios.get("/api/v1/additional-params?category_id=".concat(e)).then((function(e){t.params=e.data.data}))},fetchAdditionalParamValueTypes:function(){var e=this;axios.get("/api/v1/additional-param-value-types").then((function(t){e.valueTypes=t.data.data}))},getCategoryParams:function(e){this.selectedCategory=e,this.paramData.category_id=e.id,this.fetchAdditionalParams(e.id)},newCategory:function(){this.modalTitle="Нова категорія",this.modalSubmitCaption="Додати",this.action="create",new _.u_(document.getElementById("CategoryForm")).show()},newParam:function(){this.modalTitle="Новий параметр",this.modalSubmitCaption="Додати",this.action="create",this.paramData.category_id=this.selectedCategory.id,new _.u_(document.getElementById("ParamForm")).show()},editCategory:function(e){this.modalTitle="Редагування категорії",this.modalSubmitCaption="Зберегти",this.action="update",this.categoryData.id=e.id,this.categoryData.code=e.code,this.categoryData.name=e.name,new _.u_(document.getElementById("CategoryForm")).show()},editParam:function(e){this.modalTitle="Редагування параметру",this.modalSubmitCaption="Зберегти",this.action="update",this.paramData.id=e.id,this.paramData.category_id=e.category_id,this.paramData.code=e.code,this.paramData.name=e.name,this.paramData.value_type_id=e.value_type_id,new _.u_(document.getElementById("ParamForm")).show()},deleteParam:function(e){var t=this;this.$confirmDelete("Ви дійсно бажаєте видалити додатковий параметр","Видалення параметру може призвести до неочікуваних результатів в звітах.").then((function(a){a.isConfirmed&&axios.delete("/api/v1/additional-params/".concat(e.id)).then((function(a){t.$toast(a.data.message),t.fetchAdditionalParams(e.category_id)}))}))}},computed:{selectedCategoryName:function(){var e;return null!==(e=this.selectedCategory)&&void 0!==e&&e.name?'. Категорія: "'.concat(this.selectedCategory.name,'"'):""}},components:{CategoryForm:O,ParamForm:(0,L.Z)(se,[["render",function(e,t,a,n,r,l){var i=(0,o.resolveComponent)("ModalForm");return(0,o.openBlock)(),(0,o.createBlock)(i,{formId:"ParamForm",onSubmitData:e.submitData,onCloseForm:l.closeForm,sumbitIsDisabled:!l.readyFodSubmit},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",W,[(0,o.createElementVNode)("div",Y,[(0,o.createElementVNode)("span",G,"Категорія: "+(0,o.toDisplayString)(a.category.name),1)])]),(0,o.createElementVNode)("div",J,[(0,o.createElementVNode)("div",K,[Q,(0,o.withDirectives)((0,o.createElementVNode)("select",{class:(0,o.normalizeClass)(["form-control",e.hasError("value_type_id")?"is-invalid":""]),id:"paramValueType","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.formData.value_type_id=e})},[X,((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.valueTypes,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e.id,key:e.id},(0,o.toDisplayString)(e.description),9,ee)})),128))],2),[[o.vModelSelect,a.formData.value_type_id]]),(0,o.createElementVNode)("div",te,(0,o.toDisplayString)(e.getError("value_type_id")),1)])]),(0,o.createElementVNode)("div",ae,[(0,o.createElementVNode)("div",oe,[ne,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("code")?"is-invalid":""]),id:"paramCode","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.formData.code=e})},null,2),[[o.vModelText,a.formData.code]]),(0,o.createElementVNode)("div",re,(0,o.toDisplayString)(e.getError("code")),1)])]),(0,o.createElementVNode)("div",le,[(0,o.createElementVNode)("div",ie,[ce,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"paramName","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.formData.name=e})},null,2),[[o.vModelText,a.formData.name]]),(0,o.createElementVNode)("div",de,(0,o.toDisplayString)(e.getError("name")),1)])])]})),_:1},8,["onSubmitData","onCloseForm","sumbitIsDisabled"])}],["__scopeId","data-v-33274355"]]),ButtonRefreshData:a(5796).Z,SvgIcon:w.Z},created:function(){this.fetchAdditionalParamCategories(),this.fetchAdditionalParamValueTypes()}};var ye=a(4168),be={insert:"head",singleton:!1};ue()(ye.Z,be);ye.Z.locals;const ve=(0,L.Z)(he,[["render",function(e,t,a,n,_,w){var x=(0,o.resolveComponent)("ButtonAdd"),P=(0,o.resolveComponent)("ButtonRefreshData"),T=(0,o.resolveComponent)("ButtonEdit"),I=(0,o.resolveComponent)("ButtonDelete"),Z=(0,o.resolveComponent)("SvgIcon"),z=(0,o.resolveComponent)("CategoryForm"),q=(0,o.resolveComponent)("ParamForm");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("div",c,[d,(0,o.createElementVNode)("div",s,[(0,o.createVNode)(x,{buttonClass:"btn-outline-secondary btn-transparent p-2",onClick:w.newCategory,title:"Додати категорію"},null,8,["onClick"]),(0,o.createVNode)(P,{buttonClass:"btn-outline-secondary btn-transparent ms-2 p-2",onClick:w.fetchAdditionalParamCategories},null,8,["onClick"])])]),(0,o.createElementVNode)("div",m,[(0,o.createElementVNode)("table",u,[p,(0,o.createElementVNode)("tbody",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(_.categories,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("tr",{key:e.id,class:(0,o.normalizeClass)({selected:_.selectedCategory.id==e.id})},[(0,o.createElementVNode)("td",null,[(0,o.createElementVNode)("a",{onClick:function(t){return w.getCategoryParams(e)},style:{cursor:"pointer"}},(0,o.toDisplayString)(e.code),9,f)]),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.name),1),(0,o.createElementVNode)("td",h,[(0,o.createVNode)(T,{onClick:function(t){return w.editCategory(e)},title:"Редагувати категорію",buttonClass:"btn-outline-warning btn-transparent p-2"},null,8,["onClick"]),(0,o.createVNode)(I,{buttonClass:"btn-outline-danger btn-transparent ms-3 p-2",title:"Видалити категорію",onClick:t[0]||(t[0]=function(){})})])],2)})),128))])])])])]),(0,o.createElementVNode)("div",y,[(0,o.createElementVNode)("div",b,[(0,o.createElementVNode)("div",v,[(0,o.createElementVNode)("div",C,[(0,o.createElementVNode)("span",null,"Додаткові параметри"+(0,o.toDisplayString)(w.selectedCategoryName),1)]),(0,o.createElementVNode)("div",g,[(0,o.createVNode)(P,{disabled:""==w.selectedCategoryName,buttonClass:"btn-outline-secondary btn-transparent me-2 p-2",onClick:t[1]||(t[1]=function(e){return w.fetchAdditionalParams(_.selectedCategory.id)})},null,8,["disabled"]),""!==w.selectedCategoryName?((0,o.openBlock)(),(0,o.createBlock)(x,{key:0,buttonClass:"btn btn-sm btn-outline-secondary btn-transparent p-2",onClick:w.newParam,title:"Додати параметр"},null,8,["onClick"])):(0,o.createCommentVNode)("",!0)])]),(0,o.createElementVNode)("div",E,[_.params.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("table",V,[N,(0,o.createElementVNode)("tbody",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(_.params,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("tr",{key:e.id},[(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.code),1),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.name),1),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.value_type.name),1),(0,o.createElementVNode)("td",D,[e.is_system?((0,o.openBlock)(),(0,o.createElementBlock)("span",k,[(0,o.createVNode)(Z,{type:"mdi",size:16,path:_.pathSystemParamIcon,class:"mdi mdi-cog-outline text-danger"},null,8,["path"])])):((0,o.openBlock)(),(0,o.createElementBlock)("span",B,[(0,o.createVNode)(Z,{type:"mdi",path:_.pathUserParamIcon,size:16,class:"mdi mdi-account-outline text-primary"},null,8,["path"])]))]),(0,o.createElementVNode)("td",S,[(0,o.createVNode)(T,{onClick:function(t){return w.editParam(e)},title:"Редагувати параметр",buttonClass:"btn-outline-warning btn-transparent p-2"},null,8,["onClick"]),e.is_system?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(I,{key:0,buttonClass:"btn-outline-danger btn-transparent ms-3 p-2",title:"Видалити параметр",onClick:function(t){return w.deleteParam(e)}},null,8,["onClick"]))])])})),128))])])):((0,o.openBlock)(),(0,o.createElementBlock)("div",F,[_.selectedCategory.id?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createTextVNode)(" Параметри в даній категорії відсутні ")],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createTextVNode)(" Оберіть категорію для відображення параметрів ")],64))]))])])])]),(0,o.createVNode)(z,{formData:_.categoryData,action:_.action,onRefreshData:w.fetchAdditionalParamCategories},null,8,["formData","action","onRefreshData"]),(0,o.createVNode)(q,{formData:_.paramData,category:_.selectedCategory,action:_.action,valueTypes:_.valueTypes,onRefreshData:t[2]||(t[2]=function(e){return w.fetchAdditionalParams(_.paramData.category_id)})},null,8,["formData","category","action","valueTypes"])],64)}],["__scopeId","data-v-016b1dc4"]])}}]);