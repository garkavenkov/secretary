"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[123],{2965:(e,t,a)=>{a.d(t,{Z:()=>o});const o={data:function(){return{errors:{}}},methods:{getError:function(e){return this.errors&&this.errors[e]?this.errors[e][0]:""},hasError:function(e){return!(!this.errors||!this.errors[e])}},created:function(){var e=this,t=this,a=Object.keys(this.formData);this.excludeFiledsFromCreateWatch&&(a=a.filter((function(t){return!e.excludeFiledsFromCreateWatch.includes(t)}))),a.forEach((function(e){var a="formData.".concat(e);t.$watch(a,(function(){this.errors[e]&&delete this.errors[e]}))}))}}},3753:(e,t,a)=>{a.d(t,{Z:()=>o});const o={methods:{submitData:function(){var e=this;"create"==this.action?axios.post(this.apiUrl,this.formData).then((function(t){e.$emit("refreshData"),e.$toast(t.data.message),void 0!==e.clearFormData&&e.clearFormData()})).catch((function(t){var a;e.errors=null===(a=t.response)||void 0===a?void 0:a.data.errors})):"update"==this.action&&axios.patch("".concat(this.apiUrl,"/").concat(this.formData.id),this.formData).then((function(t){e.errors=[],e.$emit("refreshData"),e.$toast(t.data.message)})).catch((function(t){var a;e.errors=null===(a=t.response)||void 0===a?void 0:a.data.errors}))}}}},5546:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(3645),n=a.n(o)()((function(e){return e[1]}));n.push([e.id,"tr[data-v-370da32e]{vertical-align:middle}th.actions[data-v-370da32e]{min-width:100px!important}td.actions[data-v-370da32e]{display:flex;justify-content:space-between;width:100px!important}",""]);const r=n},975:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(3645),n=a.n(o)()((function(e){return e[1]}));n.push([e.id,"tr[data-v-04723d39]{vertical-align:middle}th.actions[data-v-04723d39]{width:100px}td.actions[data-v-04723d39]{display:flex}",""]);const r=n},1166:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(3645),n=a.n(o)()((function(e){return e[1]}));n.push([e.id,".category-name[data-v-627fdbf0]{font-size:1rem}",""]);const r=n},6964:(e,t,a)=>{a.d(t,{Z:()=>r});var o=a(3645),n=a.n(o)()((function(e){return e[1]}));n.push([e.id,"tr[data-v-723a39cc]{vertical-align:middle}th.actions[data-v-723a39cc]{width:100px}td.actions[data-v-723a39cc]{display:flex;justify-content:space-between}td.text-center[data-v-723a39cc]{text-align:center;text-align:-webkit-center}",""]);const r=n},5796:(e,t,a)=>{a.d(t,{Z:()=>l});var o=a(8222);var n=a(7341),r=a(5317);const i={name:"ButtonRefreshData",props:{size:{type:Number,required:!1,default:18},title:{type:String,required:!1,default:"Оновити дані"},buttonClass:{type:String,required:!1,default:""}},emits:["click"],data:function(){return{path:r.jcD}},components:{IconButton:n.Z}};const l=(0,a(3744).Z)(i,[["render",function(e,t,a,n,r,i){var l=(0,o.resolveComponent)("IconButton");return(0,o.openBlock)(),(0,o.createBlock)(l,{class:(0,o.normalizeClass)(a.buttonClass),title:a.title,size:a.size,mdiPath:r.path,onClick:t[0]||(t[0]=function(t){return e.$emit("click",t)})},{default:(0,o.withCtx)((function(){return[(0,o.renderSlot)(e.$slots,"default")]})),_:3},8,["class","title","size","mdiPath"])}]])},3574:(e,t,a)=>{a.d(t,{Z:()=>u});var o=a(8222),n=["id"],r={class:"modal-header"},i={class:"d-flex align-items-center"},l=["innerHTML"],d={class:"modal-body"},c={key:0,class:"modal-footer justify-content-between"},s=["disabled"];const m={name:"ModalForm",props:{formId:{type:String,required:!0},modalClass:{type:String,required:!1,default:""},modalContentClass:{type:String,required:!1,default:""},showFooter:{type:Boolean,required:!1,default:function(){return!0}},sumbitIsDisabled:{type:Boolean,required:!1,default:function(){return!1}},title:{type:String,required:!1,default:""},submitCaption:{type:String,required:!1,default:""}},inject:{modalTitle:{from:"modalTitle",default:"Новий запис"},modalSubmitCaption:{from:"modalSubmitCaption",default:"Додати"}},emits:["submitData","closeForm"],data:function(){return{}},computed:{modalFormTitle:function(){return this.title?this.title:this.modalTitle},modalFormSubmitCaption:function(){return this.submitCaption?this.submitCaption:this.modalSubmitCaption}}};const u=(0,a(3744).Z)(m,[["render",function(e,t,a,m,u,p){return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"modal fade",id:a.formId,tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["modal-dialog",a.modalClass])},[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["modal-content",a.modalContentClass])},[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("h1",{class:"modal-title fs-5",innerHTML:p.modalFormTitle},null,8,l),(0,o.renderSlot)(e.$slots,"modalHeader")]),(0,o.createElementVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=function(t){return e.$emit("closeForm")})})]),(0,o.createElementVNode)("div",d,[(0,o.renderSlot)(e.$slots,"default")]),a.showFooter?((0,o.openBlock)(),(0,o.createElementBlock)("div",c,[(0,o.createElementVNode)("div",null,[(0,o.renderSlot)(e.$slots,"footer")]),(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=function(t){return e.$emit("closeForm")})}," Відмінити "),(0,o.createElementVNode)("button",{type:"button",class:(0,o.normalizeClass)(["ms-4 btn",[a.sumbitIsDisabled?"btn-outline-primary":"btn-primary"]]),onClick:t[2]||(t[2]=function(t){return e.$emit("submitData")}),disabled:a.sumbitIsDisabled},(0,o.toDisplayString)(p.modalFormSubmitCaption),11,s)])])):(0,o.createCommentVNode)("",!0)],2)],2)],8,n)}]])},9802:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var o=a(8222),n=function(e){return(0,o.pushScopeId)("data-v-04723d39"),e=e(),(0,o.popScopeId)(),e},r={class:"row"},i={class:"col-md-10 mx-auto"},l={class:"card"},d={class:"card-header"},c={class:"dictionary-name__wrapper"},s=n((function(){return(0,o.createElementVNode)("span",{class:"icon"},[(0,o.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,o.createElementVNode)("title",null,"Повернутись по переліку категорій додаткових параметрів"),(0,o.createElementVNode)("path",{d:"M6.5 10C7.3 10 8 9.3 8 8.5S7.3 7 6.5 7 5 7.7 5 8.5 5.7 10 6.5 10M9 6L16 13L11 18L4 11V6H9M9 4H4C2.9 4 2 4.9 2 6V11C2 11.6 2.2 12.1 2.6 12.4L9.6 19.4C9.9 19.8 10.4 20 11 20S12.1 19.8 12.4 19.4L17.4 14.4C17.8 14 18 13.5 18 13C18 12.4 17.8 11.9 17.4 11.6L10.4 4.6C10.1 4.2 9.6 4 9 4M13.5 5.7L14.5 4.7L21.4 11.6C21.8 12 22 12.5 22 13S21.8 14.1 21.4 14.4L16 19.8L15 18.8L20.7 13L13.5 5.7Z"})])],-1)})),m=n((function(){return(0,o.createElementVNode)("span",null,"Категорії додаткових параметрів",-1)})),u={class:"card-body"},p={class:"table table-sm table-bordered"},f=n((function(){return(0,o.createElementVNode)("thead",{class:"table-secondary"},[(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("th",null,"Модель"),(0,o.createElementVNode)("th",null,"Назва"),(0,o.createElementVNode)("th",{class:"actions"})])],-1)})),h={class:"actions"};var v=a(8877),b=a(6196),V=a(5317),C={class:"row mb-3"},y={class:"col"},E=(0,o.createElementVNode)("label",{for:"categoryCode",class:"form-label"},"Код",-1),N={id:"categoryCodeValidation",class:"invalid-feedback"},g={class:"row mb-3"},k={class:"col"},D=(0,o.createElementVNode)("label",{for:"categoryName",class:"form-label"},"Назва",-1),B={id:"categoryNameValidation",class:"invalid-feedback"};var S=a(3574),w=a(3753),x=a(2965);const F={name:"AdditionalParamCategoryForm",mixins:[w.Z,x.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},data:function(){return{apiUrl:"/api/v1/additional-param-categories"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.errors=[]},closeForm:function(){this.clearFormData()}},components:{ModalForm:S.Z}};var _=a(3744);const P=(0,_.Z)(F,[["render",function(e,t,a,n,r,i){var l=(0,o.resolveComponent)("ModalForm");return(0,o.openBlock)(),(0,o.createBlock)(l,{formId:"CategoryForm",onSubmitData:e.submitData,onCloseForm:i.closeForm},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",C,[(0,o.createElementVNode)("div",y,[E,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("code")?"is-invalid":""]),id:"categoryCode","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.formData.code=e})},null,2),[[o.vModelText,a.formData.code]]),(0,o.createElementVNode)("div",N,(0,o.toDisplayString)(e.getError("code")),1)])]),(0,o.createElementVNode)("div",g,[(0,o.createElementVNode)("div",k,[D,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"categoryName","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.formData.name=e})},null,2),[[o.vModelText,a.formData.name]]),(0,o.createElementVNode)("div",B,(0,o.toDisplayString)(e.getError("name")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]]);var I=a(7e3),T=a(5796);const Z={name:"AdditionalParams",data:function(){return{categories:[],valueTypes:[],categoryData:{code:"",name:""},paramData:{category_id:null,code:"",name:"",value_type_id:0,mask:""},action:"",modalTitle:"",modalSubmitCaption:"",pathSystemParamIcon:V.eYM,pathUserParamIcon:V.jiR}},provide:function(){var e=this;return{modalTitle:(0,o.computed)((function(){return e.modalTitle})),modalSubmitCaption:(0,o.computed)((function(){return e.modalSubmitCaption}))}},methods:{fetchAdditionalParamCategories:function(){var e=this;axios.get("/api/v1/additional-param-categories").then((function(t){e.categories=t.data.data}))},newCategory:function(){this.modalTitle="Нова категорія",this.modalSubmitCaption="Додати",this.action="create",new v.u_(document.getElementById("CategoryForm")).show()},editCategory:function(e){this.modalTitle="Редагування категорії",this.modalSubmitCaption="Зберегти",this.action="update",this.categoryData.id=e.id,this.categoryData.code=e.code,this.categoryData.name=e.name,new v.u_(document.getElementById("CategoryForm")).show()}},computed:{},components:{CategoryForm:P,ParamForm:I.Z,ButtonRefreshData:T.Z,SvgIcon:b.Z},created:function(){this.fetchAdditionalParamCategories()}};var M=a(3379),A=a.n(M),L=a(975),$={insert:"head",singleton:!1};A()(L.Z,$);L.Z.locals;const z=(0,_.Z)(Z,[["render",function(e,t,a,n,v,b){var V=(0,o.resolveComponent)("ButtonAdd"),C=(0,o.resolveComponent)("ButtonRefreshData"),y=(0,o.resolveComponent)("router-link"),E=(0,o.resolveComponent)("ButtonEdit"),N=(0,o.resolveComponent)("ButtonDelete"),g=(0,o.resolveComponent)("CategoryForm");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",d,[(0,o.createElementVNode)("div",c,[s,m,(0,o.createVNode)(V,{onClick:b.newCategory,title:"Додати параметр",class:"btn-sm btn-primary p-2"},null,8,["onClick"]),(0,o.createVNode)(C,{onClick:b.fetchAdditionalParamCategories,buttonClass:"btn-outline-primary p-2 ms-2"},null,8,["onClick"])])]),(0,o.createElementVNode)("div",u,[(0,o.createElementVNode)("table",p,[f,(0,o.createElementVNode)("tbody",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(v.categories,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("tr",{key:e.id},[(0,o.createElementVNode)("td",null,[(0,o.createVNode)(y,{to:{name:"additional.params.show",params:{id:e.id}}},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)((0,o.toDisplayString)(e.code),1)]})),_:2},1032,["to"])]),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.name),1),(0,o.createElementVNode)("td",h,[(0,o.createVNode)(E,{onClick:function(t){return b.editCategory(e)},title:"Редагувати категорію",buttonClass:"btn-outline-warning btn-transparent p-2"},null,8,["onClick"]),(0,o.createVNode)(N,{buttonClass:"btn-outline-danger btn-transparent ms-3 p-2",title:"Видалити категорію",onClick:t[0]||(t[0]=function(){})})])])})),128))])])])])])]),(0,o.createVNode)(g,{formData:v.categoryData,action:v.action,onRefreshData:b.fetchAdditionalParamCategories},null,8,["formData","action","onRefreshData"])],64)}],["__scopeId","data-v-04723d39"]])},7e3:(e,t,a)=>{a.d(t,{Z:()=>P});var o=a(8222),n=function(e){return(0,o.pushScopeId)("data-v-627fdbf0"),e=e(),(0,o.popScopeId)(),e},r={class:"row mb-3"},i={class:"col"},l=n((function(){return(0,o.createElementVNode)("label",{for:"paramCode",class:"form-label"},"Код",-1)})),d={id:"paramCodeValidation",class:"invalid-feedback"},c={class:"row mb-3"},s={class:"col"},m=n((function(){return(0,o.createElementVNode)("label",{for:"paramName",class:"form-label"},"Назва",-1)})),u={id:"paramNameValidation",class:"invalid-feedback"},p={class:"row mb-3"},f={class:"col"},h=n((function(){return(0,o.createElementVNode)("label",{for:"paramValueType",class:"form-label"},"Тип параметру",-1)})),v=n((function(){return(0,o.createElementVNode)("option",{disabled:"",value:"0"},"Оберіть тип параметру",-1)})),b=["value"],V={id:"paramValueTypeValidation",class:"invalid-feedback"},C={class:"row mb-3"},y={class:"col"},E=n((function(){return(0,o.createElementVNode)("label",{for:"paramMask",class:"form-label"},"Шаблон",-1)})),N={id:"paramMaskValidation",class:"invalid-feedback"},g=n((function(){return(0,o.createElementVNode)("div",{class:"row mb-3"},[(0,o.createElementVNode)("div",{class:"col"},[(0,o.createElementVNode)("span",{class:"category-name"},"Додаткове налаштування")])],-1)}));var k=a(3574),D=a(3753),B=a(2965);const S={name:"AdditionalParamForm",mixins:[D.Z,B.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"},valueTypes:{type:Array,required:!0}},emits:["refreshData"],data:function(){return{apiUrl:"/api/v1/additional-params"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.formData.mask="",this.formData.value_type_id=0,this.errors=[]},closeForm:function(){this.clearFormData()}},computed:{readyFodSubmit:function(){return""!==this.formData.name&&""!==this.formData.code}},components:{ModalForm:k.Z}};var w=a(3379),x=a.n(w),F=a(1166),_={insert:"head",singleton:!1};x()(F.Z,_);F.Z.locals;const P=(0,a(3744).Z)(S,[["render",function(e,t,a,n,k,D){var B=(0,o.resolveComponent)("ModalForm");return(0,o.openBlock)(),(0,o.createBlock)(B,{formId:"ParamForm",onSubmitData:e.submitData,onCloseForm:D.closeForm,sumbitIsDisabled:!D.readyFodSubmit,modalClass:"modal-lg"},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",i,[l,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("code")?"is-invalid":""]),id:"paramCode","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.formData.code=e})},null,2),[[o.vModelText,a.formData.code]]),(0,o.createElementVNode)("div",d,(0,o.toDisplayString)(e.getError("code")),1)])]),(0,o.createElementVNode)("div",c,[(0,o.createElementVNode)("div",s,[m,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"paramName","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.formData.name=e})},null,2),[[o.vModelText,a.formData.name]]),(0,o.createElementVNode)("div",u,(0,o.toDisplayString)(e.getError("name")),1)])]),(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("div",f,[h,(0,o.withDirectives)((0,o.createElementVNode)("select",{class:(0,o.normalizeClass)(["form-control",e.hasError("value_type_id")?"is-invalid":""]),id:"paramValueType","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.formData.value_type_id=e})},[v,((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.valueTypes,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e.id,key:e.id},(0,o.toDisplayString)(e.description),9,b)})),128))],2),[[o.vModelSelect,a.formData.value_type_id]]),(0,o.createElementVNode)("div",V,(0,o.toDisplayString)(e.getError("value_type_id")),1)])]),(0,o.createElementVNode)("div",C,[(0,o.createElementVNode)("div",y,[E,(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"paramMask","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.formData.mask=e})},null,2),[[o.vModelText,a.formData.mask]]),(0,o.createElementVNode)("div",N,(0,o.toDisplayString)(e.getError("mask")),1)])]),g]})),_:1},8,["onSubmitData","onCloseForm","sumbitIsDisabled"])}],["__scopeId","data-v-627fdbf0"]])},9980:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ue});var o=a(8222),n=function(e){return(0,o.pushScopeId)("data-v-723a39cc"),e=e(),(0,o.popScopeId)(),e},r={class:"row"},i={class:"col-md-10 mx-auto"},l={class:"card"},d={class:"card-header"},c={class:"dictionary-name__wrapper"},s=[n((function(){return(0,o.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,o.createElementVNode)("title",null,"Повернутись по переліку категорій додаткових параметрів"),(0,o.createElementVNode)("path",{d:"M4 3H18C19.11 3 20 3.9 20 5V12.08C18.45 11.82 16.92 12.18 15.68 13H12V17H13.08C12.97 17.68 12.97 18.35 13.08 19H4C2.9 19 2 18.11 2 17V5C2 3.9 2.9 3 4 3M4 7V11H10V7H4M12 7V11H18V7H12M4 13V17H10V13H4M18.44 15V17H22.44V19H18.44V21L15.44 18L18.44 15"})],-1)}))],m={class:"ms-2"},u={class:"card-body"},p={key:0,class:"table table-sm table-bordered"},f=n((function(){return(0,o.createElementVNode)("thead",{class:"table-secondary"},[(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("th",null,"Код"),(0,o.createElementVNode)("th",null,"Назва"),(0,o.createElementVNode)("th",null,"Значення"),(0,o.createElementVNode)("th",{class:"text-center",title:"Системний параметр або параметр користувача"},"Тип"),(0,o.createElementVNode)("th",{class:"actions text-center"},"Дії"),(0,o.createElementVNode)("th")])],-1)})),h={class:"text-center"},v={key:0,title:"Системний параметр"},b={key:1,title:"Параметр користувача"},V={class:"actions"},C={style:{"text-align":"-webkit-center"}},y={key:1,class:"text-center text-muted p-3"};var E=a(8877),N=a(6196),g=a(5317),k=a(7e3),D=function(e){return(0,o.pushScopeId)("data-v-370da32e"),e=e(),(0,o.popScopeId)(),e},B={class:"row mb-3"},S={class:"col"},w={class:"d-flex justify-content-between align-items-center lh-34"},x={class:"fw-semibold"},F={key:0,class:"row mb-3 mx-0 py-2 border rounded"},_={class:"col"},P=D((function(){return(0,o.createElementVNode)("option",{disabled:"",value:"0"},"Оберіть атрибут",-1)})),I=["value"],T={id:"conditionAttributeIdValidation",class:"invalid-feedback"},Z={class:"col"},M=D((function(){return(0,o.createElementVNode)("option",{disabled:"",value:null},"Оберіть умову",-1)})),A=["value"],L={id:"conditionConditionValidation",class:"invalid-feedback"},$={class:"col"},z=D((function(){return(0,o.createElementVNode)("option",{disabled:"",value:null},"Оберіть значеня",-1)})),H=["value"],q={id:"conditionValueValidation",class:"invalid-feedback"},U={class:"col",style:{"align-self":"start"}},j={class:"d-flex justify-content-end"},R={class:"row"},O={class:"col"},W={key:0,class:"table table-sm table-bordered mb-5"},J=D((function(){return(0,o.createElementVNode)("thead",{class:"table-secondary"},[(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("th",{style:{width:"40%"}},"Атрибут"),(0,o.createElementVNode)("th",{style:{width:"30%"}},"Умова"),(0,o.createElementVNode)("th",{style:{width:"30%"}},"Значення"),(0,o.createElementVNode)("th",{class:"actions"})])],-1)})),Y={class:"actions"},G={key:1,class:"d-flex justify-content-center p-4 border rounded text-muted mb-3"};var K=a(3574),Q=a(7341),X=a(3753),ee=a(2965);const te={name:"AdditionalParamConditions",mixins:[X.Z,ee.Z],props:{param:{type:Object,required:!0}},components:{ModalForm:K.Z,IconButton:Q.Z},emits:["refresh"],data:function(){return{pathCheck:g.oL1,pathCancel:g.M_e,insertMode:!1,editMode:!1,action:"",formData:{id:null,attribute_id:0,condition:null,value:null},attributes:[],attributeValues:[],attributeConditions:[]}},methods:{closeForm:function(){this.param_id=null,this.resetForm(),this.attributeValues=[],this.attributeConditions=[],this.action=""},cancelInsertMode:function(){this.action="",this.resetForm()},saveCondition:function(){var e=this,t={};Object.assign(t,this.formData),t.param_id=this.param.id,"create"==this.action?axios.post("/api/v1/additional-param-conditions",t).then((function(t){201==t.status&&(e.$emit("refresh",e.param.id),e.$toast(t.data.message),e.resetForm())})).catch((function(t){var a;e.errors=null===(a=t.response)||void 0===a?void 0:a.data.errors})):"update"==this.action&&axios.patch("/api/v1/additional-param-conditions/".concat(this.formData.id),t).then((function(t){200==t.status&&(e.$emit("refresh",e.param.id),e.$toast(t.data.message))})).catch((function(t){var a;e.errors=null===(a=t.response)||void 0===a?void 0:a.data.errors}))},resetForm:function(){this.formData.attribute_id=0,this.formData.condition=null,this.formData.value=null},editCondition:function(e){this.formData.id=e.id,this.formData.attribute_id=e.attribute_id,this.formData.condition=e.condition,this.formData.value=e.value,this.action="update"},deleteCondition:function(e){var t=this;this.$confirmDelete("Ви дійсно бажаєте видалити умови відображення параметру","Видалення параметру може призвести до неочікуваних результатів в звітах.").then((function(a){a.isConfirmed&&axios.delete("/api/v1/additional-param-conditions/".concat(e.id)).then((function(a){t.$toast(a.data.message),t.$emit("refresh",e.param_id)}))}))},fetchModelAttributes:function(){var e=this;axios.get("/api/v1/model-attributes?model=App\\Models\\HouseholdMember").then((function(t){e.attributes=t.data.data}))}},computed:{saveConditionTitle:function(){return"create"==this.action?"Додати умову":"update"==this.action?"Змінити умову":void 0}},watch:{"formData.attribute_id":function(e){var t=this.attributes.find((function(t){return t.id==e}));t&&(""!=t.availableValues?this.attributeValues=t.availableValues.split(","):this.attributeValues=[],""!=t.conditions?this.attributeConditions=t.conditions.split(","):this.attributeConditions=[])}},created:function(){this.fetchModelAttributes()}};var ae=a(3379),oe=a.n(ae),ne=a(5546),re={insert:"head",singleton:!1};oe()(ne.Z,re);ne.Z.locals;var ie=a(3744);const le=(0,ie.Z)(te,[["render",function(e,t,a,n,r,i){var l=(0,o.resolveComponent)("ButtonAdd"),d=(0,o.resolveComponent)("IconButton"),c=(0,o.resolveComponent)("ButtonEdit"),s=(0,o.resolveComponent)("ButtonDelete"),m=(0,o.resolveComponent)("ModalForm");return(0,o.openBlock)(),(0,o.createBlock)(m,{formId:"AdditionalParamConditions",onSubmitData:t[5]||(t[5]=function(){}),onCloseForm:i.closeForm,modalClass:"modal-lg",showFooter:!1},{default:(0,o.withCtx)((function(){return[(0,o.createElementVNode)("div",B,[(0,o.createElementVNode)("div",S,[(0,o.createElementVNode)("div",w,[(0,o.createElementVNode)("div",null,[(0,o.createTextVNode)(" Парметр: "),(0,o.createElementVNode)("span",x,(0,o.toDisplayString)(a.param.name),1)]),(0,o.createElementVNode)("div",null,[""==r.action?((0,o.openBlock)(),(0,o.createBlock)(l,{key:0,onClick:t[0]||(t[0]=function(e){return r.action="create"}),title:"Додати умову",buttonClass:["btn-primary px-2 py-1",""!=r.action?"disabled":""]},{default:(0,o.withCtx)((function(){return[(0,o.createTextVNode)(" Додати ")]})),_:1},8,["buttonClass"])):(0,o.createCommentVNode)("",!0)])])])]),""!=r.action?((0,o.openBlock)(),(0,o.createElementBlock)("div",F,[(0,o.createElementVNode)("div",_,[(0,o.withDirectives)((0,o.createElementVNode)("select",{class:(0,o.normalizeClass)(["form-control",e.hasError("attribute_id")?"is-invalid":""]),id:"conditionAttributeId","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.formData.attribute_id=e})},[P,((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(r.attributes,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e.id,key:e.id},(0,o.toDisplayString)(e.name),9,I)})),128))],2),[[o.vModelSelect,r.formData.attribute_id]]),(0,o.createElementVNode)("div",T,(0,o.toDisplayString)(e.getError("attribute_id")),1)]),(0,o.createElementVNode)("div",Z,[(0,o.withDirectives)((0,o.createElementVNode)("select",{class:(0,o.normalizeClass)(["form-control",e.hasError("condition")?"is-invalid":""]),id:"conditionCondition","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.formData.condition=e})},[M,((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(r.attributeConditions,(function(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e,key:t},(0,o.toDisplayString)(e),9,A)})),128))],2),[[o.vModelSelect,r.formData.condition]]),(0,o.createElementVNode)("div",L,(0,o.toDisplayString)(e.getError("condition")),1)]),(0,o.createElementVNode)("div",$,[r.attributeValues.length>0?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("select",{key:0,class:(0,o.normalizeClass)(["form-control",e.hasError("value")?"is-invalid":""]),id:"conditionValue","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.formData.value=e})},[z,((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(r.attributeValues,(function(e,t){return(0,o.openBlock)(),(0,o.createElementBlock)("option",{value:e,key:t},(0,o.toDisplayString)(e),9,H)})),128))],2)),[[o.vModelSelect,r.formData.value]]):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:1,type:"text",class:(0,o.normalizeClass)(["form-control",e.hasError("value")?"is-invalid":""]),id:"conditionValue",autocomplete:"false",placeholder:"Заповніть значення","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.formData.value=e})},null,2)),[[o.vModelText,r.formData.value]]),(0,o.createElementVNode)("div",q,(0,o.toDisplayString)(e.getError("value")),1)]),(0,o.createElementVNode)("div",U,[(0,o.createElementVNode)("div",j,[(0,o.createVNode)(d,{onClick:i.saveCondition,mdiPath:r.pathCheck,size:"20",title:i.saveConditionTitle,buttonClass:"btn-outline-primary btn-transparent p-2"},null,8,["onClick","mdiPath","title"]),(0,o.createVNode)(d,{onClick:i.cancelInsertMode,mdiPath:r.pathCancel,size:"20",title:"Відмінити",buttonClass:"btn-outline-danger btn-transparent ms-3 p-2"},null,8,["onClick","mdiPath"])])])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",R,[(0,o.createElementVNode)("div",O,[Object.hasOwn(a.param,"conditions")&&a.param.conditions.length>0?((0,o.openBlock)(),(0,o.createElementBlock)("table",W,[J,(0,o.createElementVNode)("tbody",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(a.param.conditions,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("tr",{key:e.id},[(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.attribute.name),1),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.condition),1),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.value),1),(0,o.createElementVNode)("td",Y,[(0,o.createVNode)(c,{onClick:function(t){return i.editCondition(e)},disabled:""!=r.action,title:"Редагувати умову",buttonClass:"btn-outline-warning btn-transparent p-2"},null,8,["onClick","disabled"]),(0,o.createVNode)(s,{buttonClass:"btn-outline-danger btn-transparent p-2",title:"Видалити умову",disabled:""!=r.action,onClick:function(t){return i.deleteCondition(e)}},null,8,["disabled","onClick"])])])})),128))])])):((0,o.openBlock)(),(0,o.createElementBlock)("div",G," Параметр відображается без жодних умов "))])])]})),_:1},8,["onCloseForm"])}],["__scopeId","data-v-370da32e"]]);var de=a(5796);const ce={name:"AdditionalParamsCategory",props:{id:{type:[String,Number],required:!0}},components:{ParamForm:k.Z,ButtonRefreshData:de.Z,AdditionalParamConditions:le,SvgIcon:N.Z,IconButton:Q.Z},data:function(){return{category:{params:[]},paramData:{category_id:this.id,code:"",name:"",value_type_id:0,mask:""},param:{},paramConditions:[],valueTypes:[],action:"",modalTitle:"",modalSubmitCaption:"",pathSystemParamIcon:g.$BC,pathUserParamIcon:g.d1J,pathWrenchCogIcon:g.R6j}},provide:function(){var e=this;return{modalTitle:(0,o.computed)((function(){return e.modalTitle})),modalSubmitCaption:(0,o.computed)((function(){return e.modalSubmitCaption}))}},methods:{fetchAdditionalParamValueTypes:function(){var e=this;axios.get("/api/v1/additional-param-value-types").then((function(t){e.valueTypes=t.data.data}))},fetchAdditionalParams:function(){var e=this,t="/api/v1/additional-param-categories/".concat(this.id);axios.get(t).then((function(t){e.category=t.data.data}))},fetchParam:function(e){var t=this;axios.get("/api/v1/additional-params/".concat(e)).then((function(e){t.param=e.data.data,t.fetchAdditionalParams()}))},newParam:function(){this.modalTitle="Новий параметр",this.modalSubmitCaption="Додати",this.action="create",this.paramData.category_id=this.id,new E.u_(document.getElementById("ParamForm")).show()},editParam:function(e){this.modalTitle="Редагування параметру",this.modalSubmitCaption="Зберегти",this.action="update",this.paramData.id=e.id,this.paramData.category_id=e.category_id,this.paramData.code=e.code,this.paramData.name=e.name,this.paramData.mask=e.mask,this.paramData.value_type_id=e.value_type_id,new E.u_(document.getElementById("ParamForm")).show()},deleteParam:function(e){var t=this;this.$confirmDelete("Ви дійсно бажаєте видалити додатковий параметр","Видалення параметру може призвести до неочікуваних результатів в звітах.").then((function(a){a.isConfirmed&&axios.delete("/api/v1/additional-params/".concat(e.id)).then((function(e){t.$toast(e.data.message),t.fetchAdditionalParams(t.id)}))}))},openConditions:function(e){var t=this;this.modalTitle="Налаштування відображення параметру",this.modalSubmitCaption="Зберегти",axios.get("/api/v1/additional-params/".concat(e)).then((function(e){t.param=e.data.data,new E.u_(document.getElementById("AdditionalParamConditions")).show()}))}},created:function(){this.fetchAdditionalParams(this.id),this.fetchAdditionalParamValueTypes()}};var se=a(6964),me={insert:"head",singleton:!1};oe()(se.Z,me);se.Z.locals;const ue=(0,ie.Z)(ce,[["render",function(e,t,a,n,E,N){var g=(0,o.resolveComponent)("ButtonAdd"),k=(0,o.resolveComponent)("ButtonRefreshData"),D=(0,o.resolveComponent)("SvgIcon"),B=(0,o.resolveComponent)("ButtonEdit"),S=(0,o.resolveComponent)("ButtonDelete"),w=(0,o.resolveComponent)("IconButton"),x=(0,o.resolveComponent)("ParamForm"),F=(0,o.resolveComponent)("AdditionalParamConditions");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",i,[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",d,[(0,o.createElementVNode)("div",c,[(0,o.createElementVNode)("span",{class:"icon go-back-page",onClick:t[0]||(t[0]=function(t){return e.$router.push({name:"additional.params"})})},s),(0,o.createElementVNode)("span",null,[(0,o.createTextVNode)("Додаткові параметри категорії: "),(0,o.createElementVNode)("span",m,'"'+(0,o.toDisplayString)(E.category.name)+'"',1)]),(0,o.createVNode)(g,{onClick:N.newParam,title:"Додати параметр",class:"btn-sm btn-primary p-2"},null,8,["onClick"]),(0,o.createVNode)(k,{onClick:N.fetchAdditionalParams,buttonClass:"btn-outline-primary p-2 ms-2"},null,8,["onClick"])])]),(0,o.createElementVNode)("div",u,[E.category.params?((0,o.openBlock)(),(0,o.createElementBlock)("table",p,[f,(0,o.createElementVNode)("tbody",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(E.category.params,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("tr",{key:e.id},[(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.code),1),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.name),1),(0,o.createElementVNode)("td",null,(0,o.toDisplayString)(e.value_type.name),1),(0,o.createElementVNode)("td",h,[e.is_system?((0,o.openBlock)(),(0,o.createElementBlock)("span",v,[(0,o.createVNode)(D,{type:"mdi",size:16,path:E.pathSystemParamIcon,class:"text-danger"},null,8,["path"])])):((0,o.openBlock)(),(0,o.createElementBlock)("span",b,[(0,o.createVNode)(D,{type:"mdi",path:E.pathUserParamIcon,size:16,class:"text-primary"},null,8,["path"])]))]),(0,o.createElementVNode)("td",V,[(0,o.createVNode)(B,{onClick:function(t){return N.editParam(e)},title:"Редагувати параметр",buttonClass:"btn-outline-warning btn-transparent p-2"},null,8,["onClick"]),e.is_system?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(S,{key:0,buttonClass:"btn-outline-danger btn-transparent p-2",title:"Видалити параметр",onClick:function(t){return N.deleteParam(e)}},null,8,["onClick"]))]),(0,o.createElementVNode)("td",C,[(0,o.createVNode)(w,{mdiPath:E.pathWrenchCogIcon,title:"Налаштування відображення параметру",buttonClass:[e.conditions.length>0?"btn-outline-info":"btn-outline-secondary","btn-transparent p-2"],onClick:function(t){return N.openConditions(e.id)}},null,8,["mdiPath","buttonClass","onClick"])])])})),128))])])):((0,o.openBlock)(),(0,o.createElementBlock)("div",y," Параметри в даній категорії відсутні "))])])])]),(0,o.createVNode)(x,{formData:E.paramData,action:E.action,valueTypes:E.valueTypes,onRefreshData:N.fetchAdditionalParams},null,8,["formData","action","valueTypes","onRefreshData"]),(0,o.createVNode)(F,{param:E.param,onRefresh:N.fetchParam},null,8,["param","onRefresh"])],64)}],["__scopeId","data-v-723a39cc"]])}}]);