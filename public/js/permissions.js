"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[144],{2965:(e,t,o)=>{o.d(t,{Z:()=>r});const r={data:function(){return{errors:{}}},methods:{getError:function(e){return this.errors&&this.errors[e]?this.errors[e][0]:""},hasError:function(e){return!(!this.errors||!this.errors[e])}},created:function(){var e=this,t=this,o=Object.keys(this.formData);this.excludeFiledsFromCreateWatch&&(o=o.filter((function(t){return!e.excludeFiledsFromCreateWatch.includes(t)}))),o.forEach((function(e){var o="formData.".concat(e);t.$watch(o,(function(){this.errors[e]&&delete this.errors[e]}))}))}}},3753:(e,t,o)=>{o.d(t,{Z:()=>r});const r={methods:{submitData:function(){var e=this;"create"==this.action?axios.post(this.apiUrl,this.formData).then((function(t){e.$emit("refreshData"),e.$toast(t.data.message),void 0!==e.clearFormData&&e.clearFormData()})).catch((function(t){var o;e.errors=null===(o=t.response)||void 0===o?void 0:o.data.errors})):"update"==this.action&&axios.patch("".concat(this.apiUrl,"/").concat(this.formData.id),this.formData).then((function(t){e.errors=[],e.$emit("refreshData"),e.$toast(t.data.message)})).catch((function(t){var o;e.errors=null===(o=t.response)||void 0===o?void 0:o.data.errors}))}}}},5221:(e,t,o)=>{o.d(t,{Z:()=>s});var r=o(8222);var a=o(6196),n=o(5317);const i={name:"DictionaryShowRecordLink",props:{size:{type:[String,Number],required:!1,default:16},routeName:{type:String,required:!0},routeParamId:{type:[String,Number],required:!0},title:{type:String,required:!1,default:"Перейти до інформації"},mdiIconPath:{type:String,required:!1,default:""}},components:{SvgIcon:a.Z},computed:{path:function(){return""!==this.mdiIconPath?this.mdiIconPath:n.hiR}}};const s=(0,o(3744).Z)(i,[["render",function(e,t,o,a,n,i){var s=(0,r.resolveComponent)("SvgIcon"),l=(0,r.resolveComponent)("router-link");return(0,r.openBlock)(),(0,r.createBlock)(l,{to:{name:o.routeName,params:{id:o.routeParamId}},title:o.title},{default:(0,r.withCtx)((function(){return[(0,r.createVNode)(s,{type:"mdi",path:i.path,size:o.size},null,8,["path","size"])]})),_:1},8,["to","title"])}]])},3574:(e,t,o)=>{o.d(t,{Z:()=>u});var r=o(8222),a=["id"],n={class:"modal-header"},i={class:"d-flex align-items-center"},s=["innerHTML"],l={class:"modal-body"},d={key:0,class:"modal-footer justify-content-between"},c=["disabled"];const m={name:"ModalForm",props:{formId:{type:String,required:!0},modalClass:{type:String,required:!1,default:""},modalContentClass:{type:String,required:!1,default:""},showFooter:{type:Boolean,required:!1,default:function(){return!0}},sumbitIsDisabled:{type:Boolean,required:!1,default:function(){return!1}},title:{type:String,required:!1,default:""},submitCaption:{type:String,required:!1,default:""}},inject:{modalTitle:{from:"modalTitle",default:"Новий запис"},modalSubmitCaption:{from:"modalSubmitCaption",default:"Додати"}},emits:["submitData","closeForm"],data:function(){return{}},computed:{modalFormTitle:function(){return this.title?this.title:this.modalTitle},modalFormSubmitCaption:function(){return this.submitCaption?this.submitCaption:this.modalSubmitCaption}}};const u=(0,o(3744).Z)(m,[["render",function(e,t,o,m,u,p){return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"modal fade",id:o.formId,tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["modal-dialog",o.modalClass])},[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["modal-content",o.modalContentClass])},[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("h1",{class:"modal-title fs-5",innerHTML:p.modalFormTitle},null,8,s),(0,r.renderSlot)(e.$slots,"modalHeader")]),(0,r.createElementVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=function(t){return e.$emit("closeForm")})})]),(0,r.createElementVNode)("div",l,[(0,r.renderSlot)(e.$slots,"default")]),o.showFooter?((0,r.openBlock)(),(0,r.createElementBlock)("div",d,[(0,r.createElementVNode)("div",null,[(0,r.renderSlot)(e.$slots,"footer")]),(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=function(t){return e.$emit("closeForm")})}," Відмінити "),(0,r.createElementVNode)("button",{type:"button",class:(0,r.normalizeClass)(["ms-4 btn",[o.sumbitIsDisabled?"btn-outline-primary":"btn-primary"]]),onClick:t[2]||(t[2]=function(t){return e.$emit("submitData")}),disabled:o.sumbitIsDisabled},(0,r.toDisplayString)(p.modalFormSubmitCaption),11,c)])])):(0,r.createCommentVNode)("",!0)],2)],2)],8,a)}]])},8821:(e,t,o)=>{o.d(t,{Z:()=>g});var r=o(8222),a={class:"row mb-3"},n={class:"col"},i=(0,r.createElementVNode)("label",{for:"permissionCode",class:"form-label"},"Код",-1),s={id:"permissionCodeValidation",class:"invalid-feedback"},l={class:"row mb-3"},d={class:"col"},c=(0,r.createElementVNode)("label",{for:"permissionName",class:"form-label"},"Назва",-1),m={id:"permissionNameValidation",class:"invalid-feedback"},u={class:"row mb-3"},p={class:"col"},f=(0,r.createElementVNode)("label",{for:"permissionDescription",class:"form-label"},"Опис",-1),h={id:"permissionDescriptionValidation",class:"invalid-feedback"},v={class:"row mb-3"},b={class:"col"},E=(0,r.createElementVNode)("label",{for:"permissionError",class:"form-label"},"Відмова в доступі",-1),N={id:"permissionDescriptionValidation",class:"invalid-feedback"};var V=o(3574),D=o(2965),C=o(3753);const y={name:"PermissionForm",components:{ModalForm:V.Z},props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},mixins:[D.Z,C.Z],data:function(){return{apiUrl:"/api/v1/permissions"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.formData.description="",this.formData.error="",this.errors=[]}}};const g=(0,o(3744).Z)(y,[["render",function(e,t,o,V,D,C){var y=(0,r.resolveComponent)("ModalForm");return(0,r.openBlock)(),(0,r.createBlock)(y,{formId:"PermissionForm",onSubmitData:e.submitData,onCloseForm:C.clearFormData},{default:(0,r.withCtx)((function(){return[(0,r.createElementVNode)("div",a,[(0,r.createElementVNode)("div",n,[i,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",class:(0,r.normalizeClass)(["form-control",e.hasError("code")?"is-invalid":""]),id:"permissionCode","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.formData.code=e})},null,2),[[r.vModelText,o.formData.code]]),(0,r.createElementVNode)("div",s,(0,r.toDisplayString)(e.getError("code")),1)])]),(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",d,[c,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",class:(0,r.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"permissionName","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.formData.name=e})},null,2),[[r.vModelText,o.formData.name]]),(0,r.createElementVNode)("div",m,(0,r.toDisplayString)(e.getError("name")),1)])]),(0,r.createElementVNode)("div",u,[(0,r.createElementVNode)("div",p,[f,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",class:(0,r.normalizeClass)(["form-control",e.hasError("description")?"is-invalid":""]),id:"permissionDescription","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.formData.description=e})},null,2),[[r.vModelText,o.formData.description]]),(0,r.createElementVNode)("div",h,(0,r.toDisplayString)(e.getError("description")),1)])]),(0,r.createElementVNode)("div",v,[(0,r.createElementVNode)("div",b,[E,(0,r.withDirectives)((0,r.createElementVNode)("textarea",{class:(0,r.normalizeClass)(["form-control",e.hasError("error")?"is-invalid":""]),id:"permissionError",rows:"2","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.formData.error=e})},"\n                ",2),[[r.vModelText,o.formData.error]]),(0,r.createElementVNode)("div",N,(0,r.toDisplayString)(e.getError("error")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]])},1942:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var r=o(8222),a={class:"card"},n={class:"card-header"},i={class:"dictionary-name__wrapper"},s=(0,r.createElementVNode)("span",null,"Довідник 'Дозволи'",-1),l={class:"card-body"},d=(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("th",{class:"show-record"}),(0,r.createElementVNode)("th",null,"Код"),(0,r.createElementVNode)("th",null,"Назва "),(0,r.createElementVNode)("th",null,"Опис")],-1),c={class:"text-center"};var m=o(8877),u=o(8821),p=o(5221);const f={name:"PermissionsMain",components:{PermissionForm:u.Z,DictionaryShowRecordLink:p.Z},provide:function(){return{modalTitle:"Новий дозвіл"}},data:function(){return{permissions:[],formData:{code:"",name:"",description:"",error:""}}},methods:{fetchData:function(){var e=this;axios.get("/api/v1/permissions").then((function(t){e.permissions=t.data.data}))},openPermissionForm:function(){new m.u_(document.getElementById("PermissionForm")).show()}},created:function(){this.fetchData()}};const h=(0,o(3744).Z)(f,[["render",function(e,t,o,m,u,p){var f=(0,r.resolveComponent)("ButtonAdd"),h=(0,r.resolveComponent)("DictionaryShowRecordLink"),v=(0,r.resolveComponent)("DataTable"),b=(0,r.resolveComponent)("PermissionForm");return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createElementVNode)("div",a,[(0,r.createElementVNode)("div",n,[(0,r.createElementVNode)("div",i,[s,(0,r.createVNode)(f,{buttonClass:"btn-primary p-2",onClick:p.openPermissionForm,title:"Додати новий дозвіл"},null,8,["onClick"])])]),(0,r.createElementVNode)("div",l,[(0,r.createVNode)(v,{dataTable:u.permissions,tableClass:"table-bordered table-hover",tableHeaderClass:"table-dark"},{header:(0,r.withCtx)((function(){return[d]})),default:(0,r.withCtx)((function(e){return[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.paginatedData,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("tr",{key:e.id},[(0,r.createElementVNode)("td",c,[(0,r.createVNode)(h,{routeName:"permissions.show",routeParamId:e.id},null,8,["routeParamId"])]),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.code),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.description),1)])})),128))]})),_:1},8,["dataTable"])])]),(0,r.createVNode)(b,{formData:u.formData,action:"create",onRefreshData:p.fetchData},null,8,["formData","onRefreshData"])],64)}]])},5634:(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var r=o(8222),a={class:"row"},n={class:"col-md-8 mx-auto"},i={key:0,class:"card"},s={class:"card-header"},l=(0,r.createElementVNode)("h5",null,"Інформація",-1),d={class:"dropdown"},c=(0,r.createElementVNode)("button",{class:"btn btn-sm btn-outline-secondary btn-transparent dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,r.createElementVNode)("span",{class:"mdi mdi-cogs"})],-1),m={class:"dropdown-menu"},u=(0,r.createElementVNode)("span",{class:"mdi mdi-pencil text-warning me-1"},null,-1),p=(0,r.createElementVNode)("li",null,[(0,r.createElementVNode)("hr",{class:"dropdown-divider"})],-1),f=(0,r.createElementVNode)("span",{class:"mdi mdi-trash-can text-danger me-1"},null,-1),h={class:"card-body"},v={class:"row mb-2"},b=(0,r.createElementVNode)("div",{class:"col-md-3"}," Код ",-1),E={class:"col-md-9"},N={class:"row mb-2"},V=(0,r.createElementVNode)("div",{class:"col-md-3"}," Назва ",-1),D={class:"col-md-9"},C={class:"row mb-2"},y=(0,r.createElementVNode)("div",{class:"col-md-3"}," Опис ",-1),g={class:"col-md-9"},k={class:"row mb-2"},w=(0,r.createElementVNode)("div",{class:"col-md-3"}," Доступ заборонено ",-1),S={class:"col-md-9"};var F=o(8877),x=o(8821);const B={name:"PermissionsShow",props:{id:{type:[String,Number],required:!0}},components:{PermissionForm:x.Z},provide:function(){return{modalTitle:"Редагування дозволу",modalSubmitCaption:"Зберегти"}},data:function(){return{permission:{},formData:{},apiUrl:"/api/v1/permissions"}},methods:{fetchData:function(){var e=this;axios.get("".concat(this.apiUrl,"/").concat(this.id)).then((function(t){e.permission=t.data.data}))},openPermissionForm:function(){this.formData=Object.assign({},this.permission),new F.u_(document.getElementById("PermissionForm")).show()},deletePermission:function(e){var t=this;this.$confirmDelete("Ви дійсно бажаєти видалити дозвіл").then((function(o){o.isConfirmed&&axios.delete("".concat(t.apiUrl,"/").concat(e)).then((function(e){t.$toast(e.data.message),t.$router.push({name:"permissions"})})).catch((function(e){t.$errorMessage("Неможливо видалити дозвіл",e.response.data.message,"Зрозуміло")}))}))}},created:function(){this.fetchData()}};const P=(0,o(3744).Z)(B,[["render",function(e,t,o,F,x,B){var P=(0,r.resolveComponent)("breadcrumbs"),T=(0,r.resolveComponent)("PermissionForm");return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createVNode)(P),(0,r.createElementVNode)("div",a,[(0,r.createElementVNode)("div",n,[x.permission.code?((0,r.openBlock)(),(0,r.createElementBlock)("div",i,[(0,r.createElementVNode)("div",s,[l,(0,r.createElementVNode)("div",d,[c,(0,r.createElementVNode)("ul",m,[(0,r.createElementVNode)("li",null,[(0,r.createElementVNode)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=function(){return B.openPermissionForm&&B.openPermissionForm.apply(B,arguments)})},[u,(0,r.createTextVNode)(" Редагувати ")])]),p,(0,r.createElementVNode)("li",null,[(0,r.createElementVNode)("a",{class:"dropdown-item",onClick:t[1]||(t[1]=function(e){return B.deletePermission(x.permission.id)})},[f,(0,r.createTextVNode)(" Видалити ")])])])])]),(0,r.createElementVNode)("div",h,[(0,r.createElementVNode)("div",v,[b,(0,r.createElementVNode)("div",E,(0,r.toDisplayString)(x.permission.code),1)]),(0,r.createElementVNode)("div",N,[V,(0,r.createElementVNode)("div",D,(0,r.toDisplayString)(x.permission.name),1)]),(0,r.createElementVNode)("div",C,[y,(0,r.createElementVNode)("div",g,(0,r.toDisplayString)(x.permission.description),1)]),(0,r.createElementVNode)("div",k,[w,(0,r.createElementVNode)("div",S,(0,r.toDisplayString)(x.permission.error),1)])])])):(0,r.createCommentVNode)("",!0)])]),(0,r.createVNode)(T,{formData:x.formData,action:"update",onRefreshData:B.fetchData},null,8,["formData","onRefreshData"])],64)}]])}}]);