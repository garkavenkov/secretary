"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[144],{2965:(a,e,t)=>{t.d(e,{Z:()=>r});const r={data:function(){return{errors:{}}},methods:{getError:function(a){return this.errors&&this.errors[a]?this.errors[a][0]:""},hasError:function(a){return!(!this.errors||!this.errors[a])}},created:function(){var a=this,e=this,t=Object.keys(this.formData);this.excludeFiledsFromCreateWatch&&(t=t.filter((function(e){return!a.excludeFiledsFromCreateWatch.includes(e)}))),t.forEach((function(a){var t="formData.".concat(a);e.$watch(t,(function(){this.errors[a]&&delete this.errors[a]}))}))}}},3753:(a,e,t)=>{t.d(e,{Z:()=>r});const r={methods:{submitData:function(){var a=this;"create"==this.action?axios.post(this.apiUrl,this.formData).then((function(e){a.$emit("refreshData"),a.$toast(e.data.message),void 0!==a.clearFormData&&a.clearFormData()})).catch((function(e){var t;a.errors=null===(t=e.response)||void 0===t?void 0:t.data.errors})):"update"==this.action&&axios.patch("".concat(this.apiUrl,"/").concat(this.formData.id),this.formData).then((function(e){a.errors=[],a.$emit("refreshData"),a.$toast(e.data.message)})).catch((function(e){var t;a.errors=null===(t=e.response)||void 0===t?void 0:t.data.errors}))}}}},7654:(a,e,t)=>{t.d(e,{Z:()=>i});var r=t(3645),n=t.n(r)()((function(a){return a[1]}));n.push([a.id,".per-page[data-v-46ce95a2],.search[data-v-46ce95a2]{border:1px solid #ced4da;border-radius:.25rem;color:#495057;font-size:.9rem;font-weight:400;line-height:1.6}.per-page[data-v-46ce95a2]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0 0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E\") right .75rem center/8px 10px no-repeat;padding:.3rem 1.5rem .3rem .5rem;vertical-align:middle}.search__wrapper label[data-v-46ce95a2]{margin-right:.5rem}.search__wrapper .search[data-v-46ce95a2]{background-clip:padding-box;background-color:#fff;display:inline-block;height:calc(1.6em + .75rem);padding:.375rem .75rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;width:200px}.per-page[data-v-46ce95a2]:focus,.search[data-v-46ce95a2]:focus{border-color:#7db8fb;box-shadow:0 0 0 .2rem rgba(7,117,242,.25);outline:0}.per-page__wrapper span[data-v-46ce95a2]{margin-right:.5rem}tbody tr[data-v-46ce95a2]:last-of-type{border-bottom:2px solid #343a40}",""]);const i=n},6654:(a,e,t)=>{t.d(e,{Z:()=>k});var r=t(8222),n=function(a){return(0,r.dD)("data-v-46ce95a2"),a=a(),(0,r.Cn)(),a},i={class:"data-table--wrapper"},o={key:0,class:"data-table_ d-flex justify-content-between pb-2"},s={class:"per-page__wrapper"},l=n((function(){return(0,r._)("span",null,"Відображати",-1)})),d=["disabled"],c=["value"],u={class:"search__wrapper"},m={autocomplete:"off"},p=n((function(){return(0,r._)("label",{for:"search"},"Поіск",-1)})),h={class:"table__wrapper"},f={class:"table-responsive"},g={key:1,class:"data-table__pagination--wrapper d-flex justify-content-between align-items-center py-2"},b={class:"pagination mb-0"},_=["innerHTML","onClick"],v=["onClick"];const w={name:"DataTable",props:{perPageItems:{type:Array,required:!1,default:function(){return[10,20,50]}},dataTable:{type:Array},tableHeaderClass:{type:String,required:!1},tableClass:{type:String,required:!1},searchable:{type:String,required:!1,default:""},showActionsPanel:{type:Boolean,required:!1,default:function(){return!0}},showPaginationPanel:{type:Boolean,required:!1,default:function(){return!0}},externalPagination:{type:Object,required:!1}},data:function(){return{currentPage:1,perPage:this.perPageItems[0],searchData:""}},emits:["pageChanged","perPageChanged"],methods:{changePerPage:function(a){var e;null!==(e=this.externalPagination)&&void 0!==e&&e.per_page?this.$emit("perPageChanged",a):(this.perPage=parseInt(a),this.currentPage=1)},nextPage:function(){this.currentPage++},prevPage:function(){this.currentPage--},changePage:function(a){var e;null!==(e=this.externalPagination)&&void 0!==e&&e.current_page&&this.$emit("pageChanged",a),this.currentPage=a}},computed:{pagesCount:function(){var a;return null!==(a=this.externalPagination)&&void 0!==a&&a.last_page?this.externalPagination.last_page:""==this.searchData?Math.ceil(this.dataTable.length/this.perPage):Math.ceil(this.paginatedData.length/this.perPage)},paginatedData:function(){var a,e=this;if(null!==(a=this.externalPagination)&&void 0!==a&&a.total)return""!==this.searchData?this.dataTable.filter((function(a){return e.$parent.searchData(a,e.searchData)})):this.dataTable;var t=(this.currentPage-1)*this.perPage,r=t+this.perPage;return""!==this.searchData?this.dataTable.filter((function(a){return e.$parent.searchData(a,e.searchData)})).slice(t,r):this.dataTable.slice(t,r)},shownFrom:function(){var a;return null!==(a=this.externalPagination)&&void 0!==a&&a.from?this.externalPagination.from:(this.currentPage-1)*this.perPage+1},shownTo:function(){var a;if(null!==(a=this.externalPagination)&&void 0!==a&&a.to)return this.externalPagination.to;var e=this.shownFrom+this.perPage;return e<this.dataTable.length?e:this.dataTable.length},shownTotal:function(){var a;return null!==(a=this.externalPagination)&&void 0!==a&&a.total?this.externalPagination.total:this.dataTable.length},isLastPage:function(){return this.currentPage==this.pagesCount},isFirstPage:function(){return 1==this.currentPage}}};var D=t(3379),P=t.n(D),y=t(7654),C={insert:"head",singleton:!1};P()(y.Z,C);y.Z.locals;const k=(0,t(3744).Z)(w,[["render",function(a,e,t,n,w,D){var P;return(0,r.wg)(),(0,r.iD)("div",i,[t.showActionsPanel?((0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",s,[l,(0,r._)("select",{name:"per_Page",id:"per_page",class:"per-page",disabled:0==D.paginatedData.length,onChange:e[0]||(e[0]=function(a){return D.changePerPage(a.target.value)})},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.perPageItems,(function(a,e){return(0,r.wg)(),(0,r.iD)("option",{key:e,value:a},(0,r.zw)(a),9,c)})),128))],40,d)]),(0,r._)("div",u,[(0,r._)("form",m,[p,(0,r.wy)((0,r._)("input",{type:"search",id:"search",class:"search",autocomplete:"off","onUpdate:modelValue":e[1]||(e[1]=function(a){return w.searchData=a})},null,512),[[r.nr,w.searchData]])])])])):(0,r.kq)("",!0),(0,r._)("div",h,[(0,r._)("div",f,[(0,r._)("table",{class:(0,r.C_)(["table table-striped",t.tableClass])},[(0,r._)("thead",{class:(0,r.C_)(t.tableHeaderClass)},[(0,r.WI)(a.$slots,"header",{},void 0,!0)],2),(0,r._)("tbody",null,[(0,r.WI)(a.$slots,"default",{paginatedData:D.paginatedData},void 0,!0)]),(0,r._)("tfoot",null,[(0,r.WI)(a.$slots,"footer",{},void 0,!0)])],2)])]),D.paginatedData.length>0&&t.showPaginationPanel?((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",null,"Відображено з "+(0,r.zw)(D.shownFrom)+" по "+(0,r.zw)(D.shownTo)+" із "+(0,r.zw)(D.shownTotal),1),(0,r._)("ul",b,[null!==(P=t.externalPagination)&&void 0!==P&&P.links?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(t.externalPagination.links,(function(a,e){return(0,r.wg)(),(0,r.iD)("li",{class:"page-item",key:e},[(0,r._)("a",{class:(0,r.C_)(["page-link",[a.active?"active":"",a.url?"":"disabled"]]),innerHTML:a.label,onClick:function(e){return D.changePage(a.url)}},null,10,_)])})),128)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("li",{class:(0,r.C_)(["page-item",{disabled:D.isFirstPage}])},[(0,r._)("a",{class:"page-link",onClick:e[2]||(e[2]=function(){return D.prevPage&&D.prevPage.apply(D,arguments)})}," Previous ")],2),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(D.pagesCount,(function(a){return(0,r.wg)(),(0,r.iD)("li",{class:(0,r.C_)(["page-item",[w.currentPage==a?"active":""]]),key:a},[(0,r._)("a",{class:"page-link",onClick:function(e){return D.changePage(a)}},(0,r.zw)(a),9,v)],2)})),128)),(0,r._)("li",{class:(0,r.C_)(["page-item",{disabled:D.isLastPage}])},[(0,r._)("a",{class:"page-link",onClick:e[3]||(e[3]=function(){return D.nextPage&&D.nextPage.apply(D,arguments)})}," Next ")],2)],64))])])):(0,r.kq)("",!0)])}],["__scopeId","data-v-46ce95a2"]])},6036:(a,e,t)=>{t.d(e,{Z:()=>m});var r=t(8222),n=["id"],i={class:"modal-header"},o={class:"d-flex align-items-center"},s=["innerHTML"],l={class:"modal-body"},d={key:0,class:"modal-footer justify-content-between"},c=["disabled"];const u={name:"ModalForm",props:{formId:{type:String,required:!0},modalClass:{type:String,required:!1,default:""},modalContentClass:{type:String,required:!1,default:""},showFooter:{type:Boolean,required:!1,default:function(){return!0}},sumbitIsDisabled:{type:Boolean,required:!1,default:function(){return!1}},title:{type:String,required:!1,default:""},submitCaption:{type:String,required:!1,default:""}},inject:{modalTitle:{from:"modalTitle",default:"Новий запис"},modalSubmitCaption:{from:"modalSubmitCaption",default:"Додати"}},data:function(){return{}},computed:{modalFormTitle:function(){return this.title?this.title:this.modalTitle},modalFormSubmitCaption:function(){return this.submitCaption?this.submitCaption:this.modalSubmitCaption}}};const m=(0,t(3744).Z)(u,[["render",function(a,e,t,u,m,p){return(0,r.wg)(),(0,r.iD)("div",{class:"modal fade",id:t.formId,tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[(0,r._)("div",{class:(0,r.C_)(["modal-dialog",t.modalClass])},[(0,r._)("div",{class:(0,r.C_)(["modal-content",t.modalContentClass])},[(0,r._)("div",i,[(0,r._)("div",o,[(0,r._)("h1",{class:"modal-title fs-5",innerHTML:p.modalFormTitle},null,8,s),(0,r.WI)(a.$slots,"modalHeader")]),(0,r._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=function(e){return a.$emit("closeForm")})})]),(0,r._)("div",l,[(0,r.WI)(a.$slots,"default")]),t.showFooter?((0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",null,[(0,r.WI)(a.$slots,"footer")]),(0,r._)("div",null,[(0,r._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=function(e){return a.$emit("closeForm")})},"Відмінити"),(0,r._)("button",{type:"button",class:"btn btn-primary ms-4",onClick:e[2]||(e[2]=function(e){return a.$emit("submitData")}),disabled:t.sumbitIsDisabled},(0,r.zw)(p.modalFormSubmitCaption),9,c)])])):(0,r.kq)("",!0)],2)],2)],8,n)}]])},8821:(a,e,t)=>{t.d(e,{Z:()=>C});var r=t(8222),n={class:"row mb-3"},i={class:"col"},o=(0,r._)("label",{for:"permissionCode",class:"form-label"},"Код",-1),s={id:"permissionCodeValidation",class:"invalid-feedback"},l={class:"row mb-3"},d={class:"col"},c=(0,r._)("label",{for:"permissionName",class:"form-label"},"Назва",-1),u={id:"permissionNameValidation",class:"invalid-feedback"},m={class:"row mb-3"},p={class:"col"},h=(0,r._)("label",{for:"permissionDescription",class:"form-label"},"Опис",-1),f={id:"permissionDescriptionValidation",class:"invalid-feedback"},g={class:"row mb-3"},b={class:"col"},_=(0,r._)("label",{for:"permissionError",class:"form-label"},"Відмова в доступі",-1),v={id:"permissionDescriptionValidation",class:"invalid-feedback"};var w=t(6036),D=t(2965),P=t(3753);const y={name:"PermissionForm",components:{ModalForm:w.Z},props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},mixins:[D.Z,P.Z],data:function(){return{apiUrl:"/api/v1/permissions"}},methods:{clearFormData:function(){this.formData.code="",this.formData.name="",this.formData.description="",this.formData.error="",this.errors=[]}}};const C=(0,t(3744).Z)(y,[["render",function(a,e,t,w,D,P){var y=(0,r.up)("ModalForm");return(0,r.wg)(),(0,r.j4)(y,{formId:"PermissionForm",onSubmitData:a.submitData,onCloseForm:P.clearFormData},{default:(0,r.w5)((function(){return[(0,r._)("div",n,[(0,r._)("div",i,[o,(0,r.wy)((0,r._)("input",{type:"text",class:(0,r.C_)(["form-control",a.hasError("code")?"is-invalid":""]),id:"permissionCode","onUpdate:modelValue":e[0]||(e[0]=function(a){return t.formData.code=a})},null,2),[[r.nr,t.formData.code]]),(0,r._)("div",s,(0,r.zw)(a.getError("code")),1)])]),(0,r._)("div",l,[(0,r._)("div",d,[c,(0,r.wy)((0,r._)("input",{type:"text",class:(0,r.C_)(["form-control",a.hasError("name")?"is-invalid":""]),id:"permissionName","onUpdate:modelValue":e[1]||(e[1]=function(a){return t.formData.name=a})},null,2),[[r.nr,t.formData.name]]),(0,r._)("div",u,(0,r.zw)(a.getError("name")),1)])]),(0,r._)("div",m,[(0,r._)("div",p,[h,(0,r.wy)((0,r._)("input",{type:"text",class:(0,r.C_)(["form-control",a.hasError("description")?"is-invalid":""]),id:"permissionDescription","onUpdate:modelValue":e[2]||(e[2]=function(a){return t.formData.description=a})},null,2),[[r.nr,t.formData.description]]),(0,r._)("div",f,(0,r.zw)(a.getError("description")),1)])]),(0,r._)("div",g,[(0,r._)("div",b,[_,(0,r.wy)((0,r._)("textarea",{class:(0,r.C_)(["form-control",a.hasError("error")?"is-invalid":""]),id:"permissionError",rows:"2","onUpdate:modelValue":e[3]||(e[3]=function(a){return t.formData.error=a})},"\n                ",2),[[r.nr,t.formData.error]]),(0,r._)("div",v,(0,r.zw)(a.getError("error")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]])},2867:(a,e,t)=>{t.r(e),t.d(e,{default:()=>g});var r=t(8222),n={class:"card"},i={class:"card-header"},o={class:"dictionary-name__wrapper"},s=(0,r._)("span",null,"Довідник 'Дозволи'",-1),l=[(0,r._)("span",{class:"mdi mdi-plus"},null,-1)],d={class:"card-body"},c=(0,r._)("tr",null,[(0,r._)("th"),(0,r._)("th",null,"Код"),(0,r._)("th",null,"Назва "),(0,r._)("th",null,"Опис")],-1),u=(0,r._)("span",{class:"mdi mdi-eye-outline"},null,-1);var m=t(8877),p=t(6654),h=t(8821);const f={name:"PermissionsMain",components:{DataTable:p.Z,PermissionForm:h.Z},provide:function(){return{modalTitle:"Новий дозвіл"}},data:function(){return{permissions:[],formData:{code:"",name:"",description:"",error:""}}},methods:{fetchData:function(){var a=this;axios.get("/api/v1/permissions").then((function(e){a.permissions=e.data.data}))},openPermissionForm:function(){new m.u_(document.getElementById("PermissionForm")).show()}},created:function(){this.fetchData()}};const g=(0,t(3744).Z)(f,[["render",function(a,e,t,m,p,h){var f=(0,r.up)("breadcrumbs"),g=(0,r.up)("router-link"),b=(0,r.up)("DataTable"),_=(0,r.up)("PermissionForm");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(f),(0,r._)("div",n,[(0,r._)("div",i,[(0,r._)("div",o,[s,(0,r._)("button",{class:"btn btn-sm btn-primary",onClick:e[0]||(e[0]=function(){return h.openPermissionForm&&h.openPermissionForm.apply(h,arguments)})},l)])]),(0,r._)("div",d,[(0,r.Wm)(b,{dataTable:p.permissions,tableHeaderClass:"table-dark"},{header:(0,r.w5)((function(){return[c]})),default:(0,r.w5)((function(a){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.paginatedData,(function(a){return(0,r.wg)(),(0,r.iD)("tr",{key:a.id},[(0,r._)("td",null,[(0,r.Wm)(g,{to:{name:"permissions.show",params:{id:a.id}}},{default:(0,r.w5)((function(){return[u]})),_:2},1032,["to"])]),(0,r._)("td",null,(0,r.zw)(a.code),1),(0,r._)("td",null,(0,r.zw)(a.name),1),(0,r._)("td",null,(0,r.zw)(a.description),1)])})),128))]})),_:1},8,["dataTable"])])]),(0,r.Wm)(_,{formData:p.formData,action:"create",onRefreshData:h.fetchData},null,8,["formData","onRefreshData"])],64)}]])},5634:(a,e,t)=>{t.r(e),t.d(e,{default:()=>z});var r=t(8222),n={class:"row"},i={class:"col-md-8 mx-auto"},o={key:0,class:"card"},s={class:"card-header"},l=(0,r._)("h5",null,"Інформація",-1),d={class:"dropdown"},c=(0,r._)("button",{class:"btn btn-sm btn-outline-secondary btn-transparent dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,r._)("span",{class:"mdi mdi-cogs"})],-1),u={class:"dropdown-menu"},m=(0,r._)("span",{class:"mdi mdi-pencil text-warning me-1"},null,-1),p=(0,r._)("li",null,[(0,r._)("hr",{class:"dropdown-divider"})],-1),h=(0,r._)("span",{class:"mdi mdi-trash-can text-danger me-1"},null,-1),f={class:"card-body"},g={class:"row mb-2"},b=(0,r._)("div",{class:"col-md-3"}," Код ",-1),_={class:"col-md-9"},v={class:"row mb-2"},w=(0,r._)("div",{class:"col-md-3"}," Назва ",-1),D={class:"col-md-9"},P={class:"row mb-2"},y=(0,r._)("div",{class:"col-md-3"}," Опис ",-1),C={class:"col-md-9"},k={class:"row mb-2"},x=(0,r._)("div",{class:"col-md-3"}," Доступ заборонено ",-1),F={class:"col-md-9"};var T=t(8877),$=t(8821);const q={name:"PermissionsShow",props:{id:{type:[String,Number],required:!0}},components:{PermissionForm:$.Z},provide:function(){return{modalTitle:"Редагування дозволу",modalSubmitCaption:"Зберегти"}},data:function(){return{permission:{},formData:{},apiUrl:"/api/v1/permissions"}},methods:{fetchData:function(){var a=this;axios.get("".concat(this.apiUrl,"/").concat(this.id)).then((function(e){a.permission=e.data.data}))},openPermissionForm:function(){this.formData=Object.assign({},this.permission),new T.u_(document.getElementById("PermissionForm")).show()},deletePermission:function(a){var e=this;this.$confirmDelete("Ви дійсно бажаєти видалити дозвіл").then((function(t){t.isConfirmed&&axios.delete("".concat(e.apiUrl,"/").concat(a)).then((function(a){e.$toast(a.data.message),e.$router.push({name:"permissions"})})).catch((function(a){e.$errorMessage("Неможливо видалити дозвіл",a.response.data.message,"Зрозуміло")}))}))}},created:function(){this.fetchData()}};const z=(0,t(3744).Z)(q,[["render",function(a,e,t,T,$,q){var z=(0,r.up)("breadcrumbs"),S=(0,r.up)("PermissionForm");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(z),(0,r._)("div",n,[(0,r._)("div",i,[$.permission.code?((0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",s,[l,(0,r._)("div",d,[c,(0,r._)("ul",u,[(0,r._)("li",null,[(0,r._)("a",{class:"dropdown-item",onClick:e[0]||(e[0]=function(){return q.openPermissionForm&&q.openPermissionForm.apply(q,arguments)})},[m,(0,r.Uk)(" Редагувати ")])]),p,(0,r._)("li",null,[(0,r._)("a",{class:"dropdown-item",onClick:e[1]||(e[1]=function(a){return q.deletePermission($.permission.id)})},[h,(0,r.Uk)(" Видалити ")])])])])]),(0,r._)("div",f,[(0,r._)("div",g,[b,(0,r._)("div",_,(0,r.zw)($.permission.code),1)]),(0,r._)("div",v,[w,(0,r._)("div",D,(0,r.zw)($.permission.name),1)]),(0,r._)("div",P,[y,(0,r._)("div",C,(0,r.zw)($.permission.description),1)]),(0,r._)("div",k,[x,(0,r._)("div",F,(0,r.zw)($.permission.error),1)])])])):(0,r.kq)("",!0)])]),(0,r.Wm)(S,{formData:$.formData,action:"update",onRefreshData:q.fetchData},null,8,["formData","onRefreshData"])],64)}]])}}]);