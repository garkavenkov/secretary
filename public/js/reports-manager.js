"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[465],{2965:(e,t,o)=>{o.d(t,{Z:()=>a});const a={data:function(){return{errors:{}}},methods:{getError:function(e){return this.errors&&this.errors[e]?this.errors[e][0]:""},hasError:function(e){return!(!this.errors||!this.errors[e])}},created:function(){var e=this,t=this,o=Object.keys(this.formData);this.excludeFiledsFromCreateWatch&&(o=o.filter((function(t){return!e.excludeFiledsFromCreateWatch.includes(t)}))),o.forEach((function(e){var o="formData.".concat(e);t.$watch(o,(function(){this.errors[e]&&delete this.errors[e]}))}))}}},8297:(e,t,o)=>{o.d(t,{Z:()=>a});const a={methods:{prepareDataForDownload:function(e,t){var o=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=o,a.setAttribute("download",t),document.body.appendChild(a),a.click()}}}},5221:(e,t,o)=>{o.d(t,{Z:()=>i});var a=o(8222);var r=o(6196),l=o(5317);const n={name:"DictionaryShowRecordLink",props:{size:{type:[String,Number],required:!1,default:16},routeName:{type:String,required:!0},routeParamId:{type:[String,Number],required:!0},title:{type:String,required:!1,default:"Перейти до інформації"},mdiIconPath:{type:String,required:!1,default:""}},components:{SvgIcon:r.Z},computed:{path:function(){return""!==this.mdiIconPath?this.mdiIconPath:l.hiR}}};const i=(0,o(3744).Z)(n,[["render",function(e,t,o,r,l,n){var i=(0,a.resolveComponent)("SvgIcon"),d=(0,a.resolveComponent)("router-link");return(0,a.openBlock)(),(0,a.createBlock)(d,{to:{name:o.routeName,params:{id:o.routeParamId}},title:o.title},{default:(0,a.withCtx)((function(){return[(0,a.createVNode)(i,{type:"mdi",path:n.path,size:o.size},null,8,["path","size"])]})),_:1},8,["to","title"])}]])},4170:(e,t,o)=>{o.d(t,{Z:()=>u});var a=o(8222),r=["id"],l={class:"modal-header"},n={class:"d-flex align-items-center"},i=["innerHTML"],d={class:"modal-body"},s={key:0,class:"modal-footer justify-content-between"},c=["disabled"];const m={name:"ModalForm",props:{formId:{type:String,required:!0},modalClass:{type:String,required:!1,default:""},modalContentClass:{type:String,required:!1,default:""},showFooter:{type:Boolean,required:!1,default:function(){return!0}},sumbitIsDisabled:{type:Boolean,required:!1,default:function(){return!1}},title:{type:String,required:!1,default:""},submitCaption:{type:String,required:!1,default:""}},inject:{modalTitle:{from:"modalTitle",default:"Новий запис"},modalSubmitCaption:{from:"modalSubmitCaption",default:"Додати"}},data:function(){return{}},computed:{modalFormTitle:function(){return this.title?this.title:this.modalTitle},modalFormSubmitCaption:function(){return this.submitCaption?this.submitCaption:this.modalSubmitCaption}}};const u=(0,o(3744).Z)(m,[["render",function(e,t,o,m,u,p){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"modal fade",id:o.formId,tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["modal-dialog",o.modalClass])},[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["modal-content",o.modalContentClass])},[(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("div",n,[(0,a.createElementVNode)("h1",{class:"modal-title fs-5",innerHTML:p.modalFormTitle},null,8,i),(0,a.renderSlot)(e.$slots,"modalHeader")]),(0,a.createElementVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=function(t){return e.$emit("closeForm")})})]),(0,a.createElementVNode)("div",d,[(0,a.renderSlot)(e.$slots,"default")]),o.showFooter?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createElementVNode)("div",null,[(0,a.renderSlot)(e.$slots,"footer")]),(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=function(t){return e.$emit("closeForm")})}," Відмінити "),(0,a.createElementVNode)("button",{type:"button",class:(0,a.normalizeClass)(["ms-4 btn",[o.sumbitIsDisabled?"btn-outline-primary":"btn-primary"]]),onClick:t[2]||(t[2]=function(t){return e.$emit("submitData")}),disabled:o.sumbitIsDisabled},(0,a.toDisplayString)(p.modalFormSubmitCaption),11,c)])])):(0,a.createCommentVNode)("",!0)],2)],2)],8,r)}]])},9809:(e,t,o)=>{o.r(t),o.d(t,{default:()=>L});var a=o(8222),r={class:"card"},l={class:"card-header"},n=(0,a.createElementVNode)("h6",null,"Менеджер звітів",-1),i={class:"card-body"},d={class:"table table-bordered table-hover"},s=(0,a.createElementVNode)("thead",{class:"table-secondary"},[(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("th",{class:"show-record"}),(0,a.createElementVNode)("th",null,"Назва"),(0,a.createElementVNode)("th",null,"Описа"),(0,a.createElementVNode)("th",null,"Файл"),(0,a.createElementVNode)("th",null,"Модель"),(0,a.createElementVNode)("th",null,"Іконка")])],-1),c={class:"text-center"};var m=o(8877),u={class:"row mb-3"},p={class:"col"},f=(0,a.createElementVNode)("label",{for:"reportName",class:"form-label"},"Назва",-1),b={id:"reportNameValidation",class:"invalid-feedback"},v={class:"row mb-3"},h={class:"col"},E=(0,a.createElementVNode)("label",{for:"reportDescription",class:"form-label"},"Опис",-1),N={id:"regionNameValidation",class:"invalid-feedback"},V={class:"row mb-3"},y={class:"col"},C=(0,a.createElementVNode)("label",{for:"reportModel",class:"form-label"},"Модель",-1),D=["disabled"],k=(0,a.createElementVNode)("option",{disabled:"",value:"0"},"Оберить модель",-1),g=["value"],S={id:"modelReportValidation",class:"invalid-feedback"},w=(0,a.createElementVNode)("div",{class:"mb-3"},[(0,a.createElementVNode)("label",{for:"formFile",class:"form-label"},"Шаблон документа"),(0,a.createElementVNode)("input",{class:"form-control",type:"file",id:"formFile"})],-1),F={class:"row mb-3"},B={class:"col"},T=(0,a.createElementVNode)("label",{for:"reportIcon",class:"form-label"},"Іконка",-1),x={id:"reportIconValidation",class:"invalid-feedback"};var M=o(2965),R=o(4170);const I={name:"ReportForm",props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"},models:{type:Array,required:!0},disabledFields:{type:Array,required:!1,default:function(){return[]}}},mixins:[M.Z],data:function(){return{}},methods:{submitData:function(e){var t=this,o=new FormData;o.append("name","reporm"),o.append("file",e.target.files[0]),console.log(o);axios.post(URL,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.fetchData(),t.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,html:e.data.message,icon:"success"}))}))},closeForm:function(){}},components:{ModalForm:R.Z}};var q=o(3744);const Z={name:"ReportsMain",data:function(){return{reports:[{id:1,icon:"mdi mdi-file-outline",name:"Довідка про стан сім'ї",description:"Довідка про стан сім'ї",file_name:"family_composition.docx",model:"App\\Models\\HouseholdMember"},{id:2,icon:"mdi mdi-file-outline",name:"Земельна ділянка",description:"Довідка про наявність земельної ділянки",file_name:"member_land.docx",model:"App\\Models\\HouseholdMember"}],models:[{id:1,name:"Член домогосподарства",code:"App\\Models\\HouseholdMember"},{id:2,name:"Домогосподарство",code:"App\\Models\\Household"}],formData:{name:"",description:"",model:"",icon:""},modalTitle:"",modalSubmitCaption:"",action:""}},provide:function(){var e=this;return{modalTitle:(0,a.computed)((function(){return e.modalTitle})),modalSubmitCaption:(0,a.computed)((function(){return e.modalSubmitCaption}))}},methods:{openReportForm:function(){this.modalTitle="Новий документ",this.modalSubmitCaption="Додати",this.action="create",new m.u_(document.getElementById("ReportForm")).show()}},components:{ReportForm:(0,q.Z)(I,[["render",function(e,t,o,r,l,n){var i=(0,a.resolveComponent)("ModalForm");return(0,a.openBlock)(),(0,a.createBlock)(i,{formId:"ReportForm",onSubmitData:n.submitData,onCloseForm:n.closeForm},{default:(0,a.withCtx)((function(){return[(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("div",p,[f,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",class:(0,a.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"reportName","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.formData.name=e})},null,2),[[a.vModelText,o.formData.name]]),(0,a.createElementVNode)("div",b,(0,a.toDisplayString)(e.getError("name")),1)])]),(0,a.createElementVNode)("div",v,[(0,a.createElementVNode)("div",h,[E,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",class:(0,a.normalizeClass)(["form-control",e.hasError("description")?"is-invalid":""]),id:"reportDescription","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.formData.description=e})},null,2),[[a.vModelText,o.formData.description]]),(0,a.createElementVNode)("div",N,(0,a.toDisplayString)(e.getError("description")),1)])]),(0,a.createElementVNode)("div",V,[(0,a.createElementVNode)("div",y,[C,(0,a.withDirectives)((0,a.createElementVNode)("select",{class:(0,a.normalizeClass)(["form-control",e.hasError("model")?"is-invalid":""]),id:"reporModel","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.formData.model=e}),disabled:o.disabledFields.includes("model")},[k,((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.models,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("option",{value:e.code,key:e.id},(0,a.toDisplayString)(e.name),9,g)})),128))],10,D),[[a.vModelSelect,o.formData.model]]),(0,a.createElementVNode)("div",S,(0,a.toDisplayString)(e.getError("model")),1)])]),w,(0,a.createElementVNode)("div",F,[(0,a.createElementVNode)("div",B,[T,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",class:(0,a.normalizeClass)(["form-control",e.hasError("icon")?"is-invalid":""]),id:"reportIcon","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.formData.icon=e})},null,2),[[a.vModelText,o.formData.icon]]),(0,a.createElementVNode)("div",x,(0,a.toDisplayString)(e.getError("icon")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]]),DictionaryShowRecordLink:o(5221).Z}},L=(0,q.Z)(Z,[["render",function(e,t,o,m,u,p){var f=(0,a.resolveComponent)("ButtonAdd"),b=(0,a.resolveComponent)("DictionaryShowRecordLink"),v=(0,a.resolveComponent)("ReportForm");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",r,[(0,a.createElementVNode)("div",l,[n,(0,a.createVNode)(f,{buttonClass:"btn-primary p-2",onClick:p.openReportForm,title:"Додати новий звіт"},null,8,["onClick"])]),(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("table",d,[s,(0,a.createElementVNode)("tbody",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(u.reports,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("tr",{key:e.id},[(0,a.createElementVNode)("td",c,[(0,a.createVNode)(b,{routeName:"reports.manager.show",routeParamId:e.id,title:"Перейти до інформації по звіту"},null,8,["routeParamId"])]),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.description),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.file_name),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.model),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.icon),1)])})),128))])])])]),(0,a.createVNode)(v,{formData:u.formData,action:u.action,models:u.models},null,8,["formData","action","models"])],64)}]])},291:(e,t,o)=>{o.r(t),o.d(t,{default:()=>V});var a=o(8222),r={class:"card"},l={class:"card-header"},n={class:"card-body"},i={class:"row"},d={class:"col"},s=(0,a.createStaticVNode)('<div class="row mb-2"><div class="col-md-4"> Назва </div><div class="col-md-8"> Довідка про стан сім&#39;ї </div></div><div class="row mb-2"><div class="col-md-4"> Опис </div><div class="col-md-8"> Довідка про стан сім&#39;ї </div></div><div class="row mb-2"><div class="col-md-4"> Модель </div><div class="col-md-8"> App\\Models\\HouseholdMember </div></div>',3),c={class:"row mb-3"},m=(0,a.createElementVNode)("div",{class:"col-md-4"},[(0,a.createElementVNode)("label",{for:"formFile",class:"form-label"},"Шаблон документа")],-1),u={class:"col-md-8"},p={class:"row mb-2"},f={class:"col"},b={class:"col"},v={class:"col-md-6"},h=(0,a.createElementVNode)("div",{class:"col-md-6"},"memberFullName",-1);var E=o(8297);const N={name:"ReportsShow",props:{id:{type:[String,Number],required:!0}},mixins:[E.Z],data:function(){return{templateVariables:[]}},methods:{downloadReportTemplate:function(){var e=this;axios.get("/api/v1/download-report-template/1",{responseType:"arraybuffer"}).then((function(t){e.prepareDataForDownload(t,"template.docx")}))},uploadReportTemplate:function(e){var t=this,o="/api/v1/upload-report-template/".concat(this.id),a=new FormData;a.append("name","template"),a.append("file",e.target.files[0]);axios.post(o,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.templateVariables=e.data.variables)}))}}};const V=(0,o(3744).Z)(N,[["render",function(e,t,o,E,N,V){var y=(0,a.resolveComponent)("breadcrumbs");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(y),(0,a.createElementVNode)("div",r,[(0,a.createElementVNode)("div",l," Інформація о звіті "+(0,a.toDisplayString)(o.id),1),(0,a.createElementVNode)("div",n,[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("div",d,[s,(0,a.createElementVNode)("div",c,[m,(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("input",{class:"form-control",type:"file",id:"templateFile",name:"template",onChange:t[0]||(t[0]=function(t){return e.uploadImage(t)})},null,32)])]),(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("div",f,[(0,a.createElementVNode)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=function(){return V.downloadReportTemplate&&V.downloadReportTemplate.apply(V,arguments)})}," Download Template ")])])]),(0,a.createElementVNode)("div",b,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(N.templateVariables,(function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"row mb-3",key:t},[(0,a.createElementVNode)("div",v,(0,a.toDisplayString)(e),1),h])})),128))])])])])],64)}]])}}]);