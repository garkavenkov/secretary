"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[465],{9761:(e,o,a)=>{a.r(o),a.d(o,{default:()=>U});var l=a(8222),t={class:"card"},r={class:"card-header"},i=(0,l._)("h6",null,"Менеджер звітів",-1),n=[(0,l._)("span",{class:"mdi mdi-plus"},null,-1)],d={class:"card-body"},s={class:"table"},m=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th"),(0,l._)("th",null,"Назва"),(0,l._)("th",null,"Описа"),(0,l._)("th",null,"Файл"),(0,l._)("th",null,"Модель"),(0,l._)("th",null,"Іконка")])],-1),c={class:"text-center"},u=(0,l._)("span",{class:"mdi mdi-eye"},null,-1);var p=a(8877),f={class:"row mb-3"},v={class:"col"},_=(0,l._)("label",{for:"reportName",class:"form-label"},"Назва",-1),b={id:"reportNameValidation",class:"invalid-feedback"},w={class:"row mb-3"},h={class:"col"},D=(0,l._)("label",{for:"reportDescription",class:"form-label"},"Опис",-1),y={id:"regionNameValidation",class:"invalid-feedback"},g={class:"row mb-3"},F={class:"col"},C=(0,l._)("label",{for:"reportModel",class:"form-label"},"Модель",-1),M=["disabled"],k=(0,l._)("option",{disabled:"",value:"0"},"Оберить модель",-1),z=["value"],R={id:"modelReportValidation",class:"invalid-feedback"},V=(0,l._)("div",{class:"mb-3"},[(0,l._)("label",{for:"formFile",class:"form-label"},"Шаблон документа"),(0,l._)("input",{class:"form-control",type:"file",id:"formFile"})],-1),E={class:"row mb-3"},H={class:"col"},x=(0,l._)("label",{for:"reportIcon",class:"form-label"},"Іконка",-1),S={id:"reportIconValidation",class:"invalid-feedback"};var A=a(2965),I=a(6036);const N={name:"ReportForm",props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"},models:{type:Array,required:!0},disabledFields:{type:Array,required:!1,default:function(){return[]}}},mixins:[A.Z],data:function(){return{}},methods:{submitData:function(e){var o=this,a=new FormData;a.append("name","reporm"),a.append("file",e.target.files[0]),console.log(a);axios.post(URL,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(o.fetchData(),o.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,html:e.data.message,icon:"success"}))}))},closeForm:function(){}},components:{ModalForm:I.Z}};var T=a(3744);const q={name:"ReportsMain",data:function(){return{reports:[{id:1,icon:"mdi mdi-file-outline",name:"Довідка про стан сім'ї",description:"Довідка про стан сім'ї",file_name:"family_composition.docx",model:"App\\Models\\HouseholdMember"},{id:2,icon:"mdi mdi-file-outline",name:"Земельна ділянка",description:"Довідка про наявність земельної ділянки",file_name:"member_land.docx",model:"App\\Models\\HouseholdMember"}],models:[{id:1,name:"Член домогосподарства",code:"App\\Models\\HouseholdMember"},{id:2,name:"Домогосподарство",code:"App\\Models\\Household"}],formData:{name:"",description:"",model:"",icon:""},modalTitle:"",modalSubmitCaption:"",action:""}},provide:function(){var e=this;return{modalTitle:(0,l.Fl)((function(){return e.modalTitle})),modalSubmitCaption:(0,l.Fl)((function(){return e.modalSubmitCaption}))}},methods:{openReportForm:function(){this.modalTitle="Новий документ",this.modalSubmitCaption="Додати",this.action="create",new p.u_(document.getElementById("ReportForm")).show()}},components:{ReportForm:(0,T.Z)(N,[["render",function(e,o,a,t,r,i){var n=(0,l.up)("ModalForm");return(0,l.wg)(),(0,l.j4)(n,{formId:"ReportForm",onSubmitData:i.submitData,onCloseForm:i.closeForm},{default:(0,l.w5)((function(){return[(0,l._)("div",f,[(0,l._)("div",v,[_,(0,l.wy)((0,l._)("input",{type:"text",class:(0,l.C_)(["form-control",e.hasError("name")?"is-invalid":""]),id:"reportName","onUpdate:modelValue":o[0]||(o[0]=function(e){return a.formData.name=e})},null,2),[[l.nr,a.formData.name]]),(0,l._)("div",b,(0,l.zw)(e.getError("name")),1)])]),(0,l._)("div",w,[(0,l._)("div",h,[D,(0,l.wy)((0,l._)("input",{type:"text",class:(0,l.C_)(["form-control",e.hasError("description")?"is-invalid":""]),id:"reportDescription","onUpdate:modelValue":o[1]||(o[1]=function(e){return a.formData.description=e})},null,2),[[l.nr,a.formData.description]]),(0,l._)("div",y,(0,l.zw)(e.getError("description")),1)])]),(0,l._)("div",g,[(0,l._)("div",F,[C,(0,l.wy)((0,l._)("select",{class:(0,l.C_)(["form-control",e.hasError("model")?"is-invalid":""]),id:"reporModel","onUpdate:modelValue":o[2]||(o[2]=function(e){return a.formData.model=e}),disabled:a.disabledFields.includes("model")},[k,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.models,(function(e){return(0,l.wg)(),(0,l.iD)("option",{value:e.code,key:e.id},(0,l.zw)(e.name),9,z)})),128))],10,M),[[l.bM,a.formData.model]]),(0,l._)("div",R,(0,l.zw)(e.getError("model")),1)])]),V,(0,l._)("div",E,[(0,l._)("div",H,[x,(0,l.wy)((0,l._)("input",{type:"text",class:(0,l.C_)(["form-control",e.hasError("icon")?"is-invalid":""]),id:"reportIcon","onUpdate:modelValue":o[3]||(o[3]=function(e){return a.formData.icon=e})},null,2),[[l.nr,a.formData.icon]]),(0,l._)("div",S,(0,l.zw)(e.getError("icon")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]])}},U=(0,T.Z)(q,[["render",function(e,o,a,p,f,v){var _=(0,l.up)("breadcrumbs"),b=(0,l.up)("router-link"),w=(0,l.up)("ReportForm");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(_),(0,l._)("div",t,[(0,l._)("div",r,[i,(0,l._)("button",{class:"btn btn-sm btn-primary",onClick:o[0]||(o[0]=function(){return v.openReportForm&&v.openReportForm.apply(v,arguments)})},n)]),(0,l._)("div",d,[(0,l._)("table",s,[m,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.reports,(function(e){return(0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",c,[(0,l.Wm)(b,{to:{name:"reports.manager.show",params:{id:e.id}}},{default:(0,l.w5)((function(){return[u]})),_:2},1032,["to"])]),(0,l._)("td",null,(0,l.zw)(e.name),1),(0,l._)("td",null,(0,l.zw)(e.description),1),(0,l._)("td",null,(0,l.zw)(e.file_name),1),(0,l._)("td",null,(0,l.zw)(e.model),1),(0,l._)("td",null,(0,l.zw)(e.icon),1)])})),128))])])])]),(0,l.Wm)(w,{formData:f.formData,action:f.action,models:f.models},null,8,["formData","action","models"])],64)}]])},7008:(e,o,a)=>{a.r(o),a.d(o,{default:()=>b});var l=a(8222),t={class:"card"},r={class:"card-header"},i={class:"card-body"},n={class:"row"},d={class:"col"},s=(0,l.uE)('<div class="row mb-2"><div class="col-md-4"> Назва </div><div class="col-md-8"> Довідка про стан сім&#39;ї </div></div><div class="row mb-2"><div class="col-md-4"> Опис </div><div class="col-md-8"> Довідка про стан сім&#39;ї </div></div><div class="row mb-2"><div class="col-md-4"> Модель </div><div class="col-md-8"> App\\Models\\HouseholdMember </div></div>',3),m={class:"row mb-3"},c=(0,l._)("div",{class:"col-md-4"},[(0,l._)("label",{for:"formFile",class:"form-label"},"Шаблон документа")],-1),u={class:"col-md-8"},p={class:"col"},f={class:"col-md-6"},v=(0,l._)("div",{class:"col-md-6"},"memberFullName",-1);const _={name:"ReportsShow",props:{id:{type:[String,Number],required:!0}},data:function(){return{templateVariables:[]}},methods:{uploadImage:function(e){var o=this;console.log(e.target.files[0]);var a="/api/v1/upload-report-template/".concat(this.id),l=new FormData;l.append("name","template"),l.append("file",e.target.files[0]),console.log(l);axios.post(a,l,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(o.templateVariables=e.data.variables)}))}}};const b=(0,a(3744).Z)(_,[["render",function(e,o,a,_,b,w){var h=(0,l.up)("breadcrumbs");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(h),(0,l._)("div",t,[(0,l._)("div",r," Інформація о звіті "+(0,l.zw)(a.id),1),(0,l._)("div",i,[(0,l._)("div",n,[(0,l._)("div",d,[s,(0,l._)("div",m,[c,(0,l._)("div",u,[(0,l._)("input",{class:"form-control",type:"file",id:"templateFile",name:"template",onChange:o[0]||(o[0]=function(e){return w.uploadImage(e)})},null,32)])])]),(0,l._)("div",p,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(b.templateVariables,(function(e,o){return(0,l.wg)(),(0,l.iD)("div",{class:"row mb-3",key:o},[(0,l._)("div",f,(0,l.zw)(e),1),v])})),128))])])])])],64)}]])}}]);