"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[465],{9761:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U});var l=o(8222),a={class:"card"},r={class:"card-header"},n=(0,l.createElementVNode)("h6",null,"Менеджер звітів",-1),d=[(0,l.createElementVNode)("span",{class:"mdi mdi-plus"},null,-1)],i={class:"card-body"},c={class:"table"},m=(0,l.createElementVNode)("thead",null,[(0,l.createElementVNode)("tr",null,[(0,l.createElementVNode)("th"),(0,l.createElementVNode)("th",null,"Назва"),(0,l.createElementVNode)("th",null,"Описа"),(0,l.createElementVNode)("th",null,"Файл"),(0,l.createElementVNode)("th",null,"Модель"),(0,l.createElementVNode)("th",null,"Іконка")])],-1),s={class:"text-center"},p=(0,l.createElementVNode)("span",{class:"mdi mdi-eye"},null,-1);var u=o(8877),f={class:"row mb-3"},v={class:"col"},E=(0,l.createElementVNode)("label",{for:"reportName",class:"form-label"},"Назва",-1),V={id:"reportNameValidation",class:"invalid-feedback"},N={class:"row mb-3"},b={class:"col"},h=(0,l.createElementVNode)("label",{for:"reportDescription",class:"form-label"},"Опис",-1),D={id:"regionNameValidation",class:"invalid-feedback"},y={class:"row mb-3"},g={class:"col"},k=(0,l.createElementVNode)("label",{for:"reportModel",class:"form-label"},"Модель",-1),F=["disabled"],w=(0,l.createElementVNode)("option",{disabled:"",value:"0"},"Оберить модель",-1),C=["value"],S={id:"modelReportValidation",class:"invalid-feedback"},B=(0,l.createElementVNode)("div",{class:"mb-3"},[(0,l.createElementVNode)("label",{for:"formFile",class:"form-label"},"Шаблон документа"),(0,l.createElementVNode)("input",{class:"form-control",type:"file",id:"formFile"})],-1),M={class:"row mb-3"},x={class:"col"},R=(0,l.createElementVNode)("label",{for:"reportIcon",class:"form-label"},"Іконка",-1),T={id:"reportIconValidation",class:"invalid-feedback"};var _=o(2965),A=o(6036);const I={name:"ReportForm",props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"},models:{type:Array,required:!0},disabledFields:{type:Array,required:!1,default:function(){return[]}}},mixins:[_.Z],data:function(){return{}},methods:{submitData:function(e){var t=this,o=new FormData;o.append("name","reporm"),o.append("file",e.target.files[0]),console.log(o);axios.post(URL,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.fetchData(),t.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,html:e.data.message,icon:"success"}))}))},closeForm:function(){}},components:{ModalForm:A.Z}};var q=o(3744);const H={name:"ReportsMain",data:function(){return{reports:[{id:1,icon:"mdi mdi-file-outline",name:"Довідка про стан сім'ї",description:"Довідка про стан сім'ї",file_name:"family_composition.docx",model:"App\\Models\\HouseholdMember"},{id:2,icon:"mdi mdi-file-outline",name:"Земельна ділянка",description:"Довідка про наявність земельної ділянки",file_name:"member_land.docx",model:"App\\Models\\HouseholdMember"}],models:[{id:1,name:"Член домогосподарства",code:"App\\Models\\HouseholdMember"},{id:2,name:"Домогосподарство",code:"App\\Models\\Household"}],formData:{name:"",description:"",model:"",icon:""},modalTitle:"",modalSubmitCaption:"",action:""}},provide:function(){var e=this;return{modalTitle:(0,l.computed)((function(){return e.modalTitle})),modalSubmitCaption:(0,l.computed)((function(){return e.modalSubmitCaption}))}},methods:{openReportForm:function(){this.modalTitle="Новий документ",this.modalSubmitCaption="Додати",this.action="create",new u.u_(document.getElementById("ReportForm")).show()}},components:{ReportForm:(0,q.Z)(I,[["render",function(e,t,o,a,r,n){var d=(0,l.resolveComponent)("ModalForm");return(0,l.openBlock)(),(0,l.createBlock)(d,{formId:"ReportForm",onSubmitData:n.submitData,onCloseForm:n.closeForm},{default:(0,l.withCtx)((function(){return[(0,l.createElementVNode)("div",f,[(0,l.createElementVNode)("div",v,[E,(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",class:(0,l.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"reportName","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.formData.name=e})},null,2),[[l.vModelText,o.formData.name]]),(0,l.createElementVNode)("div",V,(0,l.toDisplayString)(e.getError("name")),1)])]),(0,l.createElementVNode)("div",N,[(0,l.createElementVNode)("div",b,[h,(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",class:(0,l.normalizeClass)(["form-control",e.hasError("description")?"is-invalid":""]),id:"reportDescription","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.formData.description=e})},null,2),[[l.vModelText,o.formData.description]]),(0,l.createElementVNode)("div",D,(0,l.toDisplayString)(e.getError("description")),1)])]),(0,l.createElementVNode)("div",y,[(0,l.createElementVNode)("div",g,[k,(0,l.withDirectives)((0,l.createElementVNode)("select",{class:(0,l.normalizeClass)(["form-control",e.hasError("model")?"is-invalid":""]),id:"reporModel","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.formData.model=e}),disabled:o.disabledFields.includes("model")},[w,((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.models,(function(e){return(0,l.openBlock)(),(0,l.createElementBlock)("option",{value:e.code,key:e.id},(0,l.toDisplayString)(e.name),9,C)})),128))],10,F),[[l.vModelSelect,o.formData.model]]),(0,l.createElementVNode)("div",S,(0,l.toDisplayString)(e.getError("model")),1)])]),B,(0,l.createElementVNode)("div",M,[(0,l.createElementVNode)("div",x,[R,(0,l.withDirectives)((0,l.createElementVNode)("input",{type:"text",class:(0,l.normalizeClass)(["form-control",e.hasError("icon")?"is-invalid":""]),id:"reportIcon","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.formData.icon=e})},null,2),[[l.vModelText,o.formData.icon]]),(0,l.createElementVNode)("div",T,(0,l.toDisplayString)(e.getError("icon")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]])}},U=(0,q.Z)(H,[["render",function(e,t,o,u,f,v){var E=(0,l.resolveComponent)("breadcrumbs"),V=(0,l.resolveComponent)("router-link"),N=(0,l.resolveComponent)("ReportForm");return(0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,[(0,l.createVNode)(E),(0,l.createElementVNode)("div",a,[(0,l.createElementVNode)("div",r,[n,(0,l.createElementVNode)("button",{class:"btn btn-sm btn-primary",onClick:t[0]||(t[0]=function(){return v.openReportForm&&v.openReportForm.apply(v,arguments)})},d)]),(0,l.createElementVNode)("div",i,[(0,l.createElementVNode)("table",c,[m,(0,l.createElementVNode)("tbody",null,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(f.reports,(function(e){return(0,l.openBlock)(),(0,l.createElementBlock)("tr",{key:e.id},[(0,l.createElementVNode)("td",s,[(0,l.createVNode)(V,{to:{name:"reports.manager.show",params:{id:e.id}}},{default:(0,l.withCtx)((function(){return[p]})),_:2},1032,["to"])]),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.name),1),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.description),1),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.file_name),1),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.model),1),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.icon),1)])})),128))])])])]),(0,l.createVNode)(N,{formData:f.formData,action:f.action,models:f.models},null,8,["formData","action","models"])],64)}]])},7008:(e,t,o)=>{o.r(t),o.d(t,{default:()=>V});var l=o(8222),a={class:"card"},r={class:"card-header"},n={class:"card-body"},d={class:"row"},i={class:"col"},c=(0,l.createStaticVNode)('<div class="row mb-2"><div class="col-md-4"> Назва </div><div class="col-md-8"> Довідка про стан сім&#39;ї </div></div><div class="row mb-2"><div class="col-md-4"> Опис </div><div class="col-md-8"> Довідка про стан сім&#39;ї </div></div><div class="row mb-2"><div class="col-md-4"> Модель </div><div class="col-md-8"> App\\Models\\HouseholdMember </div></div>',3),m={class:"row mb-3"},s=(0,l.createElementVNode)("div",{class:"col-md-4"},[(0,l.createElementVNode)("label",{for:"formFile",class:"form-label"},"Шаблон документа")],-1),p={class:"col-md-8"},u={class:"col"},f={class:"col-md-6"},v=(0,l.createElementVNode)("div",{class:"col-md-6"},"memberFullName",-1);const E={name:"ReportsShow",props:{id:{type:[String,Number],required:!0}},data:function(){return{templateVariables:[]}},methods:{uploadImage:function(e){var t=this;console.log(e.target.files[0]);var o="/api/v1/upload-report-template/".concat(this.id),l=new FormData;l.append("name","template"),l.append("file",e.target.files[0]),console.log(l);axios.post(o,l,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.templateVariables=e.data.variables)}))}}};const V=(0,o(3744).Z)(E,[["render",function(e,t,o,E,V,N){var b=(0,l.resolveComponent)("breadcrumbs");return(0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,[(0,l.createVNode)(b),(0,l.createElementVNode)("div",a,[(0,l.createElementVNode)("div",r," Інформація о звіті "+(0,l.toDisplayString)(o.id),1),(0,l.createElementVNode)("div",n,[(0,l.createElementVNode)("div",d,[(0,l.createElementVNode)("div",i,[c,(0,l.createElementVNode)("div",m,[s,(0,l.createElementVNode)("div",p,[(0,l.createElementVNode)("input",{class:"form-control",type:"file",id:"templateFile",name:"template",onChange:t[0]||(t[0]=function(e){return N.uploadImage(e)})},null,32)])])]),(0,l.createElementVNode)("div",u,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(V.templateVariables,(function(e,t){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"row mb-3",key:t},[(0,l.createElementVNode)("div",f,(0,l.toDisplayString)(e),1),v])})),128))])])])])],64)}]])}}]);