"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[465],{9809:(e,t,o)=>{o.r(t),o.d(t,{default:()=>_});var a=o(8222),l={class:"card"},r={class:"card-header"},n=(0,a.createElementVNode)("h6",null,"Менеджер звітів",-1),d={class:"card-body"},i={class:"table table-bordered table-hover"},c=(0,a.createElementVNode)("thead",{class:"table-secondary"},[(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("th",{class:"show-record"}),(0,a.createElementVNode)("th",null,"Назва"),(0,a.createElementVNode)("th",null,"Описа"),(0,a.createElementVNode)("th",null,"Файл"),(0,a.createElementVNode)("th",null,"Модель"),(0,a.createElementVNode)("th",null,"Іконка")])],-1),m={class:"text-center"};var s=o(8877),p={class:"row mb-3"},u={class:"col"},f=(0,a.createElementVNode)("label",{for:"reportName",class:"form-label"},"Назва",-1),v={id:"reportNameValidation",class:"invalid-feedback"},E={class:"row mb-3"},V={class:"col"},N=(0,a.createElementVNode)("label",{for:"reportDescription",class:"form-label"},"Опис",-1),b={id:"regionNameValidation",class:"invalid-feedback"},h={class:"row mb-3"},D={class:"col"},y=(0,a.createElementVNode)("label",{for:"reportModel",class:"form-label"},"Модель",-1),w=["disabled"],k=(0,a.createElementVNode)("option",{disabled:"",value:"0"},"Оберить модель",-1),g=["value"],F={id:"modelReportValidation",class:"invalid-feedback"},C=(0,a.createElementVNode)("div",{class:"mb-3"},[(0,a.createElementVNode)("label",{for:"formFile",class:"form-label"},"Шаблон документа"),(0,a.createElementVNode)("input",{class:"form-control",type:"file",id:"formFile"})],-1),S={class:"row mb-3"},B={class:"col"},M=(0,a.createElementVNode)("label",{for:"reportIcon",class:"form-label"},"Іконка",-1),R={id:"reportIconValidation",class:"invalid-feedback"};var x=o(2965),T=o(4170);const A={name:"ReportForm",props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"},models:{type:Array,required:!0},disabledFields:{type:Array,required:!1,default:function(){return[]}}},mixins:[x.Z],data:function(){return{}},methods:{submitData:function(e){var t=this,o=new FormData;o.append("name","reporm"),o.append("file",e.target.files[0]),console.log(o);axios.post(URL,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.fetchData(),t.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,html:e.data.message,icon:"success"}))}))},closeForm:function(){}},components:{ModalForm:T.Z}};var I=o(3744);const Z={name:"ReportsMain",data:function(){return{reports:[{id:1,icon:"mdi mdi-file-outline",name:"Довідка про стан сім'ї",description:"Довідка про стан сім'ї",file_name:"family_composition.docx",model:"App\\Models\\HouseholdMember"},{id:2,icon:"mdi mdi-file-outline",name:"Земельна ділянка",description:"Довідка про наявність земельної ділянки",file_name:"member_land.docx",model:"App\\Models\\HouseholdMember"}],models:[{id:1,name:"Член домогосподарства",code:"App\\Models\\HouseholdMember"},{id:2,name:"Домогосподарство",code:"App\\Models\\Household"}],formData:{name:"",description:"",model:"",icon:""},modalTitle:"",modalSubmitCaption:"",action:""}},provide:function(){var e=this;return{modalTitle:(0,a.computed)((function(){return e.modalTitle})),modalSubmitCaption:(0,a.computed)((function(){return e.modalSubmitCaption}))}},methods:{openReportForm:function(){this.modalTitle="Новий документ",this.modalSubmitCaption="Додати",this.action="create",new s.u_(document.getElementById("ReportForm")).show()}},components:{ReportForm:(0,I.Z)(A,[["render",function(e,t,o,l,r,n){var d=(0,a.resolveComponent)("ModalForm");return(0,a.openBlock)(),(0,a.createBlock)(d,{formId:"ReportForm",onSubmitData:n.submitData,onCloseForm:n.closeForm},{default:(0,a.withCtx)((function(){return[(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("div",u,[f,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",class:(0,a.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"reportName","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.formData.name=e})},null,2),[[a.vModelText,o.formData.name]]),(0,a.createElementVNode)("div",v,(0,a.toDisplayString)(e.getError("name")),1)])]),(0,a.createElementVNode)("div",E,[(0,a.createElementVNode)("div",V,[N,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",class:(0,a.normalizeClass)(["form-control",e.hasError("description")?"is-invalid":""]),id:"reportDescription","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.formData.description=e})},null,2),[[a.vModelText,o.formData.description]]),(0,a.createElementVNode)("div",b,(0,a.toDisplayString)(e.getError("description")),1)])]),(0,a.createElementVNode)("div",h,[(0,a.createElementVNode)("div",D,[y,(0,a.withDirectives)((0,a.createElementVNode)("select",{class:(0,a.normalizeClass)(["form-control",e.hasError("model")?"is-invalid":""]),id:"reporModel","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.formData.model=e}),disabled:o.disabledFields.includes("model")},[k,((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.models,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("option",{value:e.code,key:e.id},(0,a.toDisplayString)(e.name),9,g)})),128))],10,w),[[a.vModelSelect,o.formData.model]]),(0,a.createElementVNode)("div",F,(0,a.toDisplayString)(e.getError("model")),1)])]),C,(0,a.createElementVNode)("div",S,[(0,a.createElementVNode)("div",B,[M,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",class:(0,a.normalizeClass)(["form-control",e.hasError("icon")?"is-invalid":""]),id:"reportIcon","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.formData.icon=e})},null,2),[[a.vModelText,o.formData.icon]]),(0,a.createElementVNode)("div",R,(0,a.toDisplayString)(e.getError("icon")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]]),DictionaryShowRecordLink:o(5221).Z}},_=(0,I.Z)(Z,[["render",function(e,t,o,s,p,u){var f=(0,a.resolveComponent)("ButtonAdd"),v=(0,a.resolveComponent)("DictionaryShowRecordLink"),E=(0,a.resolveComponent)("ReportForm");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("div",r,[n,(0,a.createVNode)(f,{buttonClass:"btn-primary p-2",onClick:u.openReportForm,title:"Додати новий звіт"},null,8,["onClick"])]),(0,a.createElementVNode)("div",d,[(0,a.createElementVNode)("table",i,[c,(0,a.createElementVNode)("tbody",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(p.reports,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("tr",{key:e.id},[(0,a.createElementVNode)("td",m,[(0,a.createVNode)(v,{routeName:"reports.manager.show",routeParamId:e.id,title:"Перейти до інформації по звіту"},null,8,["routeParamId"])]),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.description),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.file_name),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.model),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.icon),1)])})),128))])])])]),(0,a.createVNode)(E,{formData:p.formData,action:p.action,models:p.models},null,8,["formData","action","models"])],64)}]])},291:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var a=o(8222),l={class:"card"},r={class:"card-header"},n={class:"card-body"},d={class:"row"},i={class:"col"},c=(0,a.createStaticVNode)('<div class="row mb-2"><div class="col-md-4"> Назва </div><div class="col-md-8"> Довідка про стан сім&#39;ї </div></div><div class="row mb-2"><div class="col-md-4"> Опис </div><div class="col-md-8"> Довідка про стан сім&#39;ї </div></div><div class="row mb-2"><div class="col-md-4"> Модель </div><div class="col-md-8"> App\\Models\\HouseholdMember </div></div>',3),m={class:"row mb-3"},s=(0,a.createElementVNode)("div",{class:"col-md-4"},[(0,a.createElementVNode)("label",{for:"formFile",class:"form-label"},"Шаблон документа")],-1),p={class:"col-md-8"},u={class:"row mb-2"},f={class:"col"},v={class:"col"},E={class:"col-md-6"},V=(0,a.createElementVNode)("div",{class:"col-md-6"},"memberFullName",-1);var N=o(8297);const b={name:"ReportsShow",props:{id:{type:[String,Number],required:!0}},mixins:[N.Z],data:function(){return{templateVariables:[]}},methods:{downloadReportTemplate:function(){var e=this;axios.get("/api/v1/download-report-template/1",{responseType:"arraybuffer"}).then((function(t){e.prepareDataForDownload(t,"template.docx")}))},uploadReportTemplate:function(e){var t=this,o="/api/v1/upload-report-template/".concat(this.id),a=new FormData;a.append("name","template"),a.append("file",e.target.files[0]);axios.post(o,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.templateVariables=e.data.variables)}))}}};const h=(0,o(3744).Z)(b,[["render",function(e,t,o,N,b,h){var D=(0,a.resolveComponent)("breadcrumbs");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(D),(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("div",r," Інформація о звіті "+(0,a.toDisplayString)(o.id),1),(0,a.createElementVNode)("div",n,[(0,a.createElementVNode)("div",d,[(0,a.createElementVNode)("div",i,[c,(0,a.createElementVNode)("div",m,[s,(0,a.createElementVNode)("div",p,[(0,a.createElementVNode)("input",{class:"form-control",type:"file",id:"templateFile",name:"template",onChange:t[0]||(t[0]=function(t){return e.uploadImage(t)})},null,32)])]),(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("div",f,[(0,a.createElementVNode)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=function(){return h.downloadReportTemplate&&h.downloadReportTemplate.apply(h,arguments)})}," Download Template ")])])]),(0,a.createElementVNode)("div",v,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(b.templateVariables,(function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"row mb-3",key:t},[(0,a.createElementVNode)("div",E,(0,a.toDisplayString)(e),1),V])})),128))])])])])],64)}]])}}]);