"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[465],{3425:(e,t,o)=>{o.d(t,{Z:()=>a});const a={data:function(){return{errors:{}}},methods:{getError:function(e){return this.errors&&this.errors[e]?this.errors[e][0]:""},hasError:function(e){return!(!this.errors||!this.errors[e])}},created:function(){var e=this,t=this,o=Object.keys(this.formData);this.excludeFiledsFromCreateWatch&&(o=o.filter((function(t){return!e.excludeFiledsFromCreateWatch.includes(t)}))),o.forEach((function(e){var o="formData.".concat(e);t.$watch(o,(function(){this.errors[e]&&delete this.errors[e]}))}))}}},8476:(e,t,o)=>{o.d(t,{Z:()=>u});var a=o(8222),l=["id"],r={class:"modal-header"},i={class:"d-flex align-items-center"},n=["innerHTML"],d={class:"modal-body"},s={key:0,class:"modal-footer justify-content-between"},m=["disabled"];const c={name:"ModalForm",props:{formId:{type:String,required:!0},modalClass:{type:String,required:!1,default:""},modalContentClass:{type:String,required:!1,default:""},showFooter:{type:Boolean,required:!1,default:function(){return!0}},sumbitIsDisabled:{type:Boolean,required:!1,default:function(){return!1}},title:{type:String,required:!1,default:""},submitCaption:{type:String,required:!1,default:""}},inject:{modalTitle:{from:"modalTitle",default:"Новий запис"},modalSubmitCaption:{from:"modalSubmitCaption",default:"Додати"}},data:function(){return{}},computed:{modalFormTitle:function(){return this.title?this.title:this.modalTitle},modalFormSubmitCaption:function(){return this.submitCaption?this.submitCaption:this.modalSubmitCaption}}};const u=(0,o(3744).Z)(c,[["render",function(e,t,o,c,u,p){return(0,a.wg)(),(0,a.iD)("div",{class:"modal fade",id:o.formId,tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[(0,a._)("div",{class:(0,a.C_)(["modal-dialog",o.modalClass])},[(0,a._)("div",{class:(0,a.C_)(["modal-content",o.modalContentClass])},[(0,a._)("div",r,[(0,a._)("div",i,[(0,a._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel",innerHTML:p.modalFormTitle},null,8,n),(0,a.WI)(e.$slots,"modalHeader")]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=function(t){return e.$emit("closeForm")})})]),(0,a._)("div",d,[(0,a.WI)(e.$slots,"default")]),o.showFooter?((0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",null,[(0,a.WI)(e.$slots,"footer")]),(0,a._)("div",null,[(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=function(t){return e.$emit("closeForm")})},"Відмінити"),(0,a._)("button",{type:"button",class:"btn btn-primary ms-4",onClick:t[2]||(t[2]=function(t){return e.$emit("submitData")}),disabled:o.sumbitIsDisabled},(0,a.zw)(p.modalFormSubmitCaption),9,m)])])):(0,a.kq)("",!0)],2)],2)],8,l)}]])},6753:(e,t,o)=>{o.r(t),o.d(t,{default:()=>A});var a=o(8222),l={class:"card"},r={class:"card-header"},i=(0,a._)("h6",null,"Менеджер звітів",-1),n=[(0,a._)("span",{class:"mdi mdi-plus"},null,-1)],d={class:"card-body"},s={class:"table"},m=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th"),(0,a._)("th",null,"Назва"),(0,a._)("th",null,"Описа"),(0,a._)("th",null,"Файл"),(0,a._)("th",null,"Модель"),(0,a._)("th",null,"Іконка")])],-1),c={class:"text-center"},u=(0,a._)("span",{class:"mdi mdi-eye"},null,-1);var p=o(8877),f={class:"row mb-3"},b={class:"col"},_=(0,a._)("label",{for:"reportName",class:"form-label"},"Назва",-1),v={id:"reportNameValidation",class:"invalid-feedback"},h={class:"row mb-3"},w={class:"col"},y=(0,a._)("label",{for:"reportDescription",class:"form-label"},"Опис",-1),C={id:"regionNameValidation",class:"invalid-feedback"},F={class:"row mb-3"},g={class:"col"},D=(0,a._)("label",{for:"reportModel",class:"form-label"},"Модель",-1),k=["disabled"],S=(0,a._)("option",{disabled:"",value:"0"},"Оберить модель",-1),M=["value"],I={id:"modelReportValidation",class:"invalid-feedback"},q=(0,a._)("div",{class:"mb-3"},[(0,a._)("label",{for:"formFile",class:"form-label"},"Шаблон документа"),(0,a._)("input",{class:"form-control",type:"file",id:"formFile"})],-1),z={class:"row mb-3"},E={class:"col"},H=(0,a._)("label",{for:"reportIcon",class:"form-label"},"Іконка",-1),x={id:"reportIconValidation",class:"invalid-feedback"};var T=o(3425),R=o(8476);const V={name:"ReportForm",props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"},models:{type:Array,required:!0},disabledFields:{type:Array,required:!1,default:function(){return[]}}},mixins:[T.Z],data:function(){return{}},methods:{submitData:function(){},closeForm:function(){}},components:{ModalForm:R.Z}};var W=o(3744);const Z={name:"ReportsMain",data:function(){return{reports:[{id:1,icon:"mdi mdi-file-outline",name:"Довідка про стан сім'ї",description:"Довідка про стан сім'ї",file_name:"family_composition.docx",model:"AppModelsHouseholdMember"},{id:2,icon:"mdi mdi-file-outline",name:"Земельна ділянка",description:"Довідка про наявність земельної ділянки",file_name:"member_land.docx",model:"AppModelsHouseholdMember"}],models:[{id:1,name:"Член домогосподарства",code:"App\\Models\\HouseholdMember"},{id:2,name:"Домогосподарство",code:"App\\Models\\Household"}],formData:{name:"",description:"",model:"",icon:""},modalTitle:"",modalSubmitCaption:"",action:""}},provide:function(){var e=this;return{modalTitle:(0,a.Fl)((function(){return e.modalTitle})),modalSubmitCaption:(0,a.Fl)((function(){return e.modalSubmitCaption}))}},methods:{openReportForm:function(){this.modalTitle="Новий документ",this.modalSubmitCaption="Додати",this.action="create",new p.u_(document.getElementById("ReportForm")).show()}},components:{ReportForm:(0,W.Z)(V,[["render",function(e,t,o,l,r,i){var n=(0,a.up)("ModalForm");return(0,a.wg)(),(0,a.j4)(n,{formId:"ReportForm",onSubmitData:i.submitData,onCloseForm:i.closeForm},{default:(0,a.w5)((function(){return[(0,a._)("div",f,[(0,a._)("div",b,[_,(0,a.wy)((0,a._)("input",{type:"text",class:(0,a.C_)(["form-control",e.hasError("name")?"is-invalid":""]),id:"reportName","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.formData.name=e})},null,2),[[a.nr,o.formData.name]]),(0,a._)("div",v,(0,a.zw)(e.getError("name")),1)])]),(0,a._)("div",h,[(0,a._)("div",w,[y,(0,a.wy)((0,a._)("input",{type:"text",class:(0,a.C_)(["form-control",e.hasError("description")?"is-invalid":""]),id:"reportDescription","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.formData.description=e})},null,2),[[a.nr,o.formData.description]]),(0,a._)("div",C,(0,a.zw)(e.getError("description")),1)])]),(0,a._)("div",F,[(0,a._)("div",g,[D,(0,a.wy)((0,a._)("select",{class:(0,a.C_)(["form-control",e.hasError("model")?"is-invalid":""]),id:"reporModel","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.formData.model=e}),disabled:o.disabledFields.includes("model")},[S,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.models,(function(e){return(0,a.wg)(),(0,a.iD)("option",{value:e.code,key:e.id},(0,a.zw)(e.name),9,M)})),128))],10,k),[[a.bM,o.formData.model]]),(0,a._)("div",I,(0,a.zw)(e.getError("model")),1)])]),q,(0,a._)("div",z,[(0,a._)("div",E,[H,(0,a.wy)((0,a._)("input",{type:"text",class:(0,a.C_)(["form-control",e.hasError("icon")?"is-invalid":""]),id:"reportIcon","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.formData.icon=e})},null,2),[[a.nr,o.formData.icon]]),(0,a._)("div",x,(0,a.zw)(e.getError("icon")),1)])])]})),_:1},8,["onSubmitData","onCloseForm"])}]])}},A=(0,W.Z)(Z,[["render",function(e,t,o,p,f,b){var _=(0,a.up)("breadcrumbs"),v=(0,a.up)("router-link"),h=(0,a.up)("ReportForm");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(_),(0,a._)("div",l,[(0,a._)("div",r,[i,(0,a._)("button",{class:"btn btn-sm btn-primary",onClick:t[0]||(t[0]=function(){return b.openReportForm&&b.openReportForm.apply(b,arguments)})},n)]),(0,a._)("div",d,[(0,a._)("table",s,[m,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.reports,(function(e){return(0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",c,[(0,a.Wm)(v,{to:{name:"reports.manager.show",params:{id:e.id}}},{default:(0,a.w5)((function(){return[u]})),_:2},1032,["to"])]),(0,a._)("td",null,(0,a.zw)(e.name),1),(0,a._)("td",null,(0,a.zw)(e.description),1),(0,a._)("td",null,(0,a.zw)(e.file_name),1),(0,a._)("td",null,(0,a.zw)(e.model),1),(0,a._)("td",null,(0,a.zw)(e.icon),1)])})),128))])])])]),(0,a.Wm)(h,{formData:f.formData,action:f.action,models:f.models},null,8,["formData","action","models"])],64)}]])},7008:(e,t,o)=>{o.r(t),o.d(t,{default:()=>v});var a=o(8222),l={class:"card"},r={class:"card-header"},i={class:"card-body"},n={class:"row"},d={class:"col"},s=(0,a.uE)('<div class="row mb-2"><div class="col-md-4"> Назва </div><div class="col-md-8"> Довідка про стан сім&#39;ї </div></div><div class="row mb-2"><div class="col-md-4"> Опис </div><div class="col-md-8"> Довідка про стан сім&#39;ї </div></div><div class="row mb-2"><div class="col-md-4"> Модель </div><div class="col-md-8"> App\\Models\\HouseholdMember </div></div>',3),m={class:"row mb-3"},c=(0,a._)("div",{class:"col-md-4"},[(0,a._)("label",{for:"formFile",class:"form-label"},"Шаблон документа")],-1),u={class:"col-md-8"},p={class:"col"},f={class:"col-md-6"},b=(0,a._)("div",{class:"col-md-6"},"memberFullName",-1);const _={name:"ReportsShow",props:{id:{type:[String,Number],required:!0}},data:function(){return{templateVariables:[]}},methods:{uploadImage:function(e){var t=this;console.log(e.target.files[0]);var o="/api/v1/upload-report-template/".concat(this.id),a=new FormData;a.append("name","template"),a.append("file",e.target.files[0]),console.log(a);axios.post(o,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.templateVariables=e.data.variables)}))}}};const v=(0,o(3744).Z)(_,[["render",function(e,t,o,_,v,h){var w=(0,a.up)("breadcrumbs");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(w),(0,a._)("div",l,[(0,a._)("div",r," Інформація о звіті "+(0,a.zw)(o.id),1),(0,a._)("div",i,[(0,a._)("div",n,[(0,a._)("div",d,[s,(0,a._)("div",m,[c,(0,a._)("div",u,[(0,a._)("input",{class:"form-control",type:"file",id:"templateFile",name:"template",onChange:t[0]||(t[0]=function(e){return h.uploadImage(e)})},null,32)])])]),(0,a._)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(v.templateVariables,(function(e,t){return(0,a.wg)(),(0,a.iD)("div",{class:"row mb-3",key:t},[(0,a._)("div",f,(0,a.zw)(e),1),b])})),128))])])])])],64)}]])}}]);