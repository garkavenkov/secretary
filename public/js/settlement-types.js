"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[346],{2965:(t,e,a)=>{a.d(e,{Z:()=>r});const r={data:function(){return{errors:{}}},methods:{getError:function(t){return this.errors&&this.errors[t]?this.errors[t][0]:""},hasError:function(t){return!(!this.errors||!this.errors[t])}},created:function(){var t=this,e=this,a=Object.keys(this.formData);this.excludeFiledsFromCreateWatch&&(a=a.filter((function(e){return!t.excludeFiledsFromCreateWatch.includes(e)}))),a.forEach((function(t){var a="formData.".concat(t);e.$watch(a,(function(){this.errors[t]&&delete this.errors[t]}))}))}}},4322:(t,e,a)=>{a.d(e,{Z:()=>i});var r=a(8222),n=a(8877);const i={data:function(){return{formData:{name:""},action:"",modalTitle:"",modalSubmitCaption:""}},provide:function(){var t=this;return{modalTitle:(0,r.Fl)((function(){return t.modalTitle})),modalSubmitCaption:(0,r.Fl)((function(){return t.modalSubmitCaption}))}},methods:{openFormForAdd:function(){var t=new n.u_(document.getElementById(this.formId));this.modalTitle=this.modalTitleCreate,this.modalSubmitCaption="Додати",this.action="create",t.show()},openFormForEdit:function(t){var e=new n.u_(document.getElementById(this.formId));this.modalTitle=this.modalTitleUpdate,this.modalSubmitCaption="Зберегти",this.formData.id=t.id,this.formData.name=t.name,this.action="update",e.show()}}}},9236:(t,e,a)=>{a.d(e,{Z:()=>i});var r=a(3645),n=a.n(r)()((function(t){return t[1]}));n.push([t.id,".per-page[data-v-299171f7],.search[data-v-299171f7]{border:1px solid #ced4da;border-radius:.25rem;color:#495057;font-size:.9rem;font-weight:400;line-height:1.6}.per-page[data-v-299171f7]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0 0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E\") right .75rem center/8px 10px no-repeat;padding:.3rem 1.5rem .3rem .5rem;vertical-align:middle}.search__wrapper label[data-v-299171f7]{margin-right:.5rem}.search__wrapper .search[data-v-299171f7]{background-clip:padding-box;background-color:#fff;display:inline-block;height:calc(1.6em + .75rem);padding:.375rem .75rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;width:200px}.per-page[data-v-299171f7]:focus,.search[data-v-299171f7]:focus{border-color:#7db8fb;box-shadow:0 0 0 .2rem rgba(7,117,242,.25);outline:0}.per-page__wrapper span[data-v-299171f7]{margin-right:.5rem}tbody tr[data-v-299171f7]:last-of-type{border-bottom:2px solid #343a40}.sort-field-number[data-v-299171f7]{background:#f8f9fa;border-color:#000;border-radius:999px;color:#000;display:inline-block;font-size:.6rem;line-height:1rem;position:absolute;right:1.5rem;text-align:center;top:calc(50% - .5rem);width:1rem}",""]);const i=n},5463:(t,e,a)=>{a.d(e,{Z:()=>i});var r=a(3645),n=a.n(r)()((function(t){return t[1]}));n.push([t.id,"table tr td[data-v-03a25192]:last-of-type{text-align:center;width:5rem}",""]);const i=n},938:(t,e,a)=>{a.d(e,{Z:()=>S});var r=a(8222),n=function(t){return(0,r.dD)("data-v-299171f7"),t=t(),(0,r.Cn)(),t},i={class:"data-table--wrapper"},o={key:0,class:"data-table_ d-flex justify-content-between pb-2"},s={class:"per-page__wrapper"},l=n((function(){return(0,r._)("span",null,"Відображати",-1)})),d=["disabled"],u=["value"],c={class:"search__wrapper"},f={autocomplete:"off"},m=n((function(){return(0,r._)("label",{for:"search"},"Поіск",-1)})),p={class:"table__wrapper"},h={class:"table-responsive"},g={key:0},b=["data-sort-field","data-field-type"],y={key:1,class:"data-table__pagination--wrapper d-flex justify-content-between align-items-center py-2"},v={class:"pagination mb-0"},w=["innerHTML","onClick"],D=["onClick"];const _={name:"DataTable",props:{perPageItems:{type:Array,required:!1,default:function(){return[10,20,50]}},dataTable:{type:Array},dataFields:{type:Array,required:!1},tableHeaderClass:{type:String,required:!1},tableClass:{type:String,required:!1},searchable:{type:String,required:!1,default:""},showActionsPanel:{type:Boolean,required:!1,default:function(){return!0}},showPaginationPanel:{type:Boolean,required:!1,default:function(){return!0}},externalPagination:{type:Object,required:!1},searchableFields:{type:Array,required:!1},sortByDefaultField:{type:String,required:!1,default:""}},data:function(){return{currentPage:1,perPage:this.perPageItems[0],searchData:"",sortedBy:{},fieldsType:{},sortedByLength:0,dataShouldBeSorted:!1}},emits:["pageChanged","perPageChanged"],methods:{changePerPage:function(t){var e;null!==(e=this.externalPagination)&&void 0!==e&&e.per_page?this.$emit("perPageChanged",t):(this.perPage=parseInt(t),this.currentPage=1)},nextPage:function(){this.currentPage++},prevPage:function(){this.currentPage--},changePage:function(t){var e;null!==(e=this.externalPagination)&&void 0!==e&&e.current_page&&this.$emit("pageChanged",t),this.currentPage=t},sortDataByField:function(t){var e=t.target.dataset.sortField,a=t.target.dataset.sortOrder;t.ctrlKey||(this.sortedBy={},document.querySelectorAll("[data-sort-order]").forEach((function(t){t.removeAttribute("data-sort-order"),t.removeAttribute("data-sort-position"),t.classList.remove("ascending","descending")})));"descending"==a?(t.target.classList.remove("descending"),t.target.removeAttribute("data-sort-order"),t.target.removeAttribute("data-sort-position"),delete this.sortedBy[e],document.querySelectorAll("[data-sort-position]").forEach((function(t){var e=t.dataset.sortPosition;t.dataset.sortPosition=e>1?e-1:1}))):(null==a?a="ascending":(t.target.classList.remove("ascending"),a="descending"),t.target.dataset.sortOrder=a,t.target.classList.add(a),this.sortedBy[e]=a);Object.keys(this.sortedBy).indexOf(e)>=0&&(t.target.dataset.sortPosition=Object.keys(this.sortedBy).indexOf(e)+1)},sortDataHandler:function(t,e){return function(a,r){var n=[];return Object.keys(t).forEach((function(i){var o=t[i],s=e[i];if("ascending"==o.toLowerCase())"string"==s?n.push(a[i].localeCompare(r[i])):"number"==s&&n.push(a[i]-r[i]);else{if("descending"!=o.toLowerCase())return;"string"==s?n.push(r[i].localeCompare(a[i])):"number"==s&&n.push(r[i]-a[i])}})),n.reduce((function(t,e){return t||e}))}}},computed:{pagesCount:function(){var t;return null!==(t=this.externalPagination)&&void 0!==t&&t.last_page?this.externalPagination.last_page:""==this.searchData?Math.ceil(this.dataTable.length/this.perPage):Math.ceil(this.paginatedData.length/this.perPage)},paginatedData:function(){var t,e,a=this;if(null!==(t=this.externalPagination)&&void 0!==t&&t.total)e=""!==this.searchData?this.dataTable.filter((function(t){return a.$parent.searchData(t,a.searchData)})):this.dataTable;else{var r=(this.currentPage-1)*this.perPage,n=r+this.perPage;e=""!==this.searchData?this.dataTable.filter((function(t){return a.$parent.searchData(t,a.searchData)})).slice(r,n):this.dataTable.slice(r,n)}return this.sortedByLength>0?e.sort(this.sortDataHandler(this.sortedBy,this.fieldsType)):""!==this.sortByDefaultField&&1==this.dataShouldBeSorted&&(e.sort((function(t,e){return t[a.sortByDefaultField]-e[a.sortByDefaultField]})),this.dataShouldBeSorted=!1),e},shownFrom:function(){var t;return null!==(t=this.externalPagination)&&void 0!==t&&t.from?this.externalPagination.from:(this.currentPage-1)*this.perPage+1},shownTo:function(){var t;if(null!==(t=this.externalPagination)&&void 0!==t&&t.to)return this.externalPagination.to;var e=this.shownFrom+this.perPage;return e<this.dataTable.length?e:this.dataTable.length},shownTotal:function(){var t;return null!==(t=this.externalPagination)&&void 0!==t&&t.total?this.externalPagination.total:this.dataTable.length},isLastPage:function(){return this.currentPage==this.pagesCount},isFirstPage:function(){return 1==this.currentPage}},mounted:function(){var t=this,e=document.querySelectorAll("[data-sort-field]");e&&e.forEach((function(e){e.addEventListener("click",t.sortDataByField),e.dataset.fieldType?t.fieldsType[e.dataset.sortField]=e.dataset.fieldType:t.fieldsType[e.dataset.sortField]="string"}))},watch:{sortedBy:{handler:function(t,e){this.sortedByLength=Object.keys(this.sortedBy).length},deep:!0,immidiate:!0},sortedByLength:function(t,e){1==e&&0==t&&(this.dataShouldBeSorted=!0)}}};var P=a(3379),C=a.n(P),T=a(9236),k={insert:"head",singleton:!1};C()(T.Z,k);T.Z.locals;const S=(0,a(3744).Z)(_,[["render",function(t,e,a,n,_,P){var C;return(0,r.wg)(),(0,r.iD)("div",i,[a.showActionsPanel?((0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",s,[l,(0,r._)("select",{name:"per_Page",id:"per_page",class:"per-page",disabled:0==P.paginatedData.length,onChange:e[0]||(e[0]=function(t){return P.changePerPage(t.target.value)})},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.perPageItems,(function(t,e){return(0,r.wg)(),(0,r.iD)("option",{key:e,value:t},(0,r.zw)(t),9,u)})),128))],40,d)]),(0,r._)("div",c,[(0,r._)("form",f,[m,(0,r.wy)((0,r._)("input",{type:"search",id:"search",class:"search",autocomplete:"off","onUpdate:modelValue":e[1]||(e[1]=function(t){return _.searchData=t})},null,512),[[r.nr,_.searchData]])])])])):(0,r.kq)("",!0),(0,r._)("div",p,[(0,r._)("div",h,[(0,r._)("table",{class:(0,r.C_)(["table table-striped",a.tableClass])},[(0,r._)("thead",{class:(0,r.C_)(a.tableHeaderClass)},[(0,r.WI)(t.$slots,"header",{},(function(){return[a.dataFields.length>0?((0,r.wg)(),(0,r.iD)("tr",g,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.dataFields,(function(t){return(0,r.wg)(),(0,r.iD)("th",{key:t.name,class:(0,r.C_)(t.class),"data-sort-field":t.sortable?t.name:"","data-field-type":t.dataType},(0,r.zw)(t.caption),11,b)})),128))])):(0,r.kq)("",!0)]}),!0)],2),(0,r._)("tbody",null,[(0,r.WI)(t.$slots,"default",{paginatedData:P.paginatedData},void 0,!0)]),(0,r._)("tfoot",null,[(0,r.WI)(t.$slots,"footer",{},void 0,!0)])],2)])]),P.paginatedData.length>0&&a.showPaginationPanel?((0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("div",null,"Відображено з "+(0,r.zw)(P.shownFrom)+" по "+(0,r.zw)(P.shownTo)+" із "+(0,r.zw)(P.shownTotal),1),(0,r._)("ul",v,[null!==(C=a.externalPagination)&&void 0!==C&&C.links?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(a.externalPagination.links,(function(t,e){return(0,r.wg)(),(0,r.iD)("li",{class:"page-item",key:e},[(0,r._)("a",{class:(0,r.C_)(["page-link",[t.active?"active":"",t.url?"":"disabled"]]),innerHTML:t.label,onClick:function(e){return P.changePage(t.url)}},null,10,w)])})),128)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("li",{class:(0,r.C_)(["page-item",{disabled:P.isFirstPage}])},[(0,r._)("a",{class:"page-link",onClick:e[2]||(e[2]=function(){return P.prevPage&&P.prevPage.apply(P,arguments)})}," Previous ")],2),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(P.pagesCount,(function(t){return(0,r.wg)(),(0,r.iD)("li",{class:(0,r.C_)(["page-item",[_.currentPage==t?"active":""]]),key:t},[(0,r._)("a",{class:"page-link",onClick:function(e){return P.changePage(t)}},(0,r.zw)(t),9,D)],2)})),128)),(0,r._)("li",{class:(0,r.C_)(["page-item",{disabled:P.isLastPage}])},[(0,r._)("a",{class:"page-link",onClick:e[3]||(e[3]=function(){return P.nextPage&&P.nextPage.apply(P,arguments)})}," Next ")],2)],64))])])):(0,r.kq)("",!0)])}],["__scopeId","data-v-299171f7"]])},6036:(t,e,a)=>{a.d(e,{Z:()=>f});var r=a(8222),n=["id"],i={class:"modal-header"},o={class:"d-flex align-items-center"},s=["innerHTML"],l={class:"modal-body"},d={key:0,class:"modal-footer justify-content-between"},u=["disabled"];const c={name:"ModalForm",props:{formId:{type:String,required:!0},modalClass:{type:String,required:!1,default:""},modalContentClass:{type:String,required:!1,default:""},showFooter:{type:Boolean,required:!1,default:function(){return!0}},sumbitIsDisabled:{type:Boolean,required:!1,default:function(){return!1}},title:{type:String,required:!1,default:""},submitCaption:{type:String,required:!1,default:""}},inject:{modalTitle:{from:"modalTitle",default:"Новий запис"},modalSubmitCaption:{from:"modalSubmitCaption",default:"Додати"}},data:function(){return{}},computed:{modalFormTitle:function(){return this.title?this.title:this.modalTitle},modalFormSubmitCaption:function(){return this.submitCaption?this.submitCaption:this.modalSubmitCaption}}};const f=(0,a(3744).Z)(c,[["render",function(t,e,a,c,f,m){return(0,r.wg)(),(0,r.iD)("div",{class:"modal fade",id:a.formId,tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[(0,r._)("div",{class:(0,r.C_)(["modal-dialog",a.modalClass])},[(0,r._)("div",{class:(0,r.C_)(["modal-content",a.modalContentClass])},[(0,r._)("div",i,[(0,r._)("div",o,[(0,r._)("h1",{class:"modal-title fs-5",innerHTML:m.modalFormTitle},null,8,s),(0,r.WI)(t.$slots,"modalHeader")]),(0,r._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=function(e){return t.$emit("closeForm")})})]),(0,r._)("div",l,[(0,r.WI)(t.$slots,"default")]),a.showFooter?((0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",null,[(0,r.WI)(t.$slots,"footer")]),(0,r._)("div",null,[(0,r._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=function(e){return t.$emit("closeForm")})},"Відмінити"),(0,r._)("button",{type:"button",class:"btn btn-primary ms-4",onClick:e[2]||(e[2]=function(e){return t.$emit("submitData")}),disabled:a.sumbitIsDisabled},(0,r.zw)(m.modalFormSubmitCaption),9,u)])])):(0,r.kq)("",!0)],2)],2)],8,n)}]])},577:(t,e,a)=>{a.d(e,{Z:()=>c});var r=a(8222),n={class:"row mb-3"},i={class:"col"},o=["for"],s=["id"],l=["id"];var d=a(6036);const u={name:"SystemDictionaryForm",mixins:[a(2965).Z],props:{formId:{type:String,required:!0},fieldId:{type:String,required:!0},url:{type:String,required:!0},formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},data:function(){return{}},methods:{submitData:function(){var t=this;"create"==this.action?axios.post(this.url,this.formData).then((function(e){t.clearFormData(),t.$emit("refreshData")})).catch((function(e){t.errors=e.response.data.errors})):"update"==this.action&&axios.patch("".concat(this.url,"/").concat(this.formData.id),this.formData).then((function(e){t.errors=[],t.$emit("refreshData")})).catch((function(e){t.errors=e.response.data.errors}))},clearFormData:function(){this.formData.name="",this.errors=[]}},components:{ModalForm:d.Z}};const c=(0,a(3744).Z)(u,[["render",function(t,e,a,d,u,c){var f=(0,r.up)("ModalForm");return(0,r.wg)(),(0,r.j4)(f,{formId:a.formId,onSubmitData:c.submitData,onCloseForm:c.clearFormData},{default:(0,r.w5)((function(){return[(0,r._)("div",n,[(0,r._)("div",i,[(0,r._)("label",{for:a.fieldId,class:"form-label"},"Назва",8,o),(0,r.wy)((0,r._)("textarea",{row:"2",class:(0,r.C_)(["form-control",t.hasError("name")?"is-invalid":""]),id:a.fieldId,"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.formData.name=t})},"\n                ",10,s),[[r.nr,a.formData.name]]),(0,r._)("div",{id:"".concat(a.fieldId,"Validation"),class:"invalid-feedback"},(0,r.zw)(t.getError("name")),9,l)])])]})),_:1},8,["formId","onSubmitData","onCloseForm"])}]])},4302:(t,e,a)=>{a.d(e,{Z:()=>v});var r=a(8222),n=function(t){return(0,r.dD)("data-v-03a25192"),t=t(),(0,r.Cn)(),t},i={class:"card"},o={class:"card-header"},s={class:"dictionary-name__wrapper"},l=[n((function(){return(0,r._)("span",{class:"mdi mdi-plus"},null,-1)}))],d={class:"card-body"},u=n((function(){return(0,r._)("th",null,null,-1)})),c=["onClick"],f=[n((function(){return(0,r._)("span",{class:"mdi mdi-pencil"},null,-1)}))];var m=a(938);const p={name:"SystemDictionaryTable",props:{title:{type:String,required:!0},dataTable:{type:Array,required:!0},fieldsTitle:{type:Array,required:!1,default:function(){return["Назва"]}},fieldsName:{type:Array,required:!1,default:function(){return["name"]}}},data:function(){return{}},components:{DataTable:m.Z}};var h=a(3379),g=a.n(h),b=a(5463),y={insert:"head",singleton:!1};g()(b.Z,y);b.Z.locals;const v=(0,a(3744).Z)(p,[["render",function(t,e,a,n,m,p){var h=(0,r.up)("DataTable");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",o,[(0,r._)("div",s,[(0,r._)("span",null,(0,r.zw)(a.title),1),(0,r._)("button",{class:"btn btn-sm btn-primary",onClick:e[0]||(e[0]=function(e){return t.$emit("newRecord")})},l)])]),(0,r._)("div",d,[(0,r.Wm)(h,{dataTable:a.dataTable,tableHeaderClass:"table-dark"},{header:(0,r.w5)((function(){return[(0,r._)("tr",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.fieldsTitle,(function(t,e){return(0,r.wg)(),(0,r.iD)("th",{key:e},(0,r.zw)(t),1)})),128)),u])]})),default:(0,r.w5)((function(e){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.paginatedData,(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.id},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.fieldsName,(function(t,a){return(0,r.wg)(),(0,r.iD)("td",{key:a},(0,r.zw)(e[t]),1)})),128)),(0,r._)("td",null,[(0,r._)("button",{class:"btn btn-sm btn-outline-secondary",onClick:function(a){return t.$emit("editRecord",e)},title:"Редагувати інформацію"},f,8,c)])])})),128))]})),_:1},8,["dataTable"])])])}],["__scopeId","data-v-03a25192"]])},5983:(t,e,a)=>{a.r(e),a.d(e,{default:()=>p});var r=a(8222),n={class:"row"},i={class:"col-md-8 col-lg-6 mx-auto"};var o=a(3907),s=a(4322),l=a(577),d=a(4302);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function f(t,e,a){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const m={name:"SettlementTypesMain",mixins:[s.Z],components:{SystemDictionaryForm:l.Z,SystemDictionaryTable:d.Z},data:function(){return{formId:"SettlementTypeForm",modalTitleCreate:"Новий тип населеного пункту",modalTitleUpdate:"Редагування типу"}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},(0,o.Se)("SettlementTypes",["settlementTypes"]))};const p=(0,a(3744).Z)(m,[["render",function(t,e,a,o,s,l){var d=(0,r.up)("breadcrumbs"),u=(0,r.up)("SystemDictionaryTable"),c=(0,r.up)("SystemDictionaryForm");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(d),(0,r._)("div",n,[(0,r._)("div",i,[(0,r.Wm)(u,{dataTable:t.settlementTypes,title:"Довідник 'Тип населеного пункту'",onNewRecord:t.openFormForAdd,onEditRecord:t.openFormForEdit},null,8,["dataTable","onNewRecord","onEditRecord"])])]),(0,r.Wm)(c,{formData:t.formData,action:t.action,formId:s.formId,fieldId:"settlementTypeName",url:"/api/v1/settlement-types",onRefreshData:e[0]||(e[0]=function(e){return t.$store.dispatch("SettlementTypes/fetchRecords")})},null,8,["formData","action","formId"])],64)}]])}}]);