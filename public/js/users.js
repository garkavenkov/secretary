"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[681],{2965:(e,t,a)=>{a.d(t,{Z:()=>r});const r={data:function(){return{errors:{}}},methods:{getError:function(e){return this.errors&&this.errors[e]?this.errors[e][0]:""},hasError:function(e){return!(!this.errors||!this.errors[e])}},created:function(){var e=this,t=this,a=Object.keys(this.formData);this.excludeFiledsFromCreateWatch&&(a=a.filter((function(t){return!e.excludeFiledsFromCreateWatch.includes(t)}))),a.forEach((function(e){var a="formData.".concat(e);t.$watch(a,(function(){this.errors[e]&&delete this.errors[e]}))}))}}},3753:(e,t,a)=>{a.d(t,{Z:()=>r});const r={methods:{submitData:function(){var e=this;"create"==this.action?axios.post(this.apiUrl,this.formData).then((function(t){e.$emit("refreshData"),e.$toast(t.data.message),void 0!==e.clearFormData&&e.clearFormData()})).catch((function(t){var a;e.errors=null===(a=t.response)||void 0===a?void 0:a.data.errors})):"update"==this.action&&axios.patch("".concat(this.apiUrl,"/").concat(this.formData.id),this.formData).then((function(t){e.errors=[],e.$emit("refreshData"),e.$toast(t.data.message)})).catch((function(t){var a;e.errors=null===(a=t.response)||void 0===a?void 0:a.data.errors}))}}}},7654:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(3645),n=a.n(r)()((function(e){return e[1]}));n.push([e.id,".per-page[data-v-46ce95a2],.search[data-v-46ce95a2]{border:1px solid #ced4da;border-radius:.25rem;color:#495057;font-size:.9rem;font-weight:400;line-height:1.6}.per-page[data-v-46ce95a2]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5'%3E%3Cpath fill='%23343a40' d='M2 0 0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E\") right .75rem center/8px 10px no-repeat;padding:.3rem 1.5rem .3rem .5rem;vertical-align:middle}.search__wrapper label[data-v-46ce95a2]{margin-right:.5rem}.search__wrapper .search[data-v-46ce95a2]{background-clip:padding-box;background-color:#fff;display:inline-block;height:calc(1.6em + .75rem);padding:.375rem .75rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;width:200px}.per-page[data-v-46ce95a2]:focus,.search[data-v-46ce95a2]:focus{border-color:#7db8fb;box-shadow:0 0 0 .2rem rgba(7,117,242,.25);outline:0}.per-page__wrapper span[data-v-46ce95a2]{margin-right:.5rem}tbody tr[data-v-46ce95a2]:last-of-type{border-bottom:2px solid #343a40}",""]);const i=n},9248:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(3645),n=a.n(r)()((function(e){return e[1]}));n.push([e.id,".photo[data-v-4a8f2478]{border:1px solid #ccc;border-radius:.375rem;height:300px;margin-bottom:1rem;max-height:300px;max-width:300px;overflow:hidden;width:300px}.photo img[data-v-4a8f2478]{height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.photo span[data-v-4a8f2478]{color:#888}",""]);const i=n},6654:(e,t,a)=>{a.d(t,{Z:()=>P});var r=a(8222),n=function(e){return(0,r.dD)("data-v-46ce95a2"),e=e(),(0,r.Cn)(),e},i={class:"data-table--wrapper"},o={key:0,class:"data-table_ d-flex justify-content-between pb-2"},s={class:"per-page__wrapper"},l=n((function(){return(0,r._)("span",null,"Відображати",-1)})),c=["disabled"],d=["value"],u={class:"search__wrapper"},m={autocomplete:"off"},p=n((function(){return(0,r._)("label",{for:"search"},"Поіск",-1)})),f={class:"table__wrapper"},h={class:"table-responsive"},g={key:1,class:"data-table__pagination--wrapper d-flex justify-content-between align-items-center py-2"},b={class:"pagination mb-0"},_=["innerHTML","onClick"],v=["onClick"];const w={name:"DataTable",props:{perPageItems:{type:Array,required:!1,default:function(){return[10,20,50]}},dataTable:{type:Array},tableHeaderClass:{type:String,required:!1},tableClass:{type:String,required:!1},searchable:{type:String,required:!1,default:""},showActionsPanel:{type:Boolean,required:!1,default:function(){return!0}},showPaginationPanel:{type:Boolean,required:!1,default:function(){return!0}},externalPagination:{type:Object,required:!1}},data:function(){return{currentPage:1,perPage:this.perPageItems[0],searchData:""}},emits:["pageChanged","perPageChanged"],methods:{changePerPage:function(e){var t;null!==(t=this.externalPagination)&&void 0!==t&&t.per_page?this.$emit("perPageChanged",e):(this.perPage=parseInt(e),this.currentPage=1)},nextPage:function(){this.currentPage++},prevPage:function(){this.currentPage--},changePage:function(e){var t;null!==(t=this.externalPagination)&&void 0!==t&&t.current_page&&this.$emit("pageChanged",e),this.currentPage=e}},computed:{pagesCount:function(){var e;return null!==(e=this.externalPagination)&&void 0!==e&&e.last_page?this.externalPagination.last_page:""==this.searchData?Math.ceil(this.dataTable.length/this.perPage):Math.ceil(this.paginatedData.length/this.perPage)},paginatedData:function(){var e,t=this;if(null!==(e=this.externalPagination)&&void 0!==e&&e.total)return""!==this.searchData?this.dataTable.filter((function(e){return t.$parent.searchData(e,t.searchData)})):this.dataTable;var a=(this.currentPage-1)*this.perPage,r=a+this.perPage;return""!==this.searchData?this.dataTable.filter((function(e){return t.$parent.searchData(e,t.searchData)})).slice(a,r):this.dataTable.slice(a,r)},shownFrom:function(){var e;return null!==(e=this.externalPagination)&&void 0!==e&&e.from?this.externalPagination.from:(this.currentPage-1)*this.perPage+1},shownTo:function(){var e;if(null!==(e=this.externalPagination)&&void 0!==e&&e.to)return this.externalPagination.to;var t=this.shownFrom+this.perPage;return t<this.dataTable.length?t:this.dataTable.length},shownTotal:function(){var e;return null!==(e=this.externalPagination)&&void 0!==e&&e.total?this.externalPagination.total:this.dataTable.length},isLastPage:function(){return this.currentPage==this.pagesCount},isFirstPage:function(){return 1==this.currentPage}}};var y=a(3379),D=a.n(y),k=a(7654),C={insert:"head",singleton:!1};D()(k.Z,C);k.Z.locals;const P=(0,a(3744).Z)(w,[["render",function(e,t,a,n,w,y){var D;return(0,r.wg)(),(0,r.iD)("div",i,[a.showActionsPanel?((0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",s,[l,(0,r._)("select",{name:"per_Page",id:"per_page",class:"per-page",disabled:0==y.paginatedData.length,onChange:t[0]||(t[0]=function(e){return y.changePerPage(e.target.value)})},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.perPageItems,(function(e,t){return(0,r.wg)(),(0,r.iD)("option",{key:t,value:e},(0,r.zw)(e),9,d)})),128))],40,c)]),(0,r._)("div",u,[(0,r._)("form",m,[p,(0,r.wy)((0,r._)("input",{type:"search",id:"search",class:"search",autocomplete:"off","onUpdate:modelValue":t[1]||(t[1]=function(e){return w.searchData=e})},null,512),[[r.nr,w.searchData]])])])])):(0,r.kq)("",!0),(0,r._)("div",f,[(0,r._)("div",h,[(0,r._)("table",{class:(0,r.C_)(["table table-striped",a.tableClass])},[(0,r._)("thead",{class:(0,r.C_)(a.tableHeaderClass)},[(0,r.WI)(e.$slots,"header",{},void 0,!0)],2),(0,r._)("tbody",null,[(0,r.WI)(e.$slots,"default",{paginatedData:y.paginatedData},void 0,!0)]),(0,r._)("tfoot",null,[(0,r.WI)(e.$slots,"footer",{},void 0,!0)])],2)])]),y.paginatedData.length>0&&a.showPaginationPanel?((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",null,"Відображено з "+(0,r.zw)(y.shownFrom)+" по "+(0,r.zw)(y.shownTo)+" із "+(0,r.zw)(y.shownTotal),1),(0,r._)("ul",b,[null!==(D=a.externalPagination)&&void 0!==D&&D.links?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(a.externalPagination.links,(function(e,t){return(0,r.wg)(),(0,r.iD)("li",{class:"page-item",key:t},[(0,r._)("a",{class:(0,r.C_)(["page-link",[e.active?"active":"",e.url?"":"disabled"]]),innerHTML:e.label,onClick:function(t){return y.changePage(e.url)}},null,10,_)])})),128)):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("li",{class:(0,r.C_)(["page-item",{disabled:y.isFirstPage}])},[(0,r._)("a",{class:"page-link",onClick:t[2]||(t[2]=function(){return y.prevPage&&y.prevPage.apply(y,arguments)})}," Previous ")],2),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(y.pagesCount,(function(e){return(0,r.wg)(),(0,r.iD)("li",{class:(0,r.C_)(["page-item",[w.currentPage==e?"active":""]]),key:e},[(0,r._)("a",{class:"page-link",onClick:function(t){return y.changePage(e)}},(0,r.zw)(e),9,v)],2)})),128)),(0,r._)("li",{class:(0,r.C_)(["page-item",{disabled:y.isLastPage}])},[(0,r._)("a",{class:"page-link",onClick:t[3]||(t[3]=function(){return y.nextPage&&y.nextPage.apply(y,arguments)})}," Next ")],2)],64))])])):(0,r.kq)("",!0)])}],["__scopeId","data-v-46ce95a2"]])},6036:(e,t,a)=>{a.d(t,{Z:()=>m});var r=a(8222),n=["id"],i={class:"modal-header"},o={class:"d-flex align-items-center"},s=["innerHTML"],l={class:"modal-body"},c={key:0,class:"modal-footer justify-content-between"},d=["disabled"];const u={name:"ModalForm",props:{formId:{type:String,required:!0},modalClass:{type:String,required:!1,default:""},modalContentClass:{type:String,required:!1,default:""},showFooter:{type:Boolean,required:!1,default:function(){return!0}},sumbitIsDisabled:{type:Boolean,required:!1,default:function(){return!1}},title:{type:String,required:!1,default:""},submitCaption:{type:String,required:!1,default:""}},inject:{modalTitle:{from:"modalTitle",default:"Новий запис"},modalSubmitCaption:{from:"modalSubmitCaption",default:"Додати"}},data:function(){return{}},computed:{modalFormTitle:function(){return this.title?this.title:this.modalTitle},modalFormSubmitCaption:function(){return this.submitCaption?this.submitCaption:this.modalSubmitCaption}}};const m=(0,a(3744).Z)(u,[["render",function(e,t,a,u,m,p){return(0,r.wg)(),(0,r.iD)("div",{class:"modal fade",id:a.formId,tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[(0,r._)("div",{class:(0,r.C_)(["modal-dialog",a.modalClass])},[(0,r._)("div",{class:(0,r.C_)(["modal-content",a.modalContentClass])},[(0,r._)("div",i,[(0,r._)("div",o,[(0,r._)("h1",{class:"modal-title fs-5",innerHTML:p.modalFormTitle},null,8,s),(0,r.WI)(e.$slots,"modalHeader")]),(0,r._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=function(t){return e.$emit("closeForm")})})]),(0,r._)("div",l,[(0,r.WI)(e.$slots,"default")]),a.showFooter?((0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("div",null,[(0,r.WI)(e.$slots,"footer")]),(0,r._)("div",null,[(0,r._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=function(t){return e.$emit("closeForm")})},"Відмінити"),(0,r._)("button",{type:"button",class:"btn btn-primary ms-4",onClick:t[2]||(t[2]=function(t){return e.$emit("submitData")}),disabled:a.sumbitIsDisabled},(0,r.zw)(p.modalFormSubmitCaption),9,d)])])):(0,r.kq)("",!0)],2)],2)],8,n)}]])},7218:(e,t,a)=>{a.d(t,{Z:()=>E});var r=a(8222),n={class:"row mb-3"},i={class:"col"},o=(0,r._)("label",{for:"userName",class:"form-label"},"Логін",-1),s={id:"userNameValidation",class:"invalid-feedback"},l={class:"row mb-3"},c={class:"col"},d=(0,r._)("label",{for:"name",class:"form-label"},"Прізвище Ім'я по Батькові",-1),u={id:"nameValidation",class:"invalid-feedback"},m={class:"row mb-3"},p={class:"col"},f=(0,r._)("label",{for:"email",class:"form-label"},"Електронна пошта",-1),h={id:"emailValidation",class:"invalid-feedback"},g={class:"row mb-3"},b={class:"col"},_=(0,r._)("label",{for:"position",class:"form-label"},"Посада",-1),v={id:"positionValidation",class:"invalid-feedback"},w={key:0,class:"row mb-3"},y={class:"col"},D=(0,r._)("label",{for:"password",class:"form-label"},"Пароль",-1),k={id:"passwordValidation",class:"invalid-feedback"},C={class:"col"},P=(0,r._)("label",{for:"password-confirm",class:"form-label"},"Підтвердіть пароль",-1),x={id:"passwordConfirmeValidation",class:"invalid-feedback"};var U=a(6036),T=a(3753),F=a(2965);const I={name:"RolesForm",mixins:[T.Z,F.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},data:function(){return{apiUrl:"/api/v1/users"}},methods:{clearFormData:function(){}},components:{ModalForm:U.Z}};const E=(0,a(3744).Z)(I,[["render",function(e,t,a,U,T,F){var I=(0,r.up)("ModalForm");return(0,r.wg)(),(0,r.j4)(I,{formId:"UserForm",onSubmitData:e.submitData,onCloseForm:F.clearFormData},{default:(0,r.w5)((function(){return[(0,r._)("div",n,[(0,r._)("div",i,[o,(0,r.wy)((0,r._)("input",{type:"text",class:(0,r.C_)(["form-control",e.hasError("user_name")?"is-invalid":""]),id:"userName","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.formData.user_name=e})},null,2),[[r.nr,a.formData.user_name]]),(0,r._)("div",s,(0,r.zw)(e.getError("user_name")),1)])]),(0,r._)("div",l,[(0,r._)("div",c,[d,(0,r.wy)((0,r._)("input",{type:"text",class:(0,r.C_)(["form-control",e.hasError("name")?"is-invalid":""]),id:"name","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.formData.name=e})},null,2),[[r.nr,a.formData.name]]),(0,r._)("div",u,(0,r.zw)(e.getError("name")),1)])]),(0,r._)("div",m,[(0,r._)("div",p,[f,(0,r.wy)((0,r._)("input",{type:"email",class:(0,r.C_)(["form-control",e.hasError("email")?"is-invalid":""]),id:"email","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.formData.email=e})},null,2),[[r.nr,a.formData.email]]),(0,r._)("div",h,(0,r.zw)(e.getError("email")),1)])]),(0,r._)("div",g,[(0,r._)("div",b,[_,(0,r.wy)((0,r._)("textarea",{class:(0,r.C_)(["form-control",e.hasError("position")?"is-invalid":""]),id:"position",rows:"2","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.formData.position=e})},null,2),[[r.nr,a.formData.position]]),(0,r._)("div",v,(0,r.zw)(e.getError("position")),1)])]),"create"==a.action?((0,r.wg)(),(0,r.iD)("div",w,[(0,r._)("div",y,[D,(0,r.wy)((0,r._)("input",{type:"password",class:(0,r.C_)(["form-control",e.hasError("password")?"is-invalid":""]),id:"password",autocomplete:"off","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.formData.password=e})},null,2),[[r.nr,a.formData.password]]),(0,r._)("div",k,(0,r.zw)(e.getError("password")),1)]),(0,r._)("div",C,[P,(0,r.wy)((0,r._)("input",{type:"password",class:(0,r.C_)(["form-control",e.hasError("password_confirm")?"is-invalid":""]),id:"password-confirm",autocomplete:"off","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.formData.password_confirm=e})},null,2),[[r.nr,a.formData.password_confirm]]),(0,r._)("div",x,(0,r.zw)(e.getError("password_confirm")),1)])])):(0,r.kq)("",!0)]})),_:1},8,["onSubmitData","onCloseForm"])}]])},4822:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(8222),n={class:"card"},i={class:"card-header"},o={class:"dictionary-name__wrapper"},s=(0,r._)("span",null,"Користувачі",-1),l=[(0,r._)("span",{class:"mdi mdi-plus"},null,-1)],c={class:"card-body"},d=(0,r._)("tr",null,[(0,r._)("th"),(0,r._)("th",null,"Прізвище Ім'я по Батькові"),(0,r._)("th",null,"Логін"),(0,r._)("th",null,"Посада")],-1),u=(0,r._)("span",{class:"mdi mdi-eye-outline"},null,-1);var m=a(8877),p=a(6654),f=a(7218);const h={name:"UsersMain",provide:function(){return{modalTitle:"Новий користувач"}},data:function(){return{users:[],form:{name:"",user_name:"",email:"",position:"",password:"",password_confirm:""}}},methods:{fetchUsers:function(){var e=this;axios.get("/api/v1/users").then((function(t){e.users=t.data.data}))},openUserForm:function(){this.form.name="",this.form.user_name="",this.form.email="",this.form.position="",this.form.password="",this.form.password_confirm="",new m.u_(document.getElementById("UserForm")).show()}},components:{DataTable:p.Z,UserForm:f.Z},created:function(){this.fetchUsers()}};const g=(0,a(3744).Z)(h,[["render",function(e,t,a,m,p,f){var h=(0,r.up)("breadcrumbs"),g=(0,r.up)("router-link"),b=(0,r.up)("DataTable"),_=(0,r.up)("UserForm");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(h),(0,r._)("div",n,[(0,r._)("div",i,[(0,r._)("div",o,[s,(0,r._)("button",{class:"btn btn-sm btn-primary",onClick:t[0]||(t[0]=function(){return f.openUserForm&&f.openUserForm.apply(f,arguments)})},l)])]),(0,r._)("div",c,[(0,r.Wm)(b,{dataTable:p.users,tableHeaderClass:"table-dark"},{header:(0,r.w5)((function(){return[d]})),default:(0,r.w5)((function(e){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.paginatedData,(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,[(0,r.Wm)(g,{to:{name:"users.profile",params:{id:e.id}}},{default:(0,r.w5)((function(){return[u]})),_:2},1032,["to"])]),(0,r._)("td",null,(0,r.zw)(e.name),1),(0,r._)("td",null,(0,r.zw)(e.user_name),1),(0,r._)("td",null,(0,r.zw)(e.position),1)])})),128))]})),_:1},8,["dataTable"])])]),(0,r.Wm)(_,{formData:p.form,onRefreshData:f.fetchUsers},null,8,["formData","onRefreshData"])],64)}]])},2341:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ee});var r=a(8222),n=function(e){return(0,r.dD)("data-v-4a8f2478"),e=e(),(0,r.Cn)(),e},i={class:"row"},o={class:"col-md-8 mx-auto"},s={key:0,class:"card"},l={class:"card-header"},c={class:"dropdown"},d=n((function(){return(0,r._)("button",{class:"btn btn-sm btn-outline-secondary btn-transparent dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,r._)("span",{class:"mdi mdi-cogs"})],-1)})),u={class:"dropdown-menu"},m=n((function(){return(0,r._)("span",{class:"mdi mdi-pencil text-warning me-1"},null,-1)})),p=n((function(){return(0,r._)("li",null,[(0,r._)("hr",{class:"dropdown-divider"})],-1)})),f=n((function(){return(0,r._)("span",{class:"mdi mdi-trash-can text-danger me-1"},null,-1)})),h={class:"card-body"},g={class:"row"},b={class:"col-md-4"},_={class:"photo"},v=["src"],w={class:"col-md-8"},y={class:"nav nav-tabs",id:"myTab",role:"tablist"},D={class:"nav-item",role:"presentation"},k=n((function(){return(0,r._)("span",{class:"mdi mdi-account-details-outline me-1"},null,-1)})),C={class:"nav-item",role:"presentation"},P=n((function(){return(0,r._)("span",{class:"mdi mdi-shield-account-variant-outline me-1"},null,-1)})),x={class:"tab-content p-3"},U={key:0},T={class:"row"},F=n((function(){return(0,r._)("dt",{class:"col-md-4"},"Прізвище Ім'я по Батькові",-1)})),I={class:"col-md-8"},E={class:"row"},q=n((function(){return(0,r._)("dt",{class:"col-md-4"},"Логін",-1)})),$={class:"col-md-8"},z={class:"row"},S=n((function(){return(0,r._)("dt",{class:"col-md-4"},"Посада",-1)})),R={class:"col-md-8"},Z={class:"row"},j=n((function(){return(0,r._)("dt",{class:"col-md-4"},"Електронна пошта",-1)})),M={class:"col-md-8"},H={class:"d-flex justify-content-end"},V={key:1},W=["for","title"],L=["id","value","disabled"],A={class:"d-flex justify-content-end"};var B=a(8877),O=a(7218);function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,i,o,s=[],l=!0,c=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=i.call(a)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(c)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}const N={name:"UserProfile",props:{id:{type:[String,Number],required:!0}},provide:function(){return{modalTitle:"Редагування користувача",modalSubmitCaption:"Зберегти"}},data:function(){return{user:{},formData:{id:null,name:"",user_name:"",email:"",position:""},roles:[],currentTab:"MainInfo",rolesIsEditable:!1}},methods:{fetchUser:function(){var e=this;axios.get("/api/v1/users/".concat(this.id)).then((function(t){e.user=t.data.data}))},fetchRoles:function(){var e=this;axios.get("/api/v1/roles").then((function(t){e.roles=t.data.data}))},imageSelected:function(e){var t=this;console.log(e);var a=document.getElementById("userPhotoPreview"),r=Y(e.target.files,1)[0];if(r){a.src=URL.createObjectURL(r);var n=new FormData;n.append("photo",e.target.files[0]);var i="/api/v1/users/".concat(this.id,"/upload-photo");axios.post(i,n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.fetchUser(),t.$toast(e.data.message))}))}},uploadImage:function(e){var t=this;axios.post(URL,e,config).then((function(e){200==e.status&&(t.fetchUser(),t.$toast(e.data.message))}))},editUser:function(){this.formData.id=this.user.id,this.formData.name=this.user.name,this.formData.user_name=this.user.user_name,this.formData.email=this.user.email,this.formData.position=this.user.position,new B.u_(document.getElementById("UserForm")).show()},editRoles:function(){this.rolesIsEditable=!0},cancelEditRoles:function(){this.rolesIsEditable=!1,this.fetchUser()},assignRoles:function(){var e=this,t={roles:this.user.roles.join(",")};axios.post("/api/v1/users/".concat(this.user.id,"/roles"),t).then((function(t){e.$toast(t.data.message),e.fetchUser(),e.rolesIsEditable=!1})).catch((function(t){e.fetchUser()}))},deleteUser:function(e){var t=this;this.$confirmDelete("Ви дійсно бажаєти видалити користувача").then((function(a){a.isConfirmed&&axios.delete("/api/v1/users/".concat(e)).then((function(e){t.$toast(e.data.message),t.$router.push({name:"users"})})).catch((function(e){t.$errorMessage("Неможливо видалити роль",e.response.data.message,"Зрозуміло")}))}))}},computed:{userPhotoPath:function(){return this.user.photo?"/users/".concat(this.user.photo):"/users/no-photo.jpg"}},created:function(){this.fetchUser(),this.fetchRoles()},components:{UserForm:O.Z}};var G=a(3379),J=a.n(G),Q=a(9248),X={insert:"head",singleton:!1};J()(Q.Z,X);Q.Z.locals;const ee=(0,a(3744).Z)(N,[["render",function(e,t,a,n,B,O){var Y=(0,r.up)("breadcrumbs"),K=(0,r.up)("UserForm");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(Y),(0,r._)("div",i,[(0,r._)("div",o,[B.user.name?((0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",l,[(0,r._)("h5",null,[(0,r.Uk)("Інформація о користувачі: "),(0,r._)("span",null,(0,r.zw)(B.user.name),1)]),(0,r._)("div",c,[d,(0,r._)("ul",u,[(0,r._)("li",null,[(0,r._)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=function(){return O.editUser&&O.editUser.apply(O,arguments)})},[m,(0,r.Uk)(" Редагувати ")])]),p,(0,r._)("li",null,[(0,r._)("a",{class:"dropdown-item",onClick:t[1]||(t[1]=function(e){return O.deleteUser(B.user.id)})},[f,(0,r.Uk)(" Видалити ")])])])])]),(0,r._)("div",h,[(0,r._)("div",g,[(0,r._)("div",b,[(0,r._)("div",_,[(0,r._)("img",{src:O.userPhotoPath,id:"userPhotoPreview"},null,8,v)]),(0,r._)("input",{type:"file",accept:"image/*",id:"file-input",name:"photo",onChange:t[2]||(t[2]=function(e){return O.imageSelected(e)})},null,32)]),(0,r._)("div",w,[(0,r._)("ul",y,[(0,r._)("li",D,[(0,r._)("button",{class:(0,r.C_)(["nav-link","MainInfo"==B.currentTab?"active":""]),id:"main-tab",onClick:t[3]||(t[3]=function(e){return B.currentTab="MainInfo"}),type:"button"},[k,(0,r.Uk)(" Головна інформація ")],2)]),(0,r._)("li",C,[(0,r._)("button",{class:(0,r.C_)(["nav-link","Roles"==B.currentTab?"active":""]),id:"main-tab",onClick:t[4]||(t[4]=function(e){return B.currentTab="Roles"}),type:"button"},[P,(0,r.Uk)(" Ролі ")],2)])]),(0,r._)("div",x,["MainInfo"==B.currentTab?((0,r.wg)(),(0,r.iD)("div",U,[(0,r._)("div",null,[(0,r._)("dl",T,[F,(0,r._)("dd",I,(0,r.zw)(B.user.name),1)]),(0,r._)("dl",E,[q,(0,r._)("dd",$,(0,r.zw)(B.user.user_name),1)]),(0,r._)("dl",z,[S,(0,r._)("dd",R,(0,r.zw)(B.user.position),1)]),(0,r._)("dl",Z,[j,(0,r._)("dd",M,(0,r.zw)(B.user.email),1)])]),(0,r._)("div",H,[(0,r._)("button",{class:"btn btn-sm btn-outline-primary",title:"Назначити ролі",onClick:t[5]||(t[5]=function(){return O.editUser&&O.editUser.apply(O,arguments)})}," Редагувати ")])])):(0,r.kq)("",!0),"Roles"==B.currentTab?((0,r.wg)(),(0,r.iD)("div",V,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(B.roles,(function(e){return(0,r.wg)(),(0,r.iD)("div",{class:"form-check",key:e.id},[(0,r._)("label",{class:"form-check-label",for:e.code,title:e.description},(0,r.zw)(e.name),9,W),(0,r.wy)((0,r._)("input",{class:"form-check-input",type:"checkbox",id:e.code,value:e.id,"onUpdate:modelValue":t[6]||(t[6]=function(e){return B.user.roles=e}),disabled:!B.rolesIsEditable},null,8,L),[[r.e8,B.user.roles]])])})),128)),(0,r._)("div",A,[B.rolesIsEditable?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn btn-sm btn-outline-primary",title:"Назначити ролі",onClick:t[7]||(t[7]=function(){return O.editRoles&&O.editRoles.apply(O,arguments)})}," Редагувати ")),B.rolesIsEditable?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"btn btn-sm btn-outline-danger me-1",title:"Відмінити призначення ролей",onClick:t[8]||(t[8]=function(){return O.cancelEditRoles&&O.cancelEditRoles.apply(O,arguments)})}," Відмінити ")):(0,r.kq)("",!0),B.rolesIsEditable?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"btn btn-sm btn-outline-primary",title:"Назначити ролі",onClick:t[9]||(t[9]=function(){return O.assignRoles&&O.assignRoles.apply(O,arguments)})}," Назначити ")):(0,r.kq)("",!0)])])):(0,r.kq)("",!0)])])])])])):(0,r.kq)("",!0)])]),(0,r.Wm)(K,{action:"update",formData:B.formData,onRefreshData:O.fetchUser},null,8,["formData","onRefreshData"])],64)}],["__scopeId","data-v-4a8f2478"]])}}]);