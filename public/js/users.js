"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[681],{9248:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(3645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,".photo[data-v-4a8f2478]{border:1px solid #ccc;border-radius:.375rem;height:300px;margin-bottom:1rem;max-height:300px;max-width:300px;overflow:hidden;width:300px}.photo img[data-v-4a8f2478]{height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.photo span[data-v-4a8f2478]{color:#888}",""]);const o=r},7218:(e,t,a)=>{a.d(t,{Z:()=>T});var n=a(8222),r={class:"row mb-3"},o={class:"col"},s=(0,n._)("label",{for:"userName",class:"form-label"},"Логін",-1),i={id:"userNameValidation",class:"invalid-feedback"},l={class:"row mb-3"},c={class:"col"},d=(0,n._)("label",{for:"name",class:"form-label"},"Прізвище Ім'я по Батькові",-1),u={id:"nameValidation",class:"invalid-feedback"},m={class:"row mb-3"},f={class:"col"},p=(0,n._)("label",{for:"email",class:"form-label"},"Електронна пошта",-1),h={id:"emailValidation",class:"invalid-feedback"},_={class:"row mb-3"},b={class:"col"},v=(0,n._)("label",{for:"position",class:"form-label"},"Посада",-1),w={id:"positionValidation",class:"invalid-feedback"},g={key:0,class:"row mb-3"},y={class:"col"},D=(0,n._)("label",{for:"password",class:"form-label"},"Пароль",-1),k={id:"passwordValidation",class:"invalid-feedback"},U={class:"col"},C=(0,n._)("label",{for:"password-confirm",class:"form-label"},"Підтвердіть пароль",-1),E={id:"passwordConfirmeValidation",class:"invalid-feedback"};var x=a(6036),R=a(3753),I=a(2965);const F={name:"RolesForm",mixins:[R.Z,I.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},data:function(){return{apiUrl:"/api/v1/users"}},methods:{clearFormData:function(){}},components:{ModalForm:x.Z}};const T=(0,a(3744).Z)(F,[["render",function(e,t,a,x,R,I){var F=(0,n.up)("ModalForm");return(0,n.wg)(),(0,n.j4)(F,{formId:"UserForm",onSubmitData:e.submitData,onCloseForm:I.clearFormData},{default:(0,n.w5)((function(){return[(0,n._)("div",r,[(0,n._)("div",o,[s,(0,n.wy)((0,n._)("input",{type:"text",class:(0,n.C_)(["form-control",e.hasError("user_name")?"is-invalid":""]),id:"userName","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.formData.user_name=e})},null,2),[[n.nr,a.formData.user_name]]),(0,n._)("div",i,(0,n.zw)(e.getError("user_name")),1)])]),(0,n._)("div",l,[(0,n._)("div",c,[d,(0,n.wy)((0,n._)("input",{type:"text",class:(0,n.C_)(["form-control",e.hasError("name")?"is-invalid":""]),id:"name","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.formData.name=e})},null,2),[[n.nr,a.formData.name]]),(0,n._)("div",u,(0,n.zw)(e.getError("name")),1)])]),(0,n._)("div",m,[(0,n._)("div",f,[p,(0,n.wy)((0,n._)("input",{type:"email",class:(0,n.C_)(["form-control",e.hasError("email")?"is-invalid":""]),id:"email","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.formData.email=e})},null,2),[[n.nr,a.formData.email]]),(0,n._)("div",h,(0,n.zw)(e.getError("email")),1)])]),(0,n._)("div",_,[(0,n._)("div",b,[v,(0,n.wy)((0,n._)("textarea",{class:(0,n.C_)(["form-control",e.hasError("position")?"is-invalid":""]),id:"position",rows:"2","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.formData.position=e})},null,2),[[n.nr,a.formData.position]]),(0,n._)("div",w,(0,n.zw)(e.getError("position")),1)])]),"create"==a.action?((0,n.wg)(),(0,n.iD)("div",g,[(0,n._)("div",y,[D,(0,n.wy)((0,n._)("input",{type:"password",class:(0,n.C_)(["form-control",e.hasError("password")?"is-invalid":""]),id:"password",autocomplete:"off","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.formData.password=e})},null,2),[[n.nr,a.formData.password]]),(0,n._)("div",k,(0,n.zw)(e.getError("password")),1)]),(0,n._)("div",U,[C,(0,n.wy)((0,n._)("input",{type:"password",class:(0,n.C_)(["form-control",e.hasError("password_confirm")?"is-invalid":""]),id:"password-confirm",autocomplete:"off","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.formData.password_confirm=e})},null,2),[[n.nr,a.formData.password_confirm]]),(0,n._)("div",E,(0,n.zw)(e.getError("password_confirm")),1)])])):(0,n.kq)("",!0)]})),_:1},8,["onSubmitData","onCloseForm"])}]])},4822:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var n=a(8222),r={class:"card"},o={class:"card-header"},s={class:"dictionary-name__wrapper"},i=(0,n._)("span",null,"Користувачі",-1),l=[(0,n._)("span",{class:"mdi mdi-plus"},null,-1)],c={class:"card-body"},d=(0,n._)("tr",null,[(0,n._)("th"),(0,n._)("th",null,"Прізвище Ім'я по Батькові"),(0,n._)("th",null,"Логін"),(0,n._)("th",null,"Посада")],-1),u=(0,n._)("span",{class:"mdi mdi-eye-outline"},null,-1);var m=a(8877),f=a(366),p=a(7218);const h={name:"UsersMain",provide:function(){return{modalTitle:"Новий користувач"}},data:function(){return{users:[],form:{name:"",user_name:"",email:"",position:"",password:"",password_confirm:""}}},methods:{fetchUsers:function(){var e=this;axios.get("/api/v1/users").then((function(t){e.users=t.data.data}))},openUserForm:function(){this.form.name="",this.form.user_name="",this.form.email="",this.form.position="",this.form.password="",this.form.password_confirm="",new m.u_(document.getElementById("UserForm")).show()}},components:{DataTable:f.Z,UserForm:p.Z},created:function(){this.fetchUsers()}};const _=(0,a(3744).Z)(h,[["render",function(e,t,a,m,f,p){var h=(0,n.up)("breadcrumbs"),_=(0,n.up)("router-link"),b=(0,n.up)("DataTable"),v=(0,n.up)("UserForm");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(h),(0,n._)("div",r,[(0,n._)("div",o,[(0,n._)("div",s,[i,(0,n._)("button",{class:"btn btn-sm btn-primary",onClick:t[0]||(t[0]=function(){return p.openUserForm&&p.openUserForm.apply(p,arguments)})},l)])]),(0,n._)("div",c,[(0,n.Wm)(b,{dataTable:f.users,tableHeaderClass:"table-dark"},{header:(0,n.w5)((function(){return[d]})),default:(0,n.w5)((function(e){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.paginatedData,(function(e){return(0,n.wg)(),(0,n.iD)("tr",{key:e.id},[(0,n._)("td",null,[(0,n.Wm)(_,{to:{name:"users.profile",params:{id:e.id}}},{default:(0,n.w5)((function(){return[u]})),_:2},1032,["to"])]),(0,n._)("td",null,(0,n.zw)(e.name),1),(0,n._)("td",null,(0,n.zw)(e.user_name),1),(0,n._)("td",null,(0,n.zw)(e.position),1)])})),128))]})),_:1},8,["dataTable"])])]),(0,n.Wm)(v,{formData:f.form,onRefreshData:p.fetchUsers},null,8,["formData","onRefreshData"])],64)}]])},2341:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ee});var n=a(8222),r=function(e){return(0,n.dD)("data-v-4a8f2478"),e=e(),(0,n.Cn)(),e},o={class:"row"},s={class:"col-md-8 mx-auto"},i={key:0,class:"card"},l={class:"card-header"},c={class:"dropdown"},d=r((function(){return(0,n._)("button",{class:"btn btn-sm btn-outline-secondary btn-transparent dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,n._)("span",{class:"mdi mdi-cogs"})],-1)})),u={class:"dropdown-menu"},m=r((function(){return(0,n._)("span",{class:"mdi mdi-pencil text-warning me-1"},null,-1)})),f=r((function(){return(0,n._)("li",null,[(0,n._)("hr",{class:"dropdown-divider"})],-1)})),p=r((function(){return(0,n._)("span",{class:"mdi mdi-trash-can text-danger me-1"},null,-1)})),h={class:"card-body"},_={class:"row"},b={class:"col-md-4"},v={class:"photo"},w=["src"],g={class:"col-md-8"},y={class:"nav nav-tabs",id:"myTab",role:"tablist"},D={class:"nav-item",role:"presentation"},k=r((function(){return(0,n._)("span",{class:"mdi mdi-account-details-outline me-1"},null,-1)})),U={class:"nav-item",role:"presentation"},C=r((function(){return(0,n._)("span",{class:"mdi mdi-shield-account-variant-outline me-1"},null,-1)})),E={class:"tab-content p-3"},x={key:0},R={class:"row"},I=r((function(){return(0,n._)("dt",{class:"col-md-4"},"Прізвище Ім'я по Батькові",-1)})),F={class:"col-md-8"},T={class:"row"},z=r((function(){return(0,n._)("dt",{class:"col-md-4"},"Логін",-1)})),j={class:"col-md-8"},V={class:"row"},Z=r((function(){return(0,n._)("dt",{class:"col-md-4"},"Посада",-1)})),S={class:"col-md-8"},q={class:"row"},M=r((function(){return(0,n._)("dt",{class:"col-md-4"},"Електронна пошта",-1)})),P={class:"col-md-8"},$={class:"d-flex justify-content-end"},A={key:1},O=["for","title"],W=["id","value","disabled"],H={class:"d-flex justify-content-end"};var N=a(8877),Y=a(7218);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,o,s,i=[],l=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(n=o.call(a)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(c)throw r}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const K={name:"UserProfile",props:{id:{type:[String,Number],required:!0}},provide:function(){return{modalTitle:"Редагування користувача",modalSubmitCaption:"Зберегти"}},data:function(){return{user:{},formData:{id:null,name:"",user_name:"",email:"",position:""},roles:[],currentTab:"MainInfo",rolesIsEditable:!1}},methods:{fetchUser:function(){var e=this;axios.get("/api/v1/users/".concat(this.id)).then((function(t){e.user=t.data.data}))},fetchRoles:function(){var e=this;axios.get("/api/v1/roles").then((function(t){e.roles=t.data.data}))},imageSelected:function(e){var t=this;console.log(e);var a=document.getElementById("userPhotoPreview"),n=B(e.target.files,1)[0];if(n){a.src=URL.createObjectURL(n);var r=new FormData;r.append("photo",e.target.files[0]);var o="/api/v1/users/".concat(this.id,"/upload-photo");axios.post(o,r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.fetchUser(),t.$toast(e.data.message))}))}},uploadImage:function(e){var t=this;axios.post(URL,e,config).then((function(e){200==e.status&&(t.fetchUser(),t.$toast(e.data.message))}))},editUser:function(){this.formData.id=this.user.id,this.formData.name=this.user.name,this.formData.user_name=this.user.user_name,this.formData.email=this.user.email,this.formData.position=this.user.position,new N.u_(document.getElementById("UserForm")).show()},editRoles:function(){this.rolesIsEditable=!0},cancelEditRoles:function(){this.rolesIsEditable=!1,this.fetchUser()},assignRoles:function(){var e=this,t={roles:this.user.roles.join(",")};axios.post("/api/v1/users/".concat(this.user.id,"/roles"),t).then((function(t){e.$toast(t.data.message),e.fetchUser(),e.rolesIsEditable=!1})).catch((function(t){e.fetchUser()}))},deleteUser:function(e){var t=this;this.$confirmDelete("Ви дійсно бажаєти видалити користувача").then((function(a){a.isConfirmed&&axios.delete("/api/v1/users/".concat(e)).then((function(e){t.$toast(e.data.message),t.$router.push({name:"users"})})).catch((function(e){t.$errorMessage("Неможливо видалити роль",e.response.data.message,"Зрозуміло")}))}))}},computed:{userPhotoPath:function(){return this.user.photo?"/users/".concat(this.user.photo):"/users/no-photo.jpg"}},created:function(){this.fetchUser(),this.fetchRoles()},components:{UserForm:Y.Z}};var G=a(3379),J=a.n(G),Q=a(9248),X={insert:"head",singleton:!1};J()(Q.Z,X);Q.Z.locals;const ee=(0,a(3744).Z)(K,[["render",function(e,t,a,r,N,Y){var B=(0,n.up)("breadcrumbs"),L=(0,n.up)("UserForm");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(B),(0,n._)("div",o,[(0,n._)("div",s,[N.user.name?((0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",l,[(0,n._)("h5",null,[(0,n.Uk)("Інформація о користувачі: "),(0,n._)("span",null,(0,n.zw)(N.user.name),1)]),(0,n._)("div",c,[d,(0,n._)("ul",u,[(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=function(){return Y.editUser&&Y.editUser.apply(Y,arguments)})},[m,(0,n.Uk)(" Редагувати ")])]),f,(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",onClick:t[1]||(t[1]=function(e){return Y.deleteUser(N.user.id)})},[p,(0,n.Uk)(" Видалити ")])])])])]),(0,n._)("div",h,[(0,n._)("div",_,[(0,n._)("div",b,[(0,n._)("div",v,[(0,n._)("img",{src:Y.userPhotoPath,id:"userPhotoPreview"},null,8,w)]),(0,n._)("input",{type:"file",accept:"image/*",id:"file-input",name:"photo",onChange:t[2]||(t[2]=function(e){return Y.imageSelected(e)})},null,32)]),(0,n._)("div",g,[(0,n._)("ul",y,[(0,n._)("li",D,[(0,n._)("button",{class:(0,n.C_)(["nav-link","MainInfo"==N.currentTab?"active":""]),id:"main-tab",onClick:t[3]||(t[3]=function(e){return N.currentTab="MainInfo"}),type:"button"},[k,(0,n.Uk)(" Головна інформація ")],2)]),(0,n._)("li",U,[(0,n._)("button",{class:(0,n.C_)(["nav-link","Roles"==N.currentTab?"active":""]),id:"main-tab",onClick:t[4]||(t[4]=function(e){return N.currentTab="Roles"}),type:"button"},[C,(0,n.Uk)(" Ролі ")],2)])]),(0,n._)("div",E,["MainInfo"==N.currentTab?((0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("div",null,[(0,n._)("dl",R,[I,(0,n._)("dd",F,(0,n.zw)(N.user.name),1)]),(0,n._)("dl",T,[z,(0,n._)("dd",j,(0,n.zw)(N.user.user_name),1)]),(0,n._)("dl",V,[Z,(0,n._)("dd",S,(0,n.zw)(N.user.position),1)]),(0,n._)("dl",q,[M,(0,n._)("dd",P,(0,n.zw)(N.user.email),1)])]),(0,n._)("div",$,[(0,n._)("button",{class:"btn btn-sm btn-outline-primary",title:"Назначити ролі",onClick:t[5]||(t[5]=function(){return Y.editUser&&Y.editUser.apply(Y,arguments)})}," Редагувати ")])])):(0,n.kq)("",!0),"Roles"==N.currentTab?((0,n.wg)(),(0,n.iD)("div",A,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(N.roles,(function(e){return(0,n.wg)(),(0,n.iD)("div",{class:"form-check",key:e.id},[(0,n._)("label",{class:"form-check-label",for:e.code,title:e.description},(0,n.zw)(e.name),9,O),(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:e.code,value:e.id,"onUpdate:modelValue":t[6]||(t[6]=function(e){return N.user.roles=e}),disabled:!N.rolesIsEditable},null,8,W),[[n.e8,N.user.roles]])])})),128)),(0,n._)("div",H,[N.rolesIsEditable?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-sm btn-outline-primary",title:"Назначити ролі",onClick:t[7]||(t[7]=function(){return Y.editRoles&&Y.editRoles.apply(Y,arguments)})}," Редагувати ")),N.rolesIsEditable?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-sm btn-outline-danger me-1",title:"Відмінити призначення ролей",onClick:t[8]||(t[8]=function(){return Y.cancelEditRoles&&Y.cancelEditRoles.apply(Y,arguments)})}," Відмінити ")):(0,n.kq)("",!0),N.rolesIsEditable?((0,n.wg)(),(0,n.iD)("button",{key:2,class:"btn btn-sm btn-outline-primary",title:"Назначити ролі",onClick:t[9]||(t[9]=function(){return Y.assignRoles&&Y.assignRoles.apply(Y,arguments)})}," Назначити ")):(0,n.kq)("",!0)])])):(0,n.kq)("",!0)])])])])])):(0,n.kq)("",!0)])]),(0,n.Wm)(L,{action:"update",formData:N.formData,onRefreshData:Y.fetchUser},null,8,["formData","onRefreshData"])],64)}],["__scopeId","data-v-4a8f2478"]])}}]);