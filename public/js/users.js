"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[681],{9248:(e,t,o)=>{o.d(t,{Z:()=>r});var a=o(3645),n=o.n(a)()((function(e){return e[1]}));n.push([e.id,".photo[data-v-4a8f2478]{border:1px solid #ccc;border-radius:.375rem;height:300px;margin-bottom:1rem;max-height:300px;max-width:300px;overflow:hidden;width:300px}.photo img[data-v-4a8f2478]{height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.photo span[data-v-4a8f2478]{color:#888}",""]);const r=n},2675:(e,t,o)=>{o.d(t,{Z:()=>_});var a=o(8222),n={class:"row mb-3"},r={class:"col"},l=(0,a.createElementVNode)("label",{for:"userName",class:"form-label"},"Логін",-1),s={id:"userNameValidation",class:"invalid-feedback"},i={class:"row mb-3"},c={class:"col"},d=(0,a.createElementVNode)("label",{for:"name",class:"form-label"},"Прізвище Ім'я по Батькові",-1),m={id:"nameValidation",class:"invalid-feedback"},u={class:"row mb-3"},f={class:"col"},p=(0,a.createElementVNode)("label",{for:"email",class:"form-label"},"Електронна пошта",-1),h={id:"emailValidation",class:"invalid-feedback"},E={class:"row mb-3"},v={class:"col"},V=(0,a.createElementVNode)("label",{for:"position",class:"form-label"},"Посада",-1),b={id:"positionValidation",class:"invalid-feedback"},N={key:0,class:"row mb-3"},y={class:"col"},g=(0,a.createElementVNode)("label",{for:"password",class:"form-label"},"Пароль",-1),w={id:"passwordValidation",class:"invalid-feedback"},k={class:"col"},D=(0,a.createElementVNode)("label",{for:"password_confirmation",class:"form-label"},"Підтвердіть пароль",-1),C={id:"passwordConfirmeValidation",class:"invalid-feedback"};var x=o(4170),U=o(3753),B=o(2965);const S={name:"RolesForm",mixins:[U.Z,B.Z],props:{formData:{type:Object,required:!0},action:{type:String,required:!1,default:"create"}},data:function(){return{apiUrl:"/api/v1/users"}},methods:{clearFormData:function(){}},components:{ModalForm:x.Z}};const _=(0,o(3744).Z)(S,[["render",function(e,t,o,x,U,B){var S=(0,a.resolveComponent)("ModalForm");return(0,a.openBlock)(),(0,a.createBlock)(S,{formId:"UserForm",onSubmitData:e.submitData,onCloseForm:B.clearFormData},{default:(0,a.withCtx)((function(){return[(0,a.createElementVNode)("div",n,[(0,a.createElementVNode)("div",r,[l,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",class:(0,a.normalizeClass)(["form-control",e.hasError("user_name")?"is-invalid":""]),id:"userName","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.formData.user_name=e})},null,2),[[a.vModelText,o.formData.user_name]]),(0,a.createElementVNode)("div",s,(0,a.toDisplayString)(e.getError("user_name")),1)])]),(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("div",c,[d,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",class:(0,a.normalizeClass)(["form-control",e.hasError("name")?"is-invalid":""]),id:"name","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.formData.name=e})},null,2),[[a.vModelText,o.formData.name]]),(0,a.createElementVNode)("div",m,(0,a.toDisplayString)(e.getError("name")),1)])]),(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("div",f,[p,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"email",class:(0,a.normalizeClass)(["form-control",e.hasError("email")?"is-invalid":""]),id:"email","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.formData.email=e})},null,2),[[a.vModelText,o.formData.email]]),(0,a.createElementVNode)("div",h,(0,a.toDisplayString)(e.getError("email")),1)])]),(0,a.createElementVNode)("div",E,[(0,a.createElementVNode)("div",v,[V,(0,a.withDirectives)((0,a.createElementVNode)("textarea",{class:(0,a.normalizeClass)(["form-control",e.hasError("position")?"is-invalid":""]),id:"position",rows:"2","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.formData.position=e})},null,2),[[a.vModelText,o.formData.position]]),(0,a.createElementVNode)("div",b,(0,a.toDisplayString)(e.getError("position")),1)])]),"create"==o.action?((0,a.openBlock)(),(0,a.createElementBlock)("div",N,[(0,a.createElementVNode)("div",y,[g,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"password",class:(0,a.normalizeClass)(["form-control",e.hasError("password")?"is-invalid":""]),id:"password",autocomplete:"off","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.formData.password=e})},null,2),[[a.vModelText,o.formData.password]]),(0,a.createElementVNode)("div",w,(0,a.toDisplayString)(e.getError("password")),1)]),(0,a.createElementVNode)("div",k,[D,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"password",class:(0,a.normalizeClass)(["form-control",e.hasError("password_confirmation")?"is-invalid":""]),id:"password_confirmation",autocomplete:"off","onUpdate:modelValue":t[5]||(t[5]=function(e){return o.formData.password_confirmation=e})},null,2),[[a.vModelText,o.formData.password_confirmation]]),(0,a.createElementVNode)("div",C,(0,a.toDisplayString)(e.getError("password_confirm")),1)])])):(0,a.createCommentVNode)("",!0)]})),_:1},8,["onSubmitData","onCloseForm"])}]])},7957:(e,t,o)=>{o.r(t),o.d(t,{default:()=>E});var a=o(8222),n={class:"card"},r={class:"card-header"},l={class:"dictionary-name__wrapper"},s=(0,a.createElementVNode)("span",null,"Користувачі",-1),i=[(0,a.createElementVNode)("span",{class:"mdi mdi-plus"},null,-1)],c={class:"card-body"},d=(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("th"),(0,a.createElementVNode)("th",null,"Прізвище Ім'я по Батькові"),(0,a.createElementVNode)("th",null,"Логін"),(0,a.createElementVNode)("th",null,"Посада")],-1),m=(0,a.createElementVNode)("span",{class:"mdi mdi-eye-outline"},null,-1);var u=o(8877),f=o(6558),p=o(2675);const h={name:"UsersMain",provide:function(){return{modalTitle:"Новий користувач"}},data:function(){return{users:[],form:{name:"",user_name:"",email:"",position:"",password:"",password_confirmation:""}}},methods:{fetchUsers:function(){var e=this;axios.get("/api/v1/users").then((function(t){e.users=t.data.data}))},openUserForm:function(){this.form.name="",this.form.user_name="",this.form.email="",this.form.position="",this.form.password="",this.form.password_confirmation="",new u.u_(document.getElementById("UserForm")).show()}},components:{DataTable:f.Z,UserForm:p.Z},created:function(){this.fetchUsers()}};const E=(0,o(3744).Z)(h,[["render",function(e,t,o,u,f,p){var h=(0,a.resolveComponent)("breadcrumbs"),E=(0,a.resolveComponent)("router-link"),v=(0,a.resolveComponent)("DataTable"),V=(0,a.resolveComponent)("UserForm");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(h),(0,a.createElementVNode)("div",n,[(0,a.createElementVNode)("div",r,[(0,a.createElementVNode)("div",l,[s,(0,a.createElementVNode)("button",{class:"btn btn-sm btn-primary",onClick:t[0]||(t[0]=function(){return p.openUserForm&&p.openUserForm.apply(p,arguments)})},i)])]),(0,a.createElementVNode)("div",c,[(0,a.createVNode)(v,{dataTable:f.users,tableHeaderClass:"table-dark"},{header:(0,a.withCtx)((function(){return[d]})),default:(0,a.withCtx)((function(e){return[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.paginatedData,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("tr",{key:e.id},[(0,a.createElementVNode)("td",null,[(0,a.createVNode)(E,{to:{name:"users.profile",params:{id:e.id}}},{default:(0,a.withCtx)((function(){return[m]})),_:2},1032,["to"])]),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.user_name),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.position),1)])})),128))]})),_:1},8,["dataTable"])])]),(0,a.createVNode)(V,{formData:f.form,onRefreshData:p.fetchUsers},null,8,["formData","onRefreshData"])],64)}]])},2341:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ee});var a=o(8222),n=function(e){return(0,a.pushScopeId)("data-v-4a8f2478"),e=e(),(0,a.popScopeId)(),e},r={class:"row"},l={class:"col-md-8 mx-auto"},s={key:0,class:"card"},i={class:"card-header"},c={class:"dropdown"},d=n((function(){return(0,a.createElementVNode)("button",{class:"btn btn-sm btn-outline-secondary btn-transparent dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,a.createElementVNode)("span",{class:"mdi mdi-cogs"})],-1)})),m={class:"dropdown-menu"},u=n((function(){return(0,a.createElementVNode)("span",{class:"mdi mdi-pencil text-warning me-1"},null,-1)})),f=n((function(){return(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("hr",{class:"dropdown-divider"})],-1)})),p=n((function(){return(0,a.createElementVNode)("span",{class:"mdi mdi-trash-can text-danger me-1"},null,-1)})),h={class:"card-body"},E={class:"row"},v={class:"col-md-4"},V={class:"photo"},b=["src"],N={class:"col-md-8"},y={class:"nav nav-tabs",id:"myTab",role:"tablist"},g={class:"nav-item",role:"presentation"},w=n((function(){return(0,a.createElementVNode)("span",{class:"mdi mdi-account-details-outline me-1"},null,-1)})),k={class:"nav-item",role:"presentation"},D=n((function(){return(0,a.createElementVNode)("span",{class:"mdi mdi-shield-account-variant-outline me-1"},null,-1)})),C={class:"tab-content p-3"},x={key:0},U={class:"row"},B=n((function(){return(0,a.createElementVNode)("dt",{class:"col-md-4"},"Прізвище Ім'я по Батькові",-1)})),S={class:"col-md-8"},_={class:"row"},T=n((function(){return(0,a.createElementVNode)("dt",{class:"col-md-4"},"Логін",-1)})),I={class:"col-md-8"},F={class:"row"},R=n((function(){return(0,a.createElementVNode)("dt",{class:"col-md-4"},"Посада",-1)})),M={class:"col-md-8"},j={class:"row"},Z=n((function(){return(0,a.createElementVNode)("dt",{class:"col-md-4"},"Електронна пошта",-1)})),P={class:"col-md-8"},z={class:"d-flex justify-content-end"},$={key:1},A=["for","title"],O=["id","value","disabled"],L={class:"d-flex justify-content-end"};var q=o(8877),H=o(2675);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a,n,r,l,s=[],i=!0,c=!1;try{if(r=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;i=!1}else for(;!(i=(a=r.call(o)).done)&&(s.push(a.value),s.length!==t);i=!0);}catch(e){c=!0,n=e}finally{try{if(!i&&null!=o.return&&(l=o.return(),Object(l)!==l))return}finally{if(c)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,a=new Array(t);o<t;o++)a[o]=e[o];return a}const K={name:"UserProfile",props:{id:{type:[String,Number],required:!0}},provide:function(){return{modalTitle:"Редагування користувача",modalSubmitCaption:"Зберегти"}},data:function(){return{user:{},formData:{id:null,name:"",user_name:"",email:"",position:""},roles:[],currentTab:"MainInfo",rolesIsEditable:!1}},methods:{fetchUser:function(){var e=this;axios.get("/api/v1/users/".concat(this.id)).then((function(t){e.user=t.data.data}))},fetchRoles:function(){var e=this;axios.get("/api/v1/roles").then((function(t){e.roles=t.data.data}))},imageSelected:function(e){var t=this;console.log(e);var o=document.getElementById("userPhotoPreview"),a=G(e.target.files,1)[0];if(a){o.src=URL.createObjectURL(a);var n=new FormData;n.append("photo",e.target.files[0]);var r="/api/v1/users/".concat(this.id,"/upload-photo");axios.post(r,n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200==e.status&&(t.fetchUser(),t.$toast(e.data.message))}))}},uploadImage:function(e){var t=this;axios.post(URL,e,config).then((function(e){200==e.status&&(t.fetchUser(),t.$toast(e.data.message))}))},editUser:function(){this.formData.id=this.user.id,this.formData.name=this.user.name,this.formData.user_name=this.user.user_name,this.formData.email=this.user.email,this.formData.position=this.user.position,new q.u_(document.getElementById("UserForm")).show()},editRoles:function(){this.rolesIsEditable=!0},cancelEditRoles:function(){this.rolesIsEditable=!1,this.fetchUser()},assignRoles:function(){var e=this,t={roles:this.user.roles.join(",")};axios.post("/api/v1/users/".concat(this.user.id,"/roles"),t).then((function(t){e.$toast(t.data.message),e.fetchUser(),e.rolesIsEditable=!1})).catch((function(t){e.fetchUser()}))},deleteUser:function(e){var t=this;this.$confirmDelete("Ви дійсно бажаєти видалити користувача").then((function(o){o.isConfirmed&&axios.delete("/api/v1/users/".concat(e)).then((function(e){t.$toast(e.data.message),t.$router.push({name:"users"})})).catch((function(e){t.$errorMessage("Неможливо видалити роль",e.response.data.message,"Зрозуміло")}))}))}},computed:{userPhotoPath:function(){return this.user.photo?"/users/".concat(this.user.photo):"/users/no-photo.jpg"}},created:function(){this.fetchUser(),this.fetchRoles()},components:{UserForm:H.Z}};var Q=o(3379),W=o.n(Q),X=o(9248),Y={insert:"head",singleton:!1};W()(X.Z,Y);X.Z.locals;const ee=(0,o(3744).Z)(K,[["render",function(e,t,o,n,q,H){var G=(0,a.resolveComponent)("breadcrumbs"),J=(0,a.resolveComponent)("UserForm");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(G),(0,a.createElementVNode)("div",r,[(0,a.createElementVNode)("div",l,[q.user.name?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("h5",null,[(0,a.createTextVNode)("Інформація о користувачі: "),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(q.user.name),1)]),(0,a.createElementVNode)("div",c,[d,(0,a.createElementVNode)("ul",m,[(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=function(){return H.editUser&&H.editUser.apply(H,arguments)})},[u,(0,a.createTextVNode)(" Редагувати ")])]),f,(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("a",{class:"dropdown-item",onClick:t[1]||(t[1]=function(e){return H.deleteUser(q.user.id)})},[p,(0,a.createTextVNode)(" Видалити ")])])])])]),(0,a.createElementVNode)("div",h,[(0,a.createElementVNode)("div",E,[(0,a.createElementVNode)("div",v,[(0,a.createElementVNode)("div",V,[(0,a.createElementVNode)("img",{src:H.userPhotoPath,id:"userPhotoPreview"},null,8,b)]),(0,a.createElementVNode)("input",{type:"file",accept:"image/*",id:"file-input",name:"photo",onChange:t[2]||(t[2]=function(e){return H.imageSelected(e)})},null,32)]),(0,a.createElementVNode)("div",N,[(0,a.createElementVNode)("ul",y,[(0,a.createElementVNode)("li",g,[(0,a.createElementVNode)("button",{class:(0,a.normalizeClass)(["nav-link","MainInfo"==q.currentTab?"active":""]),id:"main-tab",onClick:t[3]||(t[3]=function(e){return q.currentTab="MainInfo"}),type:"button"},[w,(0,a.createTextVNode)(" Головна інформація ")],2)]),(0,a.createElementVNode)("li",k,[(0,a.createElementVNode)("button",{class:(0,a.normalizeClass)(["nav-link","Roles"==q.currentTab?"active":""]),id:"main-tab",onClick:t[4]||(t[4]=function(e){return q.currentTab="Roles"}),type:"button"},[D,(0,a.createTextVNode)(" Ролі ")],2)])]),(0,a.createElementVNode)("div",C,["MainInfo"==q.currentTab?((0,a.openBlock)(),(0,a.createElementBlock)("div",x,[(0,a.createElementVNode)("div",null,[(0,a.createElementVNode)("dl",U,[B,(0,a.createElementVNode)("dd",S,(0,a.toDisplayString)(q.user.name),1)]),(0,a.createElementVNode)("dl",_,[T,(0,a.createElementVNode)("dd",I,(0,a.toDisplayString)(q.user.user_name),1)]),(0,a.createElementVNode)("dl",F,[R,(0,a.createElementVNode)("dd",M,(0,a.toDisplayString)(q.user.position),1)]),(0,a.createElementVNode)("dl",j,[Z,(0,a.createElementVNode)("dd",P,(0,a.toDisplayString)(q.user.email),1)])]),(0,a.createElementVNode)("div",z,[(0,a.createElementVNode)("button",{class:"btn btn-sm btn-outline-primary",title:"Назначити ролі",onClick:t[5]||(t[5]=function(){return H.editUser&&H.editUser.apply(H,arguments)})}," Редагувати ")])])):(0,a.createCommentVNode)("",!0),"Roles"==q.currentTab?((0,a.openBlock)(),(0,a.createElementBlock)("div",$,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(q.roles,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"form-check",key:e.id},[(0,a.createElementVNode)("label",{class:"form-check-label",for:e.code,title:e.description},(0,a.toDisplayString)(e.name),9,A),(0,a.withDirectives)((0,a.createElementVNode)("input",{class:"form-check-input",type:"checkbox",id:e.code,value:e.id,"onUpdate:modelValue":t[6]||(t[6]=function(e){return q.user.roles=e}),disabled:!q.rolesIsEditable},null,8,O),[[a.vModelCheckbox,q.user.roles]])])})),128)),(0,a.createElementVNode)("div",L,[q.rolesIsEditable?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:0,class:"btn btn-sm btn-outline-primary",title:"Назначити ролі",onClick:t[7]||(t[7]=function(){return H.editRoles&&H.editRoles.apply(H,arguments)})}," Редагувати ")),q.rolesIsEditable?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:1,class:"btn btn-sm btn-outline-danger me-1",title:"Відмінити призначення ролей",onClick:t[8]||(t[8]=function(){return H.cancelEditRoles&&H.cancelEditRoles.apply(H,arguments)})}," Відмінити ")):(0,a.createCommentVNode)("",!0),q.rolesIsEditable?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:2,class:"btn btn-sm btn-outline-primary",title:"Назначити ролі",onClick:t[9]||(t[9]=function(){return H.assignRoles&&H.assignRoles.apply(H,arguments)})}," Назначити ")):(0,a.createCommentVNode)("",!0)])])):(0,a.createCommentVNode)("",!0)])])])])])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(J,{action:"update",formData:q.formData,onRefreshData:H.fetchUser},null,8,["formData","onRefreshData"])],64)}],["__scopeId","data-v-4a8f2478"]])}}]);